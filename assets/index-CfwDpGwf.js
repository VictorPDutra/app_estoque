(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function gf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sd={exports:{}},za={},Rd={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function iw(){if(Ig)return Ae;Ig=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=T&&b[T]||b["@@iterator"],typeof b=="function"?b:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function U(b,Q,de){this.props=b,this.context=Q,this.refs=B,this.updater=de||N}U.prototype.isReactComponent={},U.prototype.setState=function(b,Q){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,Q,"setState")},U.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function K(){}K.prototype=U.prototype;function W(b,Q,de){this.props=b,this.context=Q,this.refs=B,this.updater=de||N}var ee=W.prototype=new K;ee.constructor=W,L(ee,U.prototype),ee.isPureReactComponent=!0;var ae=Array.isArray,Ee=Object.prototype.hasOwnProperty,Te={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(b,Q,de){var Re,Ce={},Oe=null,Ue=null;if(Q!=null)for(Re in Q.ref!==void 0&&(Ue=Q.ref),Q.key!==void 0&&(Oe=""+Q.key),Q)Ee.call(Q,Re)&&!D.hasOwnProperty(Re)&&(Ce[Re]=Q[Re]);var je=arguments.length-2;if(je===1)Ce.children=de;else if(1<je){for(var qe=Array(je),vt=0;vt<je;vt++)qe[vt]=arguments[vt+2];Ce.children=qe}if(b&&b.defaultProps)for(Re in je=b.defaultProps,je)Ce[Re]===void 0&&(Ce[Re]=je[Re]);return{$$typeof:r,type:b,key:Oe,ref:Ue,props:Ce,_owner:Te.current}}function C(b,Q){return{$$typeof:r,type:b.type,key:Q,ref:b.ref,props:b.props,_owner:b._owner}}function x(b){return typeof b=="object"&&b!==null&&b.$$typeof===r}function V(b){var Q={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(de){return Q[de]})}var F=/\/+/g;function A(b,Q){return typeof b=="object"&&b!==null&&b.key!=null?V(""+b.key):Q.toString(36)}function et(b,Q,de,Re,Ce){var Oe=typeof b;(Oe==="undefined"||Oe==="boolean")&&(b=null);var Ue=!1;if(b===null)Ue=!0;else switch(Oe){case"string":case"number":Ue=!0;break;case"object":switch(b.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=b,Ce=Ce(Ue),b=Re===""?"."+A(Ue,0):Re,ae(Ce)?(de="",b!=null&&(de=b.replace(F,"$&/")+"/"),et(Ce,Q,de,"",function(vt){return vt})):Ce!=null&&(x(Ce)&&(Ce=C(Ce,de+(!Ce.key||Ue&&Ue.key===Ce.key?"":(""+Ce.key).replace(F,"$&/")+"/")+b)),Q.push(Ce)),1;if(Ue=0,Re=Re===""?".":Re+":",ae(b))for(var je=0;je<b.length;je++){Oe=b[je];var qe=Re+A(Oe,je);Ue+=et(Oe,Q,de,qe,Ce)}else if(qe=I(b),typeof qe=="function")for(b=qe.call(b),je=0;!(Oe=b.next()).done;)Oe=Oe.value,qe=Re+A(Oe,je++),Ue+=et(Oe,Q,de,qe,Ce);else if(Oe==="object")throw Q=String(b),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Fe(b,Q,de){if(b==null)return b;var Re=[],Ce=0;return et(b,Re,"","",function(Oe){return Q.call(de,Oe,Ce++)}),Re}function He(b){if(b._status===-1){var Q=b._result;Q=Q(),Q.then(function(de){(b._status===0||b._status===-1)&&(b._status=1,b._result=de)},function(de){(b._status===0||b._status===-1)&&(b._status=2,b._result=de)}),b._status===-1&&(b._status=0,b._result=Q)}if(b._status===1)return b._result.default;throw b._result}var De={current:null},re={transition:null},pe={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:re,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Fe,forEach:function(b,Q,de){Fe(b,function(){Q.apply(this,arguments)},de)},count:function(b){var Q=0;return Fe(b,function(){Q++}),Q},toArray:function(b){return Fe(b,function(Q){return Q})||[]},only:function(b){if(!x(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ae.Component=U,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=W,Ae.StrictMode=i,Ae.Suspense=p,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ae.act=se,Ae.cloneElement=function(b,Q,de){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var Re=L({},b.props),Ce=b.key,Oe=b.ref,Ue=b._owner;if(Q!=null){if(Q.ref!==void 0&&(Oe=Q.ref,Ue=Te.current),Q.key!==void 0&&(Ce=""+Q.key),b.type&&b.type.defaultProps)var je=b.type.defaultProps;for(qe in Q)Ee.call(Q,qe)&&!D.hasOwnProperty(qe)&&(Re[qe]=Q[qe]===void 0&&je!==void 0?je[qe]:Q[qe])}var qe=arguments.length-2;if(qe===1)Re.children=de;else if(1<qe){je=Array(qe);for(var vt=0;vt<qe;vt++)je[vt]=arguments[vt+2];Re.children=je}return{$$typeof:r,type:b.type,key:Ce,ref:Oe,props:Re,_owner:Ue}},Ae.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},Ae.createElement=S,Ae.createFactory=function(b){var Q=S.bind(null,b);return Q.type=b,Q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(b){return{$$typeof:d,render:b}},Ae.isValidElement=x,Ae.lazy=function(b){return{$$typeof:E,_payload:{_status:-1,_result:b},_init:He}},Ae.memo=function(b,Q){return{$$typeof:y,type:b,compare:Q===void 0?null:Q}},Ae.startTransition=function(b){var Q=re.transition;re.transition={};try{b()}finally{re.transition=Q}},Ae.unstable_act=se,Ae.useCallback=function(b,Q){return De.current.useCallback(b,Q)},Ae.useContext=function(b){return De.current.useContext(b)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(b){return De.current.useDeferredValue(b)},Ae.useEffect=function(b,Q){return De.current.useEffect(b,Q)},Ae.useId=function(){return De.current.useId()},Ae.useImperativeHandle=function(b,Q,de){return De.current.useImperativeHandle(b,Q,de)},Ae.useInsertionEffect=function(b,Q){return De.current.useInsertionEffect(b,Q)},Ae.useLayoutEffect=function(b,Q){return De.current.useLayoutEffect(b,Q)},Ae.useMemo=function(b,Q){return De.current.useMemo(b,Q)},Ae.useReducer=function(b,Q,de){return De.current.useReducer(b,Q,de)},Ae.useRef=function(b){return De.current.useRef(b)},Ae.useState=function(b){return De.current.useState(b)},Ae.useSyncExternalStore=function(b,Q,de){return De.current.useSyncExternalStore(b,Q,de)},Ae.useTransition=function(){return De.current.useTransition()},Ae.version="18.3.1",Ae}var Sg;function yf(){return Sg||(Sg=1,Rd.exports=iw()),Rd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function sw(){if(Rg)return za;Rg=1;var r=yf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,y){var E,T={},I=null,N=null;y!==void 0&&(I=""+y),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(N=p.ref);for(E in p)i.call(p,E)&&!l.hasOwnProperty(E)&&(T[E]=p[E]);if(d&&d.defaultProps)for(E in p=d.defaultProps,p)T[E]===void 0&&(T[E]=p[E]);return{$$typeof:e,type:d,key:I,ref:N,props:T,_owner:o.current}}return za.Fragment=t,za.jsx=h,za.jsxs=h,za}var Cg;function ow(){return Cg||(Cg=1,Sd.exports=sw()),Sd.exports}var P=ow(),M=yf();const aw=gf(M);var Fu={},Cd={exports:{}},Zt={},Ad={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function lw(){return Ag||(Ag=1,function(r){function e(re,pe){var se=re.length;re.push(pe);e:for(;0<se;){var b=se-1>>>1,Q=re[b];if(0<o(Q,pe))re[b]=pe,re[se]=Q,se=b;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var pe=re[0],se=re.pop();if(se!==pe){re[0]=se;e:for(var b=0,Q=re.length,de=Q>>>1;b<de;){var Re=2*(b+1)-1,Ce=re[Re],Oe=Re+1,Ue=re[Oe];if(0>o(Ce,se))Oe<Q&&0>o(Ue,Ce)?(re[b]=Ue,re[Oe]=se,b=Oe):(re[b]=Ce,re[Re]=se,b=Re);else if(Oe<Q&&0>o(Ue,se))re[b]=Ue,re[Oe]=se,b=Oe;else break e}}return pe}function o(re,pe){var se=re.sortIndex-pe.sortIndex;return se!==0?se:re.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],y=[],E=1,T=null,I=3,N=!1,L=!1,B=!1,U=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(re){for(var pe=t(y);pe!==null;){if(pe.callback===null)i(y);else if(pe.startTime<=re)i(y),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(y)}}function ae(re){if(B=!1,ee(re),!L)if(t(p)!==null)L=!0,He(Ee);else{var pe=t(y);pe!==null&&De(ae,pe.startTime-re)}}function Ee(re,pe){L=!1,B&&(B=!1,K(S),S=-1),N=!0;var se=I;try{for(ee(pe),T=t(p);T!==null&&(!(T.expirationTime>pe)||re&&!V());){var b=T.callback;if(typeof b=="function"){T.callback=null,I=T.priorityLevel;var Q=b(T.expirationTime<=pe);pe=r.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&i(p),ee(pe)}else i(p);T=t(p)}if(T!==null)var de=!0;else{var Re=t(y);Re!==null&&De(ae,Re.startTime-pe),de=!1}return de}finally{T=null,I=se,N=!1}}var Te=!1,D=null,S=-1,C=5,x=-1;function V(){return!(r.unstable_now()-x<C)}function F(){if(D!==null){var re=r.unstable_now();x=re;var pe=!0;try{pe=D(!0,re)}finally{pe?A():(Te=!1,D=null)}}else Te=!1}var A;if(typeof W=="function")A=function(){W(F)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Fe=et.port2;et.port1.onmessage=F,A=function(){Fe.postMessage(null)}}else A=function(){U(F,0)};function He(re){D=re,Te||(Te=!0,A())}function De(re,pe){S=U(function(){re(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){L||N||(L=!0,He(Ee))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(re){switch(I){case 1:case 2:case 3:var pe=3;break;default:pe=I}var se=I;I=pe;try{return re()}finally{I=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,pe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=I;I=re;try{return pe()}finally{I=se}},r.unstable_scheduleCallback=function(re,pe,se){var b=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?b+se:b):se=b,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=se+Q,re={id:E++,callback:pe,priorityLevel:re,startTime:se,expirationTime:Q,sortIndex:-1},se>b?(re.sortIndex=se,e(y,re),t(p)===null&&re===t(y)&&(B?(K(S),S=-1):B=!0,De(ae,se-b))):(re.sortIndex=Q,e(p,re),L||N||(L=!0,He(Ee))),re},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(re){var pe=I;return function(){var se=I;I=pe;try{return re.apply(this,arguments)}finally{I=se}}}}(Pd)),Pd}var Pg;function uw(){return Pg||(Pg=1,Ad.exports=lw()),Ad.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function cw(){if(kg)return Zt;kg=1;var r=yf(),e=uw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function I(n){return p.call(T,n)?!0:p.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function N(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,s,a,c){if(s===null||typeof s>"u"||N(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(n,s,a,c,f,g,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new B(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function W(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(K,W);U[s]=new B(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(K,W);U[s]=new B(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(K,W);U[s]=new B(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function ee(n,s,a,c){var f=U.hasOwnProperty(s)?U[s]:null;(f!==null?f.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(L(s,a,f,c)&&(a=null),c||f===null?I(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var ae=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),Te=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),re=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,b;function Q(n){if(b===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);b=s&&s[1]||""}return`
`+b+n}var de=!1;function Re(n,s){if(!n||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var c=H}Reflect.construct(n,[],s)}else{try{s.call()}catch(H){c=H}n.call(s.prototype)}else{try{throw Error()}catch(H){c=H}n()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),g=c.stack.split(`
`),v=f.length-1,R=g.length-1;1<=v&&0<=R&&f[v]!==g[R];)R--;for(;1<=v&&0<=R;v--,R--)if(f[v]!==g[R]){if(v!==1||R!==1)do if(v--,R--,0>R||f[v]!==g[R]){var k=`
`+f[v].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=v&&0<=R);break}}}finally{de=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ce(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function Oe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case Te:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case et:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case F:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Fe:return s=n.displayName||null,s!==null?s:Oe(n.type)||"Memo";case He:s=n._payload,n=n._init;try{return Oe(n(s))}catch{}}return null}function Ue(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function vt(n){var s=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ur(n){n._valueTracker||(n._valueTracker=vt(n))}function Is(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,s){var a=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ss(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=je(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ko(n,s){s=s.checked,s!=null&&ee(n,"checked",s,!1)}function Go(n,s){Ko(n,s);var a=je(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Rs(n,s.type,a):s.hasOwnProperty("defaultValue")&&Rs(n,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Il(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Rs(n,s,a){(s!=="number"||jr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var cr=Array.isArray;function hr(n,s,a,c){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Cs(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(cr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:je(a)}}function As(n,s){var a=je(s.value),c=je(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Yo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,Xo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function zr(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(bi).forEach(function(n){Fi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),bi[s]=bi[n]})});function Jo(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||bi.hasOwnProperty(n)&&bi[n]?(""+s).trim():s+"px"}function Zo(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Jo(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var ea=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ta(n,s){if(s){if(ea[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function na(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function Ps(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ks=null,hn=null,Hn=null;function xs(n){if(n=Ca(n)){if(typeof ks!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Zl(s),ks(n.stateNode,n.type,s))}}function qn(n){hn?Hn?Hn.push(n):Hn=[n]:hn=n}function ra(){if(hn){var n=hn,s=Hn;if(Hn=hn=null,xs(n),s)for(n=0;n<s.length;n++)xs(s[n])}}function ji(n,s){return n(s)}function ia(){}var fr=!1;function sa(n,s,a){if(fr)return n(s,a);fr=!0;try{return ji(n,s,a)}finally{fr=!1,(hn!==null||Hn!==null)&&(ia(),ra())}}function st(n,s){var a=n.stateNode;if(a===null)return null;var c=Zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ns=!1;if(d)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{Ns=!1}function zi(n,s,a,c,f,g,v,R,k){var H=Array.prototype.slice.call(arguments,3);try{s.apply(a,H)}catch(X){this.onError(X)}}var Bi=!1,Ds=null,Cn=!1,oa=null,Jc={onError:function(n){Bi=!0,Ds=n}};function Os(n,s,a,c,f,g,v,R,k){Bi=!1,Ds=null,zi.apply(Jc,arguments)}function Sl(n,s,a,c,f,g,v,R,k){if(Os.apply(this,arguments),Bi){if(Bi){var H=Ds;Bi=!1,Ds=null}else throw Error(t(198));Cn||(Cn=!0,oa=H)}}function An(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function $i(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Pn(n){if(An(n)!==n)throw Error(t(188))}function Rl(n){var s=n.alternate;if(!s){if(s=An(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Pn(f),n;if(g===c)return Pn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var v=!1,R=f.child;R;){if(R===a){v=!0,a=f,c=g;break}if(R===c){v=!0,c=f,a=g;break}R=R.sibling}if(!v){for(R=g.child;R;){if(R===a){v=!0,a=g,c=f;break}if(R===c){v=!0,c=g,a=f;break}R=R.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function aa(n){return n=Rl(n),n!==null?Ls(n):null}function Ls(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ls(n);if(s!==null)return s;n=n.sibling}return null}var Vs=e.unstable_scheduleCallback,la=e.unstable_cancelCallback,Cl=e.unstable_shouldYield,Zc=e.unstable_requestPaint,We=e.unstable_now,Al=e.unstable_getCurrentPriorityLevel,Hi=e.unstable_ImmediatePriority,Br=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,ua=e.unstable_LowPriority,Pl=e.unstable_IdlePriority,qi=null,nn=null;function kl(n){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(qi,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Nl,ca=Math.log,xl=Math.LN2;function Nl(n){return n>>>=0,n===0?32:31-(ca(n)/xl|0)|0}var Ms=64,bs=4194304;function $r(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Wi(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var R=v&~f;R!==0?c=$r(R):(g&=v,g!==0&&(c=$r(g)))}else v=a&~f,v!==0?c=$r(v):g!==0&&(c=$r(g));if(c===0)return 0;if(s!==0&&s!==c&&!(s&f)&&(f=c&-c,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(c&4&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-Bt(s),f=1<<a,c|=n[a],s&=~f;return c}function eh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-Bt(g),R=1<<v,k=f[v];k===-1?(!(R&a)||R&c)&&(f[v]=eh(R,s)):k<=s&&(n.expiredLanes|=R),g&=~R}}function rn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ki(){var n=Ms;return Ms<<=1,!(Ms&4194240)&&(Ms=64),n}function Hr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function qr(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Bt(s),n[s]=a}function $e(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Bt(a),g=1<<f;s[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function Wr(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-Bt(a),f=1<<c;f&s|n[c]&s&&(n[c]|=s),a&=~f}}var xe=0;function Kr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Dl,Fs,Ol,Ll,Vl,ha=!1,Wn=[],Ct=null,kn=null,xn=null,Gr=new Map,fn=new Map,Kn=[],th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ml(n,s){switch(n){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":Gr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(s.pointerId)}}function Wt(n,s,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ca(s),s!==null&&Fs(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function nh(n,s,a,c,f){switch(s){case"focusin":return Ct=Wt(Ct,n,s,a,c,f),!0;case"dragenter":return kn=Wt(kn,n,s,a,c,f),!0;case"mouseover":return xn=Wt(xn,n,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return Gr.set(g,Wt(Gr.get(g)||null,n,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,fn.set(g,Wt(fn.get(g)||null,n,s,a,c,f)),!0}return!1}function bl(n){var s=Ji(n.target);if(s!==null){var a=An(s);if(a!==null){if(s=a.tag,s===13){if(s=$i(a),s!==null){n.blockedOn=s,Vl(n.priority,function(){Ol(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mr(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Us(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ui=c,a.target.dispatchEvent(c),Ui=null}else return s=Ca(a),s!==null&&Fs(s),n.blockedOn=a,!1;s.shift()}return!0}function Gi(n,s,a){mr(n)&&a.delete(s)}function Fl(){ha=!1,Ct!==null&&mr(Ct)&&(Ct=null),kn!==null&&mr(kn)&&(kn=null),xn!==null&&mr(xn)&&(xn=null),Gr.forEach(Gi),fn.forEach(Gi)}function Nn(n,s){n.blockedOn===s&&(n.blockedOn=null,ha||(ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fl)))}function Dn(n){function s(f){return Nn(f,n)}if(0<Wn.length){Nn(Wn[0],n);for(var a=1;a<Wn.length;a++){var c=Wn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Ct!==null&&Nn(Ct,n),kn!==null&&Nn(kn,n),xn!==null&&Nn(xn,n),Gr.forEach(s),fn.forEach(s),a=0;a<Kn.length;a++)c=Kn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Kn.length&&(a=Kn[0],a.blockedOn===null);)bl(a),a.blockedOn===null&&Kn.shift()}var gr=ae.ReactCurrentBatchConfig,Qr=!0;function Ye(n,s,a,c){var f=xe,g=gr.transition;gr.transition=null;try{xe=1,da(n,s,a,c)}finally{xe=f,gr.transition=g}}function rh(n,s,a,c){var f=xe,g=gr.transition;gr.transition=null;try{xe=4,da(n,s,a,c)}finally{xe=f,gr.transition=g}}function da(n,s,a,c){if(Qr){var f=Us(n,s,a,c);if(f===null)ph(n,s,c,Qi,a),Ml(n,c);else if(nh(f,n,s,a,c))c.stopPropagation();else if(Ml(n,c),s&4&&-1<th.indexOf(n)){for(;f!==null;){var g=Ca(f);if(g!==null&&Dl(g),g=Us(n,s,a,c),g===null&&ph(n,s,c,Qi,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else ph(n,s,c,null,a)}}var Qi=null;function Us(n,s,a,c){if(Qi=null,n=Ps(c),n=Ji(n),n!==null)if(s=An(n),s===null)n=null;else if(a=s.tag,a===13){if(n=$i(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Qi=n,null}function fa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case Hi:return 1;case Br:return 4;case dn:case ua:return 16;case Pl:return 536870912;default:return 16}default:return 16}}var sn=null,js=null,Kt=null;function pa(){if(Kt)return Kt;var n,s=js,a=s.length,c,f="value"in sn?sn.value:sn.textContent,g=f.length;for(n=0;n<a&&s[n]===f[n];n++);var v=a-n;for(c=1;c<=v&&s[a-c]===f[g-c];c++);return Kt=f.slice(n,1<c?1-c:void 0)}function zs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function ma(){return!1}function At(n){function s(a,c,f,g,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gn:ma,this.isPropagationStopped=ma,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var On={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bs=At(On),Qn=se({},On,{view:0,detail:0}),ih=At(Qn),$s,yr,Yr,Yi=se({},Qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Yr&&(Yr&&n.type==="mousemove"?($s=n.screenX-Yr.screenX,yr=n.screenY-Yr.screenY):yr=$s=0,Yr=n),$s)},movementY:function(n){return"movementY"in n?n.movementY:yr}}),Hs=At(Yi),ga=se({},Yi,{dataTransfer:0}),Ul=At(ga),qs=se({},Qn,{relatedTarget:0}),Ws=At(qs),jl=se({},On,{animationName:0,elapsedTime:0,pseudoElement:0}),_r=At(jl),zl=se({},On,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bl=At(zl),$l=se({},On,{data:0}),ya=At($l),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Hl[n])?!!s[n]:!1}function Yn(){return ql}var u=se({},Qn,{key:function(n){if(n.key){var s=Ks[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=zs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$t[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yn,charCode:function(n){return n.type==="keypress"?zs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=At(u),_=se({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=At(_),j=se({},Qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yn}),q=At(j),ne=se({},On,{propertyName:0,elapsedTime:0,pseudoElement:0}),Be=At(ne),ft=se({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=At(ft),Et=[9,13,27,32],lt=d&&"CompositionEvent"in window,pn=null;d&&"documentMode"in document&&(pn=document.documentMode);var on=d&&"TextEvent"in window&&!pn,Xi=d&&(!lt||pn&&8<pn&&11>=pn),Gs=" ",yp=!1;function _p(n,s){switch(n){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qs=!1;function tE(n,s){switch(n){case"compositionend":return vp(s);case"keypress":return s.which!==32?null:(yp=!0,Gs);case"textInput":return n=s.data,n===Gs&&yp?null:n;default:return null}}function nE(n,s){if(Qs)return n==="compositionend"||!lt&&_p(n,s)?(n=pa(),Kt=js=sn=null,Qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xi&&s.locale!=="ko"?null:s.data;default:return null}}var rE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rE[n.type]:s==="textarea"}function wp(n,s,a,c){qn(c),s=Yl(s,"onChange"),0<s.length&&(a=new Bs("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var _a=null,va=null;function iE(n){Up(n,0)}function Wl(n){var s=eo(n);if(Is(s))return n}function sE(n,s){if(n==="change")return s}var Tp=!1;if(d){var sh;if(d){var oh="oninput"in document;if(!oh){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),oh=typeof Ip.oninput=="function"}sh=oh}else sh=!1;Tp=sh&&(!document.documentMode||9<document.documentMode)}function Sp(){_a&&(_a.detachEvent("onpropertychange",Rp),va=_a=null)}function Rp(n){if(n.propertyName==="value"&&Wl(va)){var s=[];wp(s,va,n,Ps(n)),sa(iE,s)}}function oE(n,s,a){n==="focusin"?(Sp(),_a=s,va=a,_a.attachEvent("onpropertychange",Rp)):n==="focusout"&&Sp()}function aE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wl(va)}function lE(n,s){if(n==="click")return Wl(s)}function uE(n,s){if(n==="input"||n==="change")return Wl(s)}function cE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ln=typeof Object.is=="function"?Object.is:cE;function Ea(n,s){if(Ln(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(s,f)||!Ln(n[f],s[f]))return!1}return!0}function Cp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ap(n,s){var a=Cp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cp(a)}}function Pp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Pp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function kp(){for(var n=window,s=jr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=jr(n.document)}return s}function ah(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hE(n){var s=kp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Pp(a.ownerDocument.documentElement,a)){if(c!==null&&ah(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=Ap(a,g);var v=Ap(a,c);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dE=d&&"documentMode"in document&&11>=document.documentMode,Ys=null,lh=null,wa=null,uh=!1;function xp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;uh||Ys==null||Ys!==jr(c)||(c=Ys,"selectionStart"in c&&ah(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wa&&Ea(wa,c)||(wa=c,c=Yl(lh,"onSelect"),0<c.length&&(s=new Bs("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Ys)))}function Kl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Xs={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},ch={},Np={};d&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function Gl(n){if(ch[n])return ch[n];if(!Xs[n])return n;var s=Xs[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Np)return ch[n]=s[a];return n}var Dp=Gl("animationend"),Op=Gl("animationiteration"),Lp=Gl("animationstart"),Vp=Gl("transitionend"),Mp=new Map,bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,s){Mp.set(n,s),l(s,[n])}for(var hh=0;hh<bp.length;hh++){var dh=bp[hh],fE=dh.toLowerCase(),pE=dh[0].toUpperCase()+dh.slice(1);Xr(fE,"on"+pE)}Xr(Dp,"onAnimationEnd"),Xr(Op,"onAnimationIteration"),Xr(Lp,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(Vp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Fp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Sl(c,s,void 0,n),n.currentTarget=null}function Up(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var v=c.length-1;0<=v;v--){var R=c[v],k=R.instance,H=R.currentTarget;if(R=R.listener,k!==g&&f.isPropagationStopped())break e;Fp(f,R,H),g=k}else for(v=0;v<c.length;v++){if(R=c[v],k=R.instance,H=R.currentTarget,R=R.listener,k!==g&&f.isPropagationStopped())break e;Fp(f,R,H),g=k}}}if(Cn)throw n=oa,Cn=!1,oa=null,n}function Ge(n,s){var a=s[Eh];a===void 0&&(a=s[Eh]=new Set);var c=n+"__bubble";a.has(c)||(jp(s,n,2,!1),a.add(c))}function fh(n,s,a){var c=0;s&&(c|=4),jp(a,n,c,s)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ia(n){if(!n[Ql]){n[Ql]=!0,i.forEach(function(a){a!=="selectionchange"&&(mE.has(a)||fh(a,!1,n),fh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ql]||(s[Ql]=!0,fh("selectionchange",!1,s))}}function jp(n,s,a,c){switch(fa(s)){case 1:var f=Ye;break;case 4:f=rh;break;default:f=da}a=f.bind(null,s,a,n),f=void 0,!Ns||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function ph(n,s,a,c,f){var g=c;if(!(s&1)&&!(s&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;v=v.return}for(;R!==null;){if(v=Ji(R),v===null)return;if(k=v.tag,k===5||k===6){c=g=v;continue e}R=R.parentNode}}c=c.return}sa(function(){var H=g,X=Ps(a),Z=[];e:{var Y=Mp.get(n);if(Y!==void 0){var ie=Bs,ue=n;switch(n){case"keypress":if(zs(a)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":ue="focus",ie=Ws;break;case"focusout":ue="blur",ie=Ws;break;case"beforeblur":case"afterblur":ie=Ws;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=q;break;case Dp:case Op:case Lp:ie=_r;break;case Vp:ie=Be;break;case"scroll":ie=ih;break;case"wheel":ie=Le;break;case"copy":case"cut":case"paste":ie=Bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=w}var ce=(s&4)!==0,ot=!ce&&n==="scroll",z=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var O=H,$;O!==null;){$=O;var te=$.stateNode;if($.tag===5&&te!==null&&($=te,z!==null&&(te=st(O,z),te!=null&&ce.push(Sa(O,te,$)))),ot)break;O=O.return}0<ce.length&&(Y=new ie(Y,ue,null,a,X),Z.push({event:Y,listeners:ce}))}}if(!(s&7)){e:{if(Y=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",Y&&a!==Ui&&(ue=a.relatedTarget||a.fromElement)&&(Ji(ue)||ue[vr]))break e;if((ie||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,ie?(ue=a.relatedTarget||a.toElement,ie=H,ue=ue?Ji(ue):null,ue!==null&&(ot=An(ue),ue!==ot||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(ie=null,ue=H),ie!==ue)){if(ce=Hs,te="onMouseLeave",z="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ce=w,te="onPointerLeave",z="onPointerEnter",O="pointer"),ot=ie==null?Y:eo(ie),$=ue==null?Y:eo(ue),Y=new ce(te,O+"leave",ie,a,X),Y.target=ot,Y.relatedTarget=$,te=null,Ji(X)===H&&(ce=new ce(z,O+"enter",ue,a,X),ce.target=$,ce.relatedTarget=ot,te=ce),ot=te,ie&&ue)t:{for(ce=ie,z=ue,O=0,$=ce;$;$=Js($))O++;for($=0,te=z;te;te=Js(te))$++;for(;0<O-$;)ce=Js(ce),O--;for(;0<$-O;)z=Js(z),$--;for(;O--;){if(ce===z||z!==null&&ce===z.alternate)break t;ce=Js(ce),z=Js(z)}ce=null}else ce=null;ie!==null&&zp(Z,Y,ie,ce,!1),ue!==null&&ot!==null&&zp(Z,ot,ue,ce,!0)}}e:{if(Y=H?eo(H):window,ie=Y.nodeName&&Y.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Y.type==="file")var he=sE;else if(Ep(Y))if(Tp)he=uE;else{he=aE;var me=oE}else(ie=Y.nodeName)&&ie.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(he=lE);if(he&&(he=he(n,H))){wp(Z,he,a,X);break e}me&&me(n,Y,H),n==="focusout"&&(me=Y._wrapperState)&&me.controlled&&Y.type==="number"&&Rs(Y,"number",Y.value)}switch(me=H?eo(H):window,n){case"focusin":(Ep(me)||me.contentEditable==="true")&&(Ys=me,lh=H,wa=null);break;case"focusout":wa=lh=Ys=null;break;case"mousedown":uh=!0;break;case"contextmenu":case"mouseup":case"dragend":uh=!1,xp(Z,a,X);break;case"selectionchange":if(dE)break;case"keydown":case"keyup":xp(Z,a,X)}var ge;if(lt)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Qs?_p(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Xi&&a.locale!=="ko"&&(Qs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Qs&&(ge=pa()):(sn=X,js="value"in sn?sn.value:sn.textContent,Qs=!0)),me=Yl(H,we),0<me.length&&(we=new ya(we,n,null,a,X),Z.push({event:we,listeners:me}),ge?we.data=ge:(ge=vp(a),ge!==null&&(we.data=ge)))),(ge=on?tE(n,a):nE(n,a))&&(H=Yl(H,"onBeforeInput"),0<H.length&&(X=new ya("onBeforeInput","beforeinput",null,a,X),Z.push({event:X,listeners:H}),X.data=ge))}Up(Z,s)})}function Sa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Yl(n,s){for(var a=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=st(n,a),g!=null&&c.unshift(Sa(n,g,f)),g=st(n,s),g!=null&&c.push(Sa(n,g,f))),n=n.return}return c}function Js(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zp(n,s,a,c,f){for(var g=s._reactName,v=[];a!==null&&a!==c;){var R=a,k=R.alternate,H=R.stateNode;if(k!==null&&k===c)break;R.tag===5&&H!==null&&(R=H,f?(k=st(a,g),k!=null&&v.unshift(Sa(a,k,R))):f||(k=st(a,g),k!=null&&v.push(Sa(a,k,R)))),a=a.return}v.length!==0&&n.push({event:s,listeners:v})}var gE=/\r\n?/g,yE=/\u0000|\uFFFD/g;function Bp(n){return(typeof n=="string"?n:""+n).replace(gE,`
`).replace(yE,"")}function Xl(n,s,a){if(s=Bp(s),Bp(n)!==s&&a)throw Error(t(425))}function Jl(){}var mh=null,gh=null;function yh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,_E=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,vE=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(n){return $p.resolve(null).then(n).catch(EE)}:_h;function EE(n){setTimeout(function(){throw n})}function vh(n,s){var a=s,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Dn(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Dn(s)}function Jr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Hp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Zs,Ra="__reactProps$"+Zs,vr="__reactContainer$"+Zs,Eh="__reactEvents$"+Zs,wE="__reactListeners$"+Zs,TE="__reactHandles$"+Zs;function Ji(n){var s=n[Xn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[vr]||a[Xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Hp(n);n!==null;){if(a=n[Xn])return a;n=Hp(n)}return s}n=a,a=n.parentNode}return null}function Ca(n){return n=n[Xn]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zl(n){return n[Ra]||null}var wh=[],to=-1;function Zr(n){return{current:n}}function Qe(n){0>to||(n.current=wh[to],wh[to]=null,to--)}function Ke(n,s){to++,wh[to]=n.current,n.current=s}var ei={},Lt=Zr(ei),Gt=Zr(!1),Zi=ei;function no(n,s){var a=n.type.contextTypes;if(!a)return ei;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Qt(n){return n=n.childContextTypes,n!=null}function eu(){Qe(Gt),Qe(Lt)}function qp(n,s,a){if(Lt.current!==ei)throw Error(t(168));Ke(Lt,s),Ke(Gt,a)}function Wp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in s))throw Error(t(108,Ue(n)||"Unknown",f));return se({},a,c)}function tu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ei,Zi=Lt.current,Ke(Lt,n),Ke(Gt,Gt.current),!0}function Kp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Wp(n,s,Zi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Gt),Qe(Lt),Ke(Lt,n)):Qe(Gt),Ke(Gt,a)}var Er=null,nu=!1,Th=!1;function Gp(n){Er===null?Er=[n]:Er.push(n)}function IE(n){nu=!0,Gp(n)}function ti(){if(!Th&&Er!==null){Th=!0;var n=0,s=xe;try{var a=Er;for(xe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Er=null,nu=!1}catch(f){throw Er!==null&&(Er=Er.slice(n+1)),Vs(Hi,ti),f}finally{xe=s,Th=!1}}return null}var ro=[],io=0,ru=null,iu=0,mn=[],gn=0,es=null,wr=1,Tr="";function ts(n,s){ro[io++]=iu,ro[io++]=ru,ru=n,iu=s}function Qp(n,s,a){mn[gn++]=wr,mn[gn++]=Tr,mn[gn++]=es,es=n;var c=wr;n=Tr;var f=32-Bt(c)-1;c&=~(1<<f),a+=1;var g=32-Bt(s)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,wr=1<<32-Bt(s)+f|a<<f|c,Tr=g+n}else wr=1<<g|a<<f|c,Tr=n}function Ih(n){n.return!==null&&(ts(n,1),Qp(n,1,0))}function Sh(n){for(;n===ru;)ru=ro[--io],ro[io]=null,iu=ro[--io],ro[io]=null;for(;n===es;)es=mn[--gn],mn[gn]=null,Tr=mn[--gn],mn[gn]=null,wr=mn[--gn],mn[gn]=null}var an=null,ln=null,Xe=!1,Vn=null;function Yp(n,s){var a=En(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Xp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,an=n,ln=Jr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,an=n,ln=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=es!==null?{id:wr,overflow:Tr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=En(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,an=n,ln=null,!0):!1;default:return!1}}function Rh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ch(n){if(Xe){var s=ln;if(s){var a=s;if(!Xp(n,s)){if(Rh(n))throw Error(t(418));s=Jr(a.nextSibling);var c=an;s&&Xp(n,s)?Yp(c,a):(n.flags=n.flags&-4097|2,Xe=!1,an=n)}}else{if(Rh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Xe=!1,an=n}}}function Jp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function su(n){if(n!==an)return!1;if(!Xe)return Jp(n),Xe=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!yh(n.type,n.memoizedProps)),s&&(s=ln)){if(Rh(n))throw Zp(),Error(t(418));for(;s;)Yp(n,s),s=Jr(s.nextSibling)}if(Jp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){ln=Jr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}ln=null}}else ln=an?Jr(n.stateNode.nextSibling):null;return!0}function Zp(){for(var n=ln;n;)n=Jr(n.nextSibling)}function so(){ln=an=null,Xe=!1}function Ah(n){Vn===null?Vn=[n]:Vn.push(n)}var SE=ae.ReactCurrentBatchConfig;function Aa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(v){var R=f.refs;v===null?delete R[g]:R[g]=v},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function ou(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function em(n){var s=n._init;return s(n._payload)}function tm(n){function s(z,O){if(n){var $=z.deletions;$===null?(z.deletions=[O],z.flags|=16):$.push(O)}}function a(z,O){if(!n)return null;for(;O!==null;)s(z,O),O=O.sibling;return null}function c(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function f(z,O){return z=ui(z,O),z.index=0,z.sibling=null,z}function g(z,O,$){return z.index=$,n?($=z.alternate,$!==null?($=$.index,$<O?(z.flags|=2,O):$):(z.flags|=2,O)):(z.flags|=1048576,O)}function v(z){return n&&z.alternate===null&&(z.flags|=2),z}function R(z,O,$,te){return O===null||O.tag!==6?(O=_d($,z.mode,te),O.return=z,O):(O=f(O,$),O.return=z,O)}function k(z,O,$,te){var he=$.type;return he===D?X(z,O,$.props.children,te,$.key):O!==null&&(O.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===He&&em(he)===O.type)?(te=f(O,$.props),te.ref=Aa(z,O,$),te.return=z,te):(te=xu($.type,$.key,$.props,null,z.mode,te),te.ref=Aa(z,O,$),te.return=z,te)}function H(z,O,$,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=vd($,z.mode,te),O.return=z,O):(O=f(O,$.children||[]),O.return=z,O)}function X(z,O,$,te,he){return O===null||O.tag!==7?(O=us($,z.mode,te,he),O.return=z,O):(O=f(O,$),O.return=z,O)}function Z(z,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return O=_d(""+O,z.mode,$),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ee:return $=xu(O.type,O.key,O.props,null,z.mode,$),$.ref=Aa(z,null,O),$.return=z,$;case Te:return O=vd(O,z.mode,$),O.return=z,O;case He:var te=O._init;return Z(z,te(O._payload),$)}if(cr(O)||pe(O))return O=us(O,z.mode,$,null),O.return=z,O;ou(z,O)}return null}function Y(z,O,$,te){var he=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return he!==null?null:R(z,O,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Ee:return $.key===he?k(z,O,$,te):null;case Te:return $.key===he?H(z,O,$,te):null;case He:return he=$._init,Y(z,O,he($._payload),te)}if(cr($)||pe($))return he!==null?null:X(z,O,$,te,null);ou(z,$)}return null}function ie(z,O,$,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return z=z.get($)||null,R(O,z,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Ee:return z=z.get(te.key===null?$:te.key)||null,k(O,z,te,he);case Te:return z=z.get(te.key===null?$:te.key)||null,H(O,z,te,he);case He:var me=te._init;return ie(z,O,$,me(te._payload),he)}if(cr(te)||pe(te))return z=z.get($)||null,X(O,z,te,he,null);ou(O,te)}return null}function ue(z,O,$,te){for(var he=null,me=null,ge=O,we=O=0,It=null;ge!==null&&we<$.length;we++){ge.index>we?(It=ge,ge=null):It=ge.sibling;var be=Y(z,ge,$[we],te);if(be===null){ge===null&&(ge=It);break}n&&ge&&be.alternate===null&&s(z,ge),O=g(be,O,we),me===null?he=be:me.sibling=be,me=be,ge=It}if(we===$.length)return a(z,ge),Xe&&ts(z,we),he;if(ge===null){for(;we<$.length;we++)ge=Z(z,$[we],te),ge!==null&&(O=g(ge,O,we),me===null?he=ge:me.sibling=ge,me=ge);return Xe&&ts(z,we),he}for(ge=c(z,ge);we<$.length;we++)It=ie(ge,z,we,$[we],te),It!==null&&(n&&It.alternate!==null&&ge.delete(It.key===null?we:It.key),O=g(It,O,we),me===null?he=It:me.sibling=It,me=It);return n&&ge.forEach(function(ci){return s(z,ci)}),Xe&&ts(z,we),he}function ce(z,O,$,te){var he=pe($);if(typeof he!="function")throw Error(t(150));if($=he.call($),$==null)throw Error(t(151));for(var me=he=null,ge=O,we=O=0,It=null,be=$.next();ge!==null&&!be.done;we++,be=$.next()){ge.index>we?(It=ge,ge=null):It=ge.sibling;var ci=Y(z,ge,be.value,te);if(ci===null){ge===null&&(ge=It);break}n&&ge&&ci.alternate===null&&s(z,ge),O=g(ci,O,we),me===null?he=ci:me.sibling=ci,me=ci,ge=It}if(be.done)return a(z,ge),Xe&&ts(z,we),he;if(ge===null){for(;!be.done;we++,be=$.next())be=Z(z,be.value,te),be!==null&&(O=g(be,O,we),me===null?he=be:me.sibling=be,me=be);return Xe&&ts(z,we),he}for(ge=c(z,ge);!be.done;we++,be=$.next())be=ie(ge,z,we,be.value,te),be!==null&&(n&&be.alternate!==null&&ge.delete(be.key===null?we:be.key),O=g(be,O,we),me===null?he=be:me.sibling=be,me=be);return n&&ge.forEach(function(rw){return s(z,rw)}),Xe&&ts(z,we),he}function ot(z,O,$,te){if(typeof $=="object"&&$!==null&&$.type===D&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Ee:e:{for(var he=$.key,me=O;me!==null;){if(me.key===he){if(he=$.type,he===D){if(me.tag===7){a(z,me.sibling),O=f(me,$.props.children),O.return=z,z=O;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===He&&em(he)===me.type){a(z,me.sibling),O=f(me,$.props),O.ref=Aa(z,me,$),O.return=z,z=O;break e}a(z,me);break}else s(z,me);me=me.sibling}$.type===D?(O=us($.props.children,z.mode,te,$.key),O.return=z,z=O):(te=xu($.type,$.key,$.props,null,z.mode,te),te.ref=Aa(z,O,$),te.return=z,z=te)}return v(z);case Te:e:{for(me=$.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){a(z,O.sibling),O=f(O,$.children||[]),O.return=z,z=O;break e}else{a(z,O);break}else s(z,O);O=O.sibling}O=vd($,z.mode,te),O.return=z,z=O}return v(z);case He:return me=$._init,ot(z,O,me($._payload),te)}if(cr($))return ue(z,O,$,te);if(pe($))return ce(z,O,$,te);ou(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,O!==null&&O.tag===6?(a(z,O.sibling),O=f(O,$),O.return=z,z=O):(a(z,O),O=_d($,z.mode,te),O.return=z,z=O),v(z)):a(z,O)}return ot}var oo=tm(!0),nm=tm(!1),au=Zr(null),lu=null,ao=null,Ph=null;function kh(){Ph=ao=lu=null}function xh(n){var s=au.current;Qe(au),n._currentValue=s}function Nh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function lo(n,s){lu=n,Ph=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Yt=!0),n.firstContext=null)}function yn(n){var s=n._currentValue;if(Ph!==n)if(n={context:n,memoizedValue:s,next:null},ao===null){if(lu===null)throw Error(t(308));ao=n,lu.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return s}var ns=null;function Dh(n){ns===null?ns=[n]:ns.push(n)}function rm(n,s,a,c){var f=s.interleaved;return f===null?(a.next=a,Dh(s)):(a.next=f.next,f.next=a),s.interleaved=a,Ir(n,c)}function Ir(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ni=!1;function Oh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Sr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ri(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Me&2){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,Ir(n,a)}return f=c.interleaved,f===null?(s.next=s,Dh(c)):(s.next=f.next,f.next=s),c.interleaved=s,Ir(n,a)}function uu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}function sm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function cu(n,s,a,c){var f=n.updateQueue;ni=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var k=R,H=k.next;k.next=null,v===null?g=H:v.next=H,v=k;var X=n.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==v&&(R===null?X.firstBaseUpdate=H:R.next=H,X.lastBaseUpdate=k))}if(g!==null){var Z=f.baseState;v=0,X=H=k=null,R=g;do{var Y=R.lane,ie=R.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ue=n,ce=R;switch(Y=s,ie=a,ce.tag){case 1:if(ue=ce.payload,typeof ue=="function"){Z=ue.call(ie,Z,Y);break e}Z=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=ce.payload,Y=typeof ue=="function"?ue.call(ie,Z,Y):ue,Y==null)break e;Z=se({},Z,Y);break e;case 2:ni=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[R]:Y.push(R))}else ie={eventTime:ie,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(H=X=ie,k=Z):X=X.next=ie,v|=Y;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(k=Z),f.baseState=k,f.firstBaseUpdate=H,f.lastBaseUpdate=X,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ss|=v,n.lanes=v,n.memoizedState=Z}}function om(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var Pa={},Jn=Zr(Pa),ka=Zr(Pa),xa=Zr(Pa);function rs(n){if(n===Pa)throw Error(t(174));return n}function Lh(n,s){switch(Ke(xa,s),Ke(ka,n),Ke(Jn,Pa),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:dt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=dt(s,n)}Qe(Jn),Ke(Jn,s)}function uo(){Qe(Jn),Qe(ka),Qe(xa)}function am(n){rs(xa.current);var s=rs(Jn.current),a=dt(s,n.type);s!==a&&(Ke(ka,n),Ke(Jn,a))}function Vh(n){ka.current===n&&(Qe(Jn),Qe(ka))}var tt=Zr(0);function hu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Mh=[];function bh(){for(var n=0;n<Mh.length;n++)Mh[n]._workInProgressVersionPrimary=null;Mh.length=0}var du=ae.ReactCurrentDispatcher,Fh=ae.ReactCurrentBatchConfig,is=0,nt=null,pt=null,wt=null,fu=!1,Na=!1,Da=0,RE=0;function Vt(){throw Error(t(321))}function Uh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Ln(n[a],s[a]))return!1;return!0}function jh(n,s,a,c,f,g){if(is=g,nt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,du.current=n===null||n.memoizedState===null?kE:xE,n=a(c,f),Na){g=0;do{if(Na=!1,Da=0,25<=g)throw Error(t(301));g+=1,wt=pt=null,s.updateQueue=null,du.current=NE,n=a(c,f)}while(Na)}if(du.current=gu,s=pt!==null&&pt.next!==null,is=0,wt=pt=nt=null,fu=!1,s)throw Error(t(300));return n}function zh(){var n=Da!==0;return Da=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?nt.memoizedState=wt=n:wt=wt.next=n,wt}function _n(){if(pt===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var s=wt===null?nt.memoizedState:wt.next;if(s!==null)wt=s,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?nt.memoizedState=wt=n:wt=wt.next=n}return wt}function Oa(n,s){return typeof s=="function"?s(n):s}function Bh(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=pt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var R=v=null,k=null,H=g;do{var X=H.lane;if((is&X)===X)k!==null&&(k=k.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:n(c,H.action);else{var Z={lane:X,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};k===null?(R=k=Z,v=c):k=k.next=Z,nt.lanes|=X,ss|=X}H=H.next}while(H!==null&&H!==g);k===null?v=c:k.next=R,Ln(c,s.memoizedState)||(Yt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,nt.lanes|=g,ss|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function $h(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Ln(g,s.memoizedState)||(Yt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function lm(){}function um(n,s){var a=nt,c=_n(),f=s(),g=!Ln(c.memoizedState,f);if(g&&(c.memoizedState=f,Yt=!0),c=c.queue,Hh(dm.bind(null,a,c,n),[n]),c.getSnapshot!==s||g||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,La(9,hm.bind(null,a,c,f,s),void 0,null),Tt===null)throw Error(t(349));is&30||cm(a,s,f)}return f}function cm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function hm(n,s,a,c){s.value=a,s.getSnapshot=c,fm(s)&&pm(n)}function dm(n,s,a){return a(function(){fm(s)&&pm(n)})}function fm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Ln(n,a)}catch{return!0}}function pm(n){var s=Ir(n,1);s!==null&&Un(s,n,1,-1)}function mm(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},s.queue=n,n=n.dispatch=PE.bind(null,nt,n),[s.memoizedState,n]}function La(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=nt.updateQueue,s===null?(s={lastEffect:null,stores:null},nt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function gm(){return _n().memoizedState}function pu(n,s,a,c){var f=Zn();nt.flags|=n,f.memoizedState=La(1|s,a,void 0,c===void 0?null:c)}function mu(n,s,a,c){var f=_n();c=c===void 0?null:c;var g=void 0;if(pt!==null){var v=pt.memoizedState;if(g=v.destroy,c!==null&&Uh(c,v.deps)){f.memoizedState=La(s,a,g,c);return}}nt.flags|=n,f.memoizedState=La(1|s,a,g,c)}function ym(n,s){return pu(8390656,8,n,s)}function Hh(n,s){return mu(2048,8,n,s)}function _m(n,s){return mu(4,2,n,s)}function vm(n,s){return mu(4,4,n,s)}function Em(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function wm(n,s,a){return a=a!=null?a.concat([n]):null,mu(4,4,Em.bind(null,s,n),a)}function qh(){}function Tm(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Uh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Im(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Uh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Sm(n,s,a){return is&21?(Ln(a,s)||(a=Ki(),nt.lanes|=a,ss|=a,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a)}function CE(n,s){var a=xe;xe=a!==0&&4>a?a:4,n(!0);var c=Fh.transition;Fh.transition={};try{n(!1),s()}finally{xe=a,Fh.transition=c}}function Rm(){return _n().memoizedState}function AE(n,s,a){var c=ai(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Cm(n))Am(s,a);else if(a=rm(n,s,a,c),a!==null){var f=qt();Un(a,n,c,f),Pm(a,s,c)}}function PE(n,s,a){var c=ai(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cm(n))Am(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,R=g(v,a);if(f.hasEagerState=!0,f.eagerState=R,Ln(R,v)){var k=s.interleaved;k===null?(f.next=f,Dh(s)):(f.next=k.next,k.next=f),s.interleaved=f;return}}catch{}finally{}a=rm(n,s,f,c),a!==null&&(f=qt(),Un(a,n,c,f),Pm(a,s,c))}}function Cm(n){var s=n.alternate;return n===nt||s!==null&&s===nt}function Am(n,s){Na=fu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Pm(n,s,a){if(a&4194240){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Wr(n,a)}}var gu={readContext:yn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},kE={readContext:yn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:yn,useEffect:ym,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,pu(4194308,4,Em.bind(null,s,n),a)},useLayoutEffect:function(n,s){return pu(4194308,4,n,s)},useInsertionEffect:function(n,s){return pu(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Zn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=AE.bind(null,nt,n),[c.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:mm,useDebugValue:qh,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=mm(!1),s=n[0];return n=CE.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=nt,f=Zn();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Tt===null)throw Error(t(349));is&30||cm(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,ym(dm.bind(null,c,g,n),[n]),c.flags|=2048,La(9,hm.bind(null,c,g,a,s),void 0,null),a},useId:function(){var n=Zn(),s=Tt.identifierPrefix;if(Xe){var a=Tr,c=wr;a=(c&~(1<<32-Bt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Da++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=RE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},xE={readContext:yn,useCallback:Tm,useContext:yn,useEffect:Hh,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Im,useReducer:Bh,useRef:gm,useState:function(){return Bh(Oa)},useDebugValue:qh,useDeferredValue:function(n){var s=_n();return Sm(s,pt.memoizedState,n)},useTransition:function(){var n=Bh(Oa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:Rm,unstable_isNewReconciler:!1},NE={readContext:yn,useCallback:Tm,useContext:yn,useEffect:Hh,useImperativeHandle:wm,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Im,useReducer:$h,useRef:gm,useState:function(){return $h(Oa)},useDebugValue:qh,useDeferredValue:function(n){var s=_n();return pt===null?s.memoizedState=n:Sm(s,pt.memoizedState,n)},useTransition:function(){var n=$h(Oa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:lm,useSyncExternalStore:um,useId:Rm,unstable_isNewReconciler:!1};function Mn(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Wh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:se({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var yu={isMounted:function(n){return(n=n._reactInternals)?An(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=qt(),f=ai(n),g=Sr(c,f);g.payload=s,a!=null&&(g.callback=a),s=ri(n,g,f),s!==null&&(Un(s,n,f,c),uu(s,n,f))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=qt(),f=ai(n),g=Sr(c,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ri(n,g,f),s!==null&&(Un(s,n,f,c),uu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qt(),c=ai(n),f=Sr(a,c);f.tag=2,s!=null&&(f.callback=s),s=ri(n,f,c),s!==null&&(Un(s,n,c,a),uu(s,n,c))}};function km(n,s,a,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):s.prototype&&s.prototype.isPureReactComponent?!Ea(a,c)||!Ea(f,g):!0}function xm(n,s,a){var c=!1,f=ei,g=s.contextType;return typeof g=="object"&&g!==null?g=yn(g):(f=Qt(s)?Zi:Lt.current,c=s.contextTypes,g=(c=c!=null)?no(n,f):ei),s=new s(a,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Nm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&yu.enqueueReplaceState(s,s.state,null)}function Kh(n,s,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Oh(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=yn(g):(g=Qt(s)?Zi:Lt.current,f.context=no(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Wh(n,s,g,a),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&yu.enqueueReplaceState(f,f.state,null),cu(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,s){try{var a="",c=s;do a+=Ce(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Gh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Qh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var DE=typeof WeakMap=="function"?WeakMap:Map;function Dm(n,s,a){a=Sr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Su||(Su=!0,cd=c),Qh(n,s)},a}function Om(n,s,a){a=Sr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=s.value;a.payload=function(){return c(f)},a.callback=function(){Qh(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Qh(n,s),typeof c!="function"&&(si===null?si=new Set([this]):si.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Lm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new DE;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(f.add(a),n=WE.bind(null,n,s,a),s.then(n,n))}function Vm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Mm(n,s,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Sr(-1,1),s.tag=2,ri(a,s,1))),a.lanes|=1),n)}var OE=ae.ReactCurrentOwner,Yt=!1;function Ht(n,s,a,c){s.child=n===null?nm(s,null,a,c):oo(s,n.child,a,c)}function bm(n,s,a,c,f){a=a.render;var g=s.ref;return lo(s,f),c=jh(n,s,a,c,g,f),a=zh(),n!==null&&!Yt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Rr(n,s,f)):(Xe&&a&&Ih(s),s.flags|=1,Ht(n,s,c,f),s.child)}function Fm(n,s,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!yd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Um(n,s,g,c,f)):(n=xu(a.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!(n.lanes&f)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(v,c)&&n.ref===s.ref)return Rr(n,s,f)}return s.flags|=1,n=ui(g,c),n.ref=s.ref,n.return=s,s.child=n}function Um(n,s,a,c,f){if(n!==null){var g=n.memoizedProps;if(Ea(g,c)&&n.ref===s.ref)if(Yt=!1,s.pendingProps=c=g,(n.lanes&f)!==0)n.flags&131072&&(Yt=!0);else return s.lanes=n.lanes,Rr(n,s,f)}return Yh(n,s,a,c,f)}function jm(n,s,a){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(fo,un),un|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ke(fo,un),un|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,Ke(fo,un),un|=c}else g!==null?(c=g.baseLanes|a,s.memoizedState=null):c=a,Ke(fo,un),un|=c;return Ht(n,s,f,a),s.child}function zm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Yh(n,s,a,c,f){var g=Qt(a)?Zi:Lt.current;return g=no(s,g),lo(s,f),a=jh(n,s,a,c,g,f),c=zh(),n!==null&&!Yt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Rr(n,s,f)):(Xe&&c&&Ih(s),s.flags|=1,Ht(n,s,a,f),s.child)}function Bm(n,s,a,c,f){if(Qt(a)){var g=!0;tu(s)}else g=!1;if(lo(s,f),s.stateNode===null)vu(n,s),xm(s,a,c),Kh(s,a,c,f),c=!0;else if(n===null){var v=s.stateNode,R=s.memoizedProps;v.props=R;var k=v.context,H=a.contextType;typeof H=="object"&&H!==null?H=yn(H):(H=Qt(a)?Zi:Lt.current,H=no(s,H));var X=a.getDerivedStateFromProps,Z=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==c||k!==H)&&Nm(s,v,c,H),ni=!1;var Y=s.memoizedState;v.state=Y,cu(s,c,v,f),k=s.memoizedState,R!==c||Y!==k||Gt.current||ni?(typeof X=="function"&&(Wh(s,a,X,c),k=s.memoizedState),(R=ni||km(s,a,R,c,Y,k,H))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=k),v.props=c,v.state=k,v.context=H,c=R):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,im(n,s),R=s.memoizedProps,H=s.type===s.elementType?R:Mn(s.type,R),v.props=H,Z=s.pendingProps,Y=v.context,k=a.contextType,typeof k=="object"&&k!==null?k=yn(k):(k=Qt(a)?Zi:Lt.current,k=no(s,k));var ie=a.getDerivedStateFromProps;(X=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==Z||Y!==k)&&Nm(s,v,c,k),ni=!1,Y=s.memoizedState,v.state=Y,cu(s,c,v,f);var ue=s.memoizedState;R!==Z||Y!==ue||Gt.current||ni?(typeof ie=="function"&&(Wh(s,a,ie,c),ue=s.memoizedState),(H=ni||km(s,a,H,c,Y,ue,k)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ue,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ue,k)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ue),v.props=c,v.state=ue,v.context=k,c=H):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),c=!1)}return Xh(n,s,a,c,g,f)}function Xh(n,s,a,c,f,g){zm(n,s);var v=(s.flags&128)!==0;if(!c&&!v)return f&&Kp(s,a,!1),Rr(n,s,g);c=s.stateNode,OE.current=s;var R=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&v?(s.child=oo(s,n.child,null,g),s.child=oo(s,null,R,g)):Ht(n,s,R,g),s.memoizedState=c.state,f&&Kp(s,a,!0),s.child}function $m(n){var s=n.stateNode;s.pendingContext?qp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&qp(n,s.context,!1),Lh(n,s.containerInfo)}function Hm(n,s,a,c,f){return so(),Ah(f),s.flags|=256,Ht(n,s,a,c),s.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function Zh(n){return{baseLanes:n,cachePool:null,transitions:null}}function qm(n,s,a){var c=s.pendingProps,f=tt.current,g=!1,v=(s.flags&128)!==0,R;if((R=v)||(R=n!==null&&n.memoizedState===null?!1:(f&2)!==0),R?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ke(tt,f&1),n===null)return Ch(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(v=c.children,n=c.fallback,g?(c=s.mode,g=s.child,v={mode:"hidden",children:v},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=v):g=Nu(v,c,0,null),n=us(n,c,a,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=Zh(a),s.memoizedState=Jh,n):ed(s,v));if(f=n.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return LE(n,s,v,c,R,f,a);if(g){g=c.fallback,v=s.mode,f=n.child,R=f.sibling;var k={mode:"hidden",children:c.children};return!(v&1)&&s.child!==f?(c=s.child,c.childLanes=0,c.pendingProps=k,s.deletions=null):(c=ui(f,k),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=ui(R,g):(g=us(g,v,a,null),g.flags|=2),g.return=s,c.return=s,c.sibling=g,s.child=c,c=g,g=s.child,v=n.child.memoizedState,v=v===null?Zh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,s.memoizedState=Jh,c}return g=n.child,n=g.sibling,c=ui(g,{mode:"visible",children:c.children}),!(s.mode&1)&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function ed(n,s){return s=Nu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function _u(n,s,a,c){return c!==null&&Ah(c),oo(s,n.child,null,a),n=ed(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function LE(n,s,a,c,f,g,v){if(a)return s.flags&256?(s.flags&=-257,c=Gh(Error(t(422))),_u(n,s,v,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=c.fallback,f=s.mode,c=Nu({mode:"visible",children:c.children},f,0,null),g=us(g,f,v,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,s.mode&1&&oo(s,n.child,null,v),s.child.memoizedState=Zh(v),s.memoizedState=Jh,g);if(!(s.mode&1))return _u(n,s,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=Gh(g,c,void 0),_u(n,s,v,c)}if(R=(v&n.childLanes)!==0,Yt||R){if(c=Tt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|v)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ir(n,f),Un(c,n,f,-1))}return gd(),c=Gh(Error(t(421))),_u(n,s,v,c)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=KE.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,ln=Jr(f.nextSibling),an=s,Xe=!0,Vn=null,n!==null&&(mn[gn++]=wr,mn[gn++]=Tr,mn[gn++]=es,wr=n.id,Tr=n.overflow,es=s),s=ed(s,c.children),s.flags|=4096,s)}function Wm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Nh(n.return,s,a)}function td(n,s,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function Km(n,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(Ht(n,s,c.children,a),c=tt.current,c&2)c=c&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wm(n,a,s);else if(n.tag===19)Wm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ke(tt,c),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&hu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),td(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&hu(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}td(s,!0,a,null,g);break;case"together":td(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vu(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Rr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ss|=s.lanes,!(a&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ui(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ui(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function VE(n,s,a){switch(s.tag){case 3:$m(s),so();break;case 5:am(s);break;case 1:Qt(s.type)&&tu(s);break;case 4:Lh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,f=s.memoizedProps.value;Ke(au,c._currentValue),c._currentValue=f;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ke(tt,tt.current&1),s.flags|=128,null):a&s.child.childLanes?qm(n,s,a):(Ke(tt,tt.current&1),n=Rr(n,s,a),n!==null?n.sibling:null);Ke(tt,tt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,n.flags&128){if(c)return Km(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ke(tt,tt.current),c)break;return null;case 22:case 23:return s.lanes=0,jm(n,s,a)}return Rr(n,s,a)}var Gm,nd,Qm,Ym;Gm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},nd=function(){},Qm=function(n,s,a,c){var f=n.memoizedProps;if(f!==c){n=s.stateNode,rs(Jn.current);var g=null;switch(a){case"input":f=Mi(n,f),c=Mi(n,c),g=[];break;case"select":f=se({},f,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":f=Qo(n,f),c=Qo(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Jl)}ta(a,c);var v;a=null;for(H in f)if(!c.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var R=f[H];for(v in R)R.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?g||(g=[]):(g=g||[]).push(H,null));for(H in c){var k=c[H];if(R=f!=null?f[H]:void 0,c.hasOwnProperty(H)&&k!==R&&(k!=null||R!=null))if(H==="style")if(R){for(v in R)!R.hasOwnProperty(v)||k&&k.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in k)k.hasOwnProperty(v)&&R[v]!==k[v]&&(a||(a={}),a[v]=k[v])}else a||(g||(g=[]),g.push(H,a)),a=k;else H==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,R=R?R.__html:void 0,k!=null&&R!==k&&(g=g||[]).push(H,k)):H==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(H,""+k):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(k!=null&&H==="onScroll"&&Ge("scroll",n),g||R===k||(g=[])):(g=g||[]).push(H,k))}a&&(g=g||[]).push("style",a);var H=g;(s.updateQueue=H)&&(s.flags|=4)}},Ym=function(n,s,a,c){a!==c&&(s.flags|=4)};function Va(n,s){if(!Xe)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function ME(n,s,a){var c=s.pendingProps;switch(Sh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Qt(s.type)&&eu(),Mt(s),null;case 3:return c=s.stateNode,uo(),Qe(Gt),Qe(Lt),bh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(su(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Vn!==null&&(fd(Vn),Vn=null))),nd(n,s),Mt(s),null;case 5:Vh(s);var f=rs(xa.current);if(a=s.type,n!==null&&s.stateNode!=null)Qm(n,s,a,c,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(n=rs(Jn.current),su(s)){c=s.stateNode,a=s.type;var g=s.memoizedProps;switch(c[Xn]=s,c[Ra]=g,n=(s.mode&1)!==0,a){case"dialog":Ge("cancel",c),Ge("close",c);break;case"iframe":case"object":case"embed":Ge("load",c);break;case"video":case"audio":for(f=0;f<Ta.length;f++)Ge(Ta[f],c);break;case"source":Ge("error",c);break;case"img":case"image":case"link":Ge("error",c),Ge("load",c);break;case"details":Ge("toggle",c);break;case"input":Ss(c,g),Ge("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ge("invalid",c);break;case"textarea":Cs(c,g),Ge("invalid",c)}ta(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var R=g[v];v==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&Xl(c.textContent,R,n),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Xl(c.textContent,R,n),f=["children",""+R]):o.hasOwnProperty(v)&&R!=null&&v==="onScroll"&&Ge("scroll",c)}switch(a){case"input":ur(c),Il(c,g,!0);break;case"textarea":ur(c),Yo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Jl)}c=f,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Xn]=s,n[Ra]=c,Gm(n,s,!1,!1),s.stateNode=n;e:{switch(v=na(a,c),a){case"dialog":Ge("cancel",n),Ge("close",n),f=c;break;case"iframe":case"object":case"embed":Ge("load",n),f=c;break;case"video":case"audio":for(f=0;f<Ta.length;f++)Ge(Ta[f],n);f=c;break;case"source":Ge("error",n),f=c;break;case"img":case"image":case"link":Ge("error",n),Ge("load",n),f=c;break;case"details":Ge("toggle",n),f=c;break;case"input":Ss(n,c),f=Mi(n,c),Ge("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=se({},c,{value:void 0}),Ge("invalid",n);break;case"textarea":Cs(n,c),f=Qo(n,c),Ge("invalid",n);break;default:f=c}ta(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var k=R[g];g==="style"?Zo(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xo(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&zr(n,k):typeof k=="number"&&zr(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&Ge("scroll",n):k!=null&&ee(n,g,k,v))}switch(a){case"input":ur(n),Il(n,c,!1);break;case"textarea":ur(n),Yo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+je(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?hr(n,!!c.multiple,g,!1):c.defaultValue!=null&&hr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(n&&s.stateNode!=null)Ym(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=rs(xa.current),rs(Jn.current),su(s)){if(c=s.stateNode,a=s.memoizedProps,c[Xn]=s,(g=c.nodeValue!==a)&&(n=an,n!==null))switch(n.tag){case 3:Xl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xl(c.nodeValue,a,(n.mode&1)!==0)}g&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Xn]=s,s.stateNode=c}return Mt(s),null;case 13:if(Qe(tt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&ln!==null&&s.mode&1&&!(s.flags&128))Zp(),so(),s.flags|=98560,g=!1;else if(g=su(s),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Xn]=s}else so(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Mt(s),g=!1}else Vn!==null&&(fd(Vn),Vn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,s.mode&1&&(n===null||tt.current&1?mt===0&&(mt=3):gd())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return uo(),nd(n,s),n===null&&Ia(s.stateNode.containerInfo),Mt(s),null;case 10:return xh(s.type._context),Mt(s),null;case 17:return Qt(s.type)&&eu(),Mt(s),null;case 19:if(Qe(tt),g=s.memoizedState,g===null)return Mt(s),null;if(c=(s.flags&128)!==0,v=g.rendering,v===null)if(c)Va(g,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(v=hu(n),v!==null){for(s.flags|=128,Va(g,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ke(tt,tt.current&1|2),s.child}n=n.sibling}g.tail!==null&&We()>po&&(s.flags|=128,c=!0,Va(g,!1),s.lanes=4194304)}else{if(!c)if(n=hu(v),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Xe)return Mt(s),null}else 2*We()-g.renderingStartTime>po&&a!==1073741824&&(s.flags|=128,c=!0,Va(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(a=g.last,a!==null?a.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=We(),s.sibling=null,a=tt.current,Ke(tt,c?a&1|2:a&1),s):(Mt(s),null);case 22:case 23:return md(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&s.mode&1?un&1073741824&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function bE(n,s){switch(Sh(s),s.tag){case 1:return Qt(s.type)&&eu(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return uo(),Qe(Gt),Qe(Lt),bh(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Vh(s),null;case 13:if(Qe(tt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));so()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Qe(tt),null;case 4:return uo(),null;case 10:return xh(s.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var Eu=!1,bt=!1,FE=typeof WeakSet=="function"?WeakSet:Set,le=null;function ho(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){it(n,s,c)}else a.current=null}function rd(n,s,a){try{a()}catch(c){it(n,s,c)}}var Xm=!1;function UE(n,s){if(mh=Qr,n=kp(),ah(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,R=-1,k=-1,H=0,X=0,Z=n,Y=null;t:for(;;){for(var ie;Z!==a||f!==0&&Z.nodeType!==3||(R=v+f),Z!==g||c!==0&&Z.nodeType!==3||(k=v+c),Z.nodeType===3&&(v+=Z.nodeValue.length),(ie=Z.firstChild)!==null;)Y=Z,Z=ie;for(;;){if(Z===n)break t;if(Y===a&&++H===f&&(R=v),Y===g&&++X===c&&(k=v),(ie=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=ie}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(gh={focusedElem:n,selectionRange:a},Qr=!1,le=s;le!==null;)if(s=le,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,le=n;else for(;le!==null;){s=le;try{var ue=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var ce=ue.memoizedProps,ot=ue.memoizedState,z=s.stateNode,O=z.getSnapshotBeforeUpdate(s.elementType===s.type?ce:Mn(s.type,ce),ot);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){it(s,s.return,te)}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}return ue=Xm,Xm=!1,ue}function Ma(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&rd(s,a,g)}f=f.next}while(f!==c)}}function wu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function id(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Jm(n){var s=n.alternate;s!==null&&(n.alternate=null,Jm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Xn],delete s[Ra],delete s[Eh],delete s[wE],delete s[TE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Zm(n){return n.tag===5||n.tag===3||n.tag===4}function eg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sd(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Jl));else if(c!==4&&(n=n.child,n!==null))for(sd(n,s,a),n=n.sibling;n!==null;)sd(n,s,a),n=n.sibling}function od(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(od(n,s,a),n=n.sibling;n!==null;)od(n,s,a),n=n.sibling}var Pt=null,bn=!1;function ii(n,s,a){for(a=a.child;a!==null;)tg(n,s,a),a=a.sibling}function tg(n,s,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(qi,a)}catch{}switch(a.tag){case 5:bt||ho(a,s);case 6:var c=Pt,f=bn;Pt=null,ii(n,s,a),Pt=c,bn=f,Pt!==null&&(bn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(bn?(n=Pt,a=a.stateNode,n.nodeType===8?vh(n.parentNode,a):n.nodeType===1&&vh(n,a),Dn(n)):vh(Pt,a.stateNode));break;case 4:c=Pt,f=bn,Pt=a.stateNode.containerInfo,bn=!0,ii(n,s,a),Pt=c,bn=f;break;case 0:case 11:case 14:case 15:if(!bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&(g&2||g&4)&&rd(a,s,v),f=f.next}while(f!==c)}ii(n,s,a);break;case 1:if(!bt&&(ho(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){it(a,s,R)}ii(n,s,a);break;case 21:ii(n,s,a);break;case 22:a.mode&1?(bt=(c=bt)||a.memoizedState!==null,ii(n,s,a),bt=c):ii(n,s,a);break;default:ii(n,s,a)}}function ng(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new FE),s.forEach(function(c){var f=GE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Fn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,v=s,R=v;e:for(;R!==null;){switch(R.tag){case 5:Pt=R.stateNode,bn=!1;break e;case 3:Pt=R.stateNode.containerInfo,bn=!0;break e;case 4:Pt=R.stateNode.containerInfo,bn=!0;break e}R=R.return}if(Pt===null)throw Error(t(160));tg(g,v,f),Pt=null,bn=!1;var k=f.alternate;k!==null&&(k.return=null),f.return=null}catch(H){it(f,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)rg(s,n),s=s.sibling}function rg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fn(s,n),er(n),c&4){try{Ma(3,n,n.return),wu(3,n)}catch(ce){it(n,n.return,ce)}try{Ma(5,n,n.return)}catch(ce){it(n,n.return,ce)}}break;case 1:Fn(s,n),er(n),c&512&&a!==null&&ho(a,a.return);break;case 5:if(Fn(s,n),er(n),c&512&&a!==null&&ho(a,a.return),n.flags&32){var f=n.stateNode;try{zr(f,"")}catch(ce){it(n,n.return,ce)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,R=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&Ko(f,g),na(R,v);var H=na(R,g);for(v=0;v<k.length;v+=2){var X=k[v],Z=k[v+1];X==="style"?Zo(f,Z):X==="dangerouslySetInnerHTML"?Xo(f,Z):X==="children"?zr(f,Z):ee(f,X,Z,H)}switch(R){case"input":Go(f,g);break;case"textarea":As(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?hr(f,!!g.multiple,ie,!1):Y!==!!g.multiple&&(g.defaultValue!=null?hr(f,!!g.multiple,g.defaultValue,!0):hr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ra]=g}catch(ce){it(n,n.return,ce)}}break;case 6:if(Fn(s,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ce){it(n,n.return,ce)}}break;case 3:if(Fn(s,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Dn(s.containerInfo)}catch(ce){it(n,n.return,ce)}break;case 4:Fn(s,n),er(n);break;case 13:Fn(s,n),er(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(ud=We())),c&4&&ng(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(bt=(H=bt)||X,Fn(s,n),bt=H):Fn(s,n),er(n),c&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!X&&n.mode&1)for(le=n,X=n.child;X!==null;){for(Z=le=X;le!==null;){switch(Y=le,ie=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ma(4,Y,Y.return);break;case 1:ho(Y,Y.return);var ue=Y.stateNode;if(typeof ue.componentWillUnmount=="function"){c=Y,a=Y.return;try{s=c,ue.props=s.memoizedProps,ue.state=s.memoizedState,ue.componentWillUnmount()}catch(ce){it(c,a,ce)}}break;case 5:ho(Y,Y.return);break;case 22:if(Y.memoizedState!==null){og(Z);continue}}ie!==null?(ie.return=Y,le=ie):og(Z)}X=X.sibling}e:for(X=null,Z=n;;){if(Z.tag===5){if(X===null){X=Z;try{f=Z.stateNode,H?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=Z.stateNode,k=Z.memoizedProps.style,v=k!=null&&k.hasOwnProperty("display")?k.display:null,R.style.display=Jo("display",v))}catch(ce){it(n,n.return,ce)}}}else if(Z.tag===6){if(X===null)try{Z.stateNode.nodeValue=H?"":Z.memoizedProps}catch(ce){it(n,n.return,ce)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;X===Z&&(X=null),Z=Z.return}X===Z&&(X=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Fn(s,n),er(n),c&4&&ng(n);break;case 21:break;default:Fn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Zm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(zr(f,""),c.flags&=-33);var g=eg(n);od(n,g,f);break;case 3:case 4:var v=c.stateNode.containerInfo,R=eg(n);sd(n,R,v);break;default:throw Error(t(161))}}catch(k){it(n,n.return,k)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function jE(n,s,a){le=n,ig(n)}function ig(n,s,a){for(var c=(n.mode&1)!==0;le!==null;){var f=le,g=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||Eu;if(!v){var R=f.alternate,k=R!==null&&R.memoizedState!==null||bt;R=Eu;var H=bt;if(Eu=v,(bt=k)&&!H)for(le=f;le!==null;)v=le,k=v.child,v.tag===22&&v.memoizedState!==null?ag(f):k!==null?(k.return=v,le=k):ag(f);for(;g!==null;)le=g,ig(g),g=g.sibling;le=f,Eu=R,bt=H}sg(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,le=g):sg(n)}}function sg(n){for(;le!==null;){var s=le;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:bt||wu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!bt)if(a===null)c.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Mn(s.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&om(s,g,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}om(s,v,a)}break;case 5:var R=s.stateNode;if(a===null&&s.flags&4){a=R;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var X=H.memoizedState;if(X!==null){var Z=X.dehydrated;Z!==null&&Dn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bt||s.flags&512&&id(s)}catch(Y){it(s,s.return,Y)}}if(s===n){le=null;break}if(a=s.sibling,a!==null){a.return=s.return,le=a;break}le=s.return}}function og(n){for(;le!==null;){var s=le;if(s===n){le=null;break}var a=s.sibling;if(a!==null){a.return=s.return,le=a;break}le=s.return}}function ag(n){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{wu(4,s)}catch(k){it(s,a,k)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var f=s.return;try{c.componentDidMount()}catch(k){it(s,f,k)}}var g=s.return;try{id(s)}catch(k){it(s,g,k)}break;case 5:var v=s.return;try{id(s)}catch(k){it(s,v,k)}}}catch(k){it(s,s.return,k)}if(s===n){le=null;break}var R=s.sibling;if(R!==null){R.return=s.return,le=R;break}le=s.return}}var zE=Math.ceil,Tu=ae.ReactCurrentDispatcher,ad=ae.ReactCurrentOwner,vn=ae.ReactCurrentBatchConfig,Me=0,Tt=null,ut=null,kt=0,un=0,fo=Zr(0),mt=0,ba=null,ss=0,Iu=0,ld=0,Fa=null,Xt=null,ud=0,po=1/0,Cr=null,Su=!1,cd=null,si=null,Ru=!1,oi=null,Cu=0,Ua=0,hd=null,Au=-1,Pu=0;function qt(){return Me&6?We():Au!==-1?Au:Au=We()}function ai(n){return n.mode&1?Me&2&&kt!==0?kt&-kt:SE.transition!==null?(Pu===0&&(Pu=Ki()),Pu):(n=xe,n!==0||(n=window.event,n=n===void 0?16:fa(n.type)),n):1}function Un(n,s,a,c){if(50<Ua)throw Ua=0,hd=null,Error(t(185));qr(n,a,c),(!(Me&2)||n!==Tt)&&(n===Tt&&(!(Me&2)&&(Iu|=a),mt===4&&li(n,kt)),Jt(n,c),a===1&&Me===0&&!(s.mode&1)&&(po=We()+500,nu&&ti()))}function Jt(n,s){var a=n.callbackNode;pr(n,s);var c=Wi(n,n===Tt?kt:0);if(c===0)a!==null&&la(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&la(a),s===1)n.tag===0?IE(ug.bind(null,n)):Gp(ug.bind(null,n)),vE(function(){!(Me&6)&&ti()}),a=null;else{switch(Kr(c)){case 1:a=Hi;break;case 4:a=Br;break;case 16:a=dn;break;case 536870912:a=Pl;break;default:a=dn}a=yg(a,lg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function lg(n,s){if(Au=-1,Pu=0,Me&6)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var c=Wi(n,n===Tt?kt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||s)s=ku(n,c);else{s=c;var f=Me;Me|=2;var g=hg();(Tt!==n||kt!==s)&&(Cr=null,po=We()+500,as(n,s));do try{HE();break}catch(R){cg(n,R)}while(!0);kh(),Tu.current=g,Me=f,ut!==null?s=0:(Tt=null,kt=0,s=mt)}if(s!==0){if(s===2&&(f=rn(n),f!==0&&(c=f,s=dd(n,f))),s===1)throw a=ba,as(n,0),li(n,c),Jt(n,We()),a;if(s===6)li(n,c);else{if(f=n.current.alternate,!(c&30)&&!BE(f)&&(s=ku(n,c),s===2&&(g=rn(n),g!==0&&(c=g,s=dd(n,g))),s===1))throw a=ba,as(n,0),li(n,c),Jt(n,We()),a;switch(n.finishedWork=f,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ls(n,Xt,Cr);break;case 3:if(li(n,c),(c&130023424)===c&&(s=ud+500-We(),10<s)){if(Wi(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=_h(ls.bind(null,n,Xt,Cr),s);break}ls(n,Xt,Cr);break;case 4:if(li(n,c),(c&4194240)===c)break;for(s=n.eventTimes,f=-1;0<c;){var v=31-Bt(c);g=1<<v,v=s[v],v>f&&(f=v),c&=~g}if(c=f,c=We()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*zE(c/1960))-c,10<c){n.timeoutHandle=_h(ls.bind(null,n,Xt,Cr),c);break}ls(n,Xt,Cr);break;case 5:ls(n,Xt,Cr);break;default:throw Error(t(329))}}}return Jt(n,We()),n.callbackNode===a?lg.bind(null,n):null}function dd(n,s){var a=Fa;return n.current.memoizedState.isDehydrated&&(as(n,s).flags|=256),n=ku(n,s),n!==2&&(s=Xt,Xt=a,s!==null&&fd(s)),n}function fd(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function BE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Ln(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function li(n,s){for(s&=~ld,s&=~Iu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-Bt(s),c=1<<a;n[a]=-1,s&=~c}}function ug(n){if(Me&6)throw Error(t(327));mo();var s=Wi(n,0);if(!(s&1))return Jt(n,We()),null;var a=ku(n,s);if(n.tag!==0&&a===2){var c=rn(n);c!==0&&(s=c,a=dd(n,c))}if(a===1)throw a=ba,as(n,0),li(n,s),Jt(n,We()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ls(n,Xt,Cr),Jt(n,We()),null}function pd(n,s){var a=Me;Me|=1;try{return n(s)}finally{Me=a,Me===0&&(po=We()+500,nu&&ti())}}function os(n){oi!==null&&oi.tag===0&&!(Me&6)&&mo();var s=Me;Me|=1;var a=vn.transition,c=xe;try{if(vn.transition=null,xe=1,n)return n()}finally{xe=c,vn.transition=a,Me=s,!(Me&6)&&ti()}}function md(){un=fo.current,Qe(fo)}function as(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,_E(a)),ut!==null)for(a=ut.return;a!==null;){var c=a;switch(Sh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&eu();break;case 3:uo(),Qe(Gt),Qe(Lt),bh();break;case 5:Vh(c);break;case 4:uo();break;case 13:Qe(tt);break;case 19:Qe(tt);break;case 10:xh(c.type._context);break;case 22:case 23:md()}a=a.return}if(Tt=n,ut=n=ui(n.current,null),kt=un=s,mt=0,ba=null,ld=Iu=ss=0,Xt=Fa=null,ns!==null){for(s=0;s<ns.length;s++)if(a=ns[s],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,c.next=v}a.pending=c}ns=null}return n}function cg(n,s){do{var a=ut;try{if(kh(),du.current=gu,fu){for(var c=nt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}fu=!1}if(is=0,wt=pt=nt=null,Na=!1,Da=0,ad.current=null,a===null||a.return===null){mt=1,ba=s,ut=null;break}e:{var g=n,v=a.return,R=a,k=s;if(s=kt,R.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var H=k,X=R,Z=X.tag;if(!(X.mode&1)&&(Z===0||Z===11||Z===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=Vm(v);if(ie!==null){ie.flags&=-257,Mm(ie,v,R,g,s),ie.mode&1&&Lm(g,H,s),s=ie,k=H;var ue=s.updateQueue;if(ue===null){var ce=new Set;ce.add(k),s.updateQueue=ce}else ue.add(k);break e}else{if(!(s&1)){Lm(g,H,s),gd();break e}k=Error(t(426))}}else if(Xe&&R.mode&1){var ot=Vm(v);if(ot!==null){!(ot.flags&65536)&&(ot.flags|=256),Mm(ot,v,R,g,s),Ah(co(k,R));break e}}g=k=co(k,R),mt!==4&&(mt=2),Fa===null?Fa=[g]:Fa.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var z=Dm(g,k,s);sm(g,z);break e;case 1:R=k;var O=g.type,$=g.stateNode;if(!(g.flags&128)&&(typeof O.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(si===null||!si.has($)))){g.flags|=65536,s&=-s,g.lanes|=s;var te=Om(g,R,s);sm(g,te);break e}}g=g.return}while(g!==null)}fg(a)}catch(he){s=he,ut===a&&a!==null&&(ut=a=a.return);continue}break}while(!0)}function hg(){var n=Tu.current;return Tu.current=gu,n===null?gu:n}function gd(){(mt===0||mt===3||mt===2)&&(mt=4),Tt===null||!(ss&268435455)&&!(Iu&268435455)||li(Tt,kt)}function ku(n,s){var a=Me;Me|=2;var c=hg();(Tt!==n||kt!==s)&&(Cr=null,as(n,s));do try{$E();break}catch(f){cg(n,f)}while(!0);if(kh(),Me=a,Tu.current=c,ut!==null)throw Error(t(261));return Tt=null,kt=0,mt}function $E(){for(;ut!==null;)dg(ut)}function HE(){for(;ut!==null&&!Cl();)dg(ut)}function dg(n){var s=gg(n.alternate,n,un);n.memoizedProps=n.pendingProps,s===null?fg(n):ut=s,ad.current=null}function fg(n){var s=n;do{var a=s.alternate;if(n=s.return,s.flags&32768){if(a=bE(a,s),a!==null){a.flags&=32767,ut=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,ut=null;return}}else if(a=ME(a,s,un),a!==null){ut=a;return}if(s=s.sibling,s!==null){ut=s;return}ut=s=n}while(s!==null);mt===0&&(mt=5)}function ls(n,s,a){var c=xe,f=vn.transition;try{vn.transition=null,xe=1,qE(n,s,a,c)}finally{vn.transition=f,xe=c}return null}function qE(n,s,a,c){do mo();while(oi!==null);if(Me&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if($e(n,g),n===Tt&&(ut=Tt=null,kt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Ru||(Ru=!0,yg(dn,function(){return mo(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=vn.transition,vn.transition=null;var v=xe;xe=1;var R=Me;Me|=4,ad.current=null,UE(n,a),rg(a,n),hE(gh),Qr=!!mh,gh=mh=null,n.current=a,jE(a),Zc(),Me=R,xe=v,vn.transition=g}else n.current=a;if(Ru&&(Ru=!1,oi=n,Cu=f),g=n.pendingLanes,g===0&&(si=null),kl(a.stateNode),Jt(n,We()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)f=s[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Su)throw Su=!1,n=cd,cd=null,n;return Cu&1&&n.tag!==0&&mo(),g=n.pendingLanes,g&1?n===hd?Ua++:(Ua=0,hd=n):Ua=0,ti(),null}function mo(){if(oi!==null){var n=Kr(Cu),s=vn.transition,a=xe;try{if(vn.transition=null,xe=16>n?16:n,oi===null)var c=!1;else{if(n=oi,oi=null,Cu=0,Me&6)throw Error(t(331));var f=Me;for(Me|=4,le=n.current;le!==null;){var g=le,v=g.child;if(le.flags&16){var R=g.deletions;if(R!==null){for(var k=0;k<R.length;k++){var H=R[k];for(le=H;le!==null;){var X=le;switch(X.tag){case 0:case 11:case 15:Ma(8,X,g)}var Z=X.child;if(Z!==null)Z.return=X,le=Z;else for(;le!==null;){X=le;var Y=X.sibling,ie=X.return;if(Jm(X),X===H){le=null;break}if(Y!==null){Y.return=ie,le=Y;break}le=ie}}}var ue=g.alternate;if(ue!==null){var ce=ue.child;if(ce!==null){ue.child=null;do{var ot=ce.sibling;ce.sibling=null,ce=ot}while(ce!==null)}}le=g}}if(g.subtreeFlags&2064&&v!==null)v.return=g,le=v;else e:for(;le!==null;){if(g=le,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ma(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,le=z;break e}le=g.return}}var O=n.current;for(le=O;le!==null;){v=le;var $=v.child;if(v.subtreeFlags&2064&&$!==null)$.return=v,le=$;else e:for(v=O;le!==null;){if(R=le,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:wu(9,R)}}catch(he){it(R,R.return,he)}if(R===v){le=null;break e}var te=R.sibling;if(te!==null){te.return=R.return,le=te;break e}le=R.return}}if(Me=f,ti(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(qi,n)}catch{}c=!0}return c}finally{xe=a,vn.transition=s}}return!1}function pg(n,s,a){s=co(a,s),s=Dm(n,s,1),n=ri(n,s,1),s=qt(),n!==null&&(qr(n,1,s),Jt(n,s))}function it(n,s,a){if(n.tag===3)pg(n,n,a);else for(;s!==null;){if(s.tag===3){pg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(si===null||!si.has(c))){n=co(a,n),n=Om(s,n,1),s=ri(s,n,1),n=qt(),s!==null&&(qr(s,1,n),Jt(s,n));break}}s=s.return}}function WE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=qt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(kt&a)===a&&(mt===4||mt===3&&(kt&130023424)===kt&&500>We()-ud?as(n,0):ld|=a),Jt(n,s)}function mg(n,s){s===0&&(n.mode&1?(s=bs,bs<<=1,!(bs&130023424)&&(bs=4194304)):s=1);var a=qt();n=Ir(n,s),n!==null&&(qr(n,s,a),Jt(n,a))}function KE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),mg(n,a)}function GE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),mg(n,a)}var gg;gg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Gt.current)Yt=!0;else{if(!(n.lanes&a)&&!(s.flags&128))return Yt=!1,VE(n,s,a);Yt=!!(n.flags&131072)}else Yt=!1,Xe&&s.flags&1048576&&Qp(s,iu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;vu(n,s),n=s.pendingProps;var f=no(s,Lt.current);lo(s,a),f=jh(null,s,c,n,f,a);var g=zh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Qt(c)?(g=!0,tu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Oh(s),f.updater=yu,s.stateNode=f,f._reactInternals=s,Kh(s,c,n,a),s=Xh(null,s,c,!0,g,a)):(s.tag=0,Xe&&g&&Ih(s),Ht(null,s,f,a),s=s.child),s;case 16:c=s.elementType;e:{switch(vu(n,s),n=s.pendingProps,f=c._init,c=f(c._payload),s.type=c,f=s.tag=YE(c),n=Mn(c,n),f){case 0:s=Yh(null,s,c,n,a);break e;case 1:s=Bm(null,s,c,n,a);break e;case 11:s=bm(null,s,c,n,a);break e;case 14:s=Fm(null,s,c,Mn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Mn(c,f),Yh(n,s,c,f,a);case 1:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Mn(c,f),Bm(n,s,c,f,a);case 3:e:{if($m(s),n===null)throw Error(t(387));c=s.pendingProps,g=s.memoizedState,f=g.element,im(n,s),cu(s,c,null,a);var v=s.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=co(Error(t(423)),s),s=Hm(n,s,c,a,f);break e}else if(c!==f){f=co(Error(t(424)),s),s=Hm(n,s,c,a,f);break e}else for(ln=Jr(s.stateNode.containerInfo.firstChild),an=s,Xe=!0,Vn=null,a=nm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(so(),c===f){s=Rr(n,s,a);break e}Ht(n,s,c,a)}s=s.child}return s;case 5:return am(s),n===null&&Ch(s),c=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,yh(c,f)?v=null:g!==null&&yh(c,g)&&(s.flags|=32),zm(n,s),Ht(n,s,v,a),s.child;case 6:return n===null&&Ch(s),null;case 13:return qm(n,s,a);case 4:return Lh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=oo(s,null,c,a):Ht(n,s,c,a),s.child;case 11:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Mn(c,f),bm(n,s,c,f,a);case 7:return Ht(n,s,s.pendingProps,a),s.child;case 8:return Ht(n,s,s.pendingProps.children,a),s.child;case 12:return Ht(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,f=s.pendingProps,g=s.memoizedProps,v=f.value,Ke(au,c._currentValue),c._currentValue=v,g!==null)if(Ln(g.value,v)){if(g.children===f.children&&!Gt.current){s=Rr(n,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){v=g.child;for(var k=R.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=Sr(-1,a&-a),k.tag=2;var H=g.updateQueue;if(H!==null){H=H.shared;var X=H.pending;X===null?k.next=k:(k.next=X.next,X.next=k),H.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Nh(g.return,a,s),R.lanes|=a;break}k=k.next}}else if(g.tag===10)v=g.type===s.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),Nh(v,a,s),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===s){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}Ht(n,s,f.children,a),s=s.child}return s;case 9:return f=s.type,c=s.pendingProps.children,lo(s,a),f=yn(f),c=c(f),s.flags|=1,Ht(n,s,c,a),s.child;case 14:return c=s.type,f=Mn(c,s.pendingProps),f=Mn(c.type,f),Fm(n,s,c,f,a);case 15:return Um(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,f=s.pendingProps,f=s.elementType===c?f:Mn(c,f),vu(n,s),s.tag=1,Qt(c)?(n=!0,tu(s)):n=!1,lo(s,a),xm(s,c,f),Kh(s,c,f,a),Xh(null,s,c,!0,n,a);case 19:return Km(n,s,a);case 22:return jm(n,s,a)}throw Error(t(156,s.tag))};function yg(n,s){return Vs(n,s)}function QE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,s,a,c){return new QE(n,s,a,c)}function yd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YE(n){if(typeof n=="function")return yd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===F)return 11;if(n===Fe)return 14}return 2}function ui(n,s){var a=n.alternate;return a===null?(a=En(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function xu(n,s,a,c,f,g){var v=2;if(c=n,typeof n=="function")yd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case D:return us(a.children,f,g,s);case S:v=8,f|=8;break;case C:return n=En(12,a,s,f|2),n.elementType=C,n.lanes=g,n;case A:return n=En(13,a,s,f),n.elementType=A,n.lanes=g,n;case et:return n=En(19,a,s,f),n.elementType=et,n.lanes=g,n;case De:return Nu(a,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:v=10;break e;case V:v=9;break e;case F:v=11;break e;case Fe:v=14;break e;case He:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=En(v,a,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function us(n,s,a,c){return n=En(7,n,c,s),n.lanes=a,n}function Nu(n,s,a,c){return n=En(22,n,c,s),n.elementType=De,n.lanes=a,n.stateNode={isHidden:!1},n}function _d(n,s,a){return n=En(6,n,null,s),n.lanes=a,n}function vd(n,s,a){return s=En(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function XE(n,s,a,c,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hr(0),this.expirationTimes=Hr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ed(n,s,a,c,f,g,v,R,k){return n=new XE(n,s,a,R,k),s===1?(s=1,g===!0&&(s|=8)):s=0,g=En(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(g),n}function JE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function _g(n){if(!n)return ei;n=n._reactInternals;e:{if(An(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Qt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Qt(a))return Wp(n,a,s)}return s}function vg(n,s,a,c,f,g,v,R,k){return n=Ed(a,c,!0,n,f,g,v,R,k),n.context=_g(null),a=n.current,c=qt(),f=ai(a),g=Sr(c,f),g.callback=s??null,ri(a,g,f),n.current.lanes=f,qr(n,f,c),Jt(n,c),n}function Du(n,s,a,c){var f=s.current,g=qt(),v=ai(f);return a=_g(a),s.context===null?s.context=a:s.pendingContext=a,s=Sr(g,v),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ri(f,s,v),n!==null&&(Un(n,f,v,g),uu(n,f,v)),v}function Ou(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Eg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function wd(n,s){Eg(n,s),(n=n.alternate)&&Eg(n,s)}function ZE(){return null}var wg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Td(n){this._internalRoot=n}Lu.prototype.render=Td.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Du(n,s,null,null)},Lu.prototype.unmount=Td.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;os(function(){Du(null,n,null,null)}),s[vr]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ll();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Kn.length&&s!==0&&s<Kn[a].priority;a++);Kn.splice(a,0,n),a===0&&bl(n)}};function Id(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Vu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function ew(n,s,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var H=Ou(v);g.call(H)}}var v=vg(s,c,n,0,null,!1,!1,"",Tg);return n._reactRootContainer=v,n[vr]=v.current,Ia(n.nodeType===8?n.parentNode:n),os(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var H=Ou(k);R.call(H)}}var k=Ed(n,0,!1,null,null,!1,!1,"",Tg);return n._reactRootContainer=k,n[vr]=k.current,Ia(n.nodeType===8?n.parentNode:n),os(function(){Du(s,k,a,c)}),k}function Mu(n,s,a,c,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var R=f;f=function(){var k=Ou(v);R.call(k)}}Du(s,v,n,f)}else v=ew(a,s,n,f,c);return Ou(v)}Dl=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$r(s.pendingLanes);a!==0&&(Wr(s,a|1),Jt(s,We()),!(Me&6)&&(po=We()+500,ti()))}break;case 13:os(function(){var c=Ir(n,1);if(c!==null){var f=qt();Un(c,n,1,f)}}),wd(n,1)}},Fs=function(n){if(n.tag===13){var s=Ir(n,134217728);if(s!==null){var a=qt();Un(s,n,134217728,a)}wd(n,134217728)}},Ol=function(n){if(n.tag===13){var s=ai(n),a=Ir(n,s);if(a!==null){var c=qt();Un(a,n,s,c)}wd(n,s)}},Ll=function(){return xe},Vl=function(n,s){var a=xe;try{return xe=n,s()}finally{xe=a}},ks=function(n,s,a){switch(s){case"input":if(Go(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var f=Zl(c);if(!f)throw Error(t(90));Is(c),Go(c,f)}}}break;case"textarea":As(n,a);break;case"select":s=a.value,s!=null&&hr(n,!!a.multiple,s,!1)}},ji=pd,ia=os;var tw={usingClientEntryPoint:!1,Events:[Ca,eo,Zl,qn,ra,pd]},ja={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nw={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=aa(n),n===null?null:n.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||ZE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{qi=bu.inject(nw),nn=bu}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tw,Zt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Id(s))throw Error(t(200));return JE(n,s,null,a)},Zt.createRoot=function(n,s){if(!Id(n))throw Error(t(299));var a=!1,c="",f=wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ed(n,1,!1,null,null,a,!1,c,f),n[vr]=s.current,Ia(n.nodeType===8?n.parentNode:n),new Td(s)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=aa(s),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return os(n)},Zt.hydrate=function(n,s,a){if(!Vu(s))throw Error(t(200));return Mu(null,n,s,!0,a)},Zt.hydrateRoot=function(n,s,a){if(!Id(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",v=wg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=vg(s,null,n,1,a??null,f,!1,g,v),n[vr]=s.current,Ia(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Lu(s)},Zt.render=function(n,s,a){if(!Vu(s))throw Error(t(200));return Mu(null,n,s,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Vu(n))throw Error(t(40));return n._reactRootContainer?(os(function(){Mu(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},Zt.unstable_batchedUpdates=pd,Zt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Vu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Mu(n,s,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var xg;function f_(){if(xg)return Cd.exports;xg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Cd.exports=cw(),Cd.exports}var Ng;function hw(){if(Ng)return Fu;Ng=1;var r=f_();return Fu.createRoot=r.createRoot,Fu.hydrateRoot=r.hydrateRoot,Fu}var dw=hw();const fw=gf(dw);var Ba={},Dg;function pw(){if(Dg)return Ba;Dg=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.parse=h,Ba.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,N){const L=new l,B=I.length;if(B<2)return L;const U=(N==null?void 0:N.decode)||E;let K=0;do{const W=I.indexOf("=",K);if(W===-1)break;const ee=I.indexOf(";",K),ae=ee===-1?B:ee;if(W>ae){K=I.lastIndexOf(";",W-1)+1;continue}const Ee=d(I,K,W),Te=p(I,W,Ee),D=I.slice(Ee,Te);if(L[D]===void 0){let S=d(I,W+1,ae),C=p(I,ae,S);const x=U(I.slice(S,C));L[D]=x}K=ae+1}while(K<B);return L}function d(I,N,L){do{const B=I.charCodeAt(N);if(B!==32&&B!==9)return N}while(++N<L);return L}function p(I,N,L){for(;N>L;){const B=I.charCodeAt(--N);if(B!==32&&B!==9)return N+1}return L}function y(I,N,L){const B=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(I))throw new TypeError(`argument name is invalid: ${I}`);const U=B(N);if(!e.test(U))throw new TypeError(`argument val is invalid: ${N}`);let K=I+"="+U;if(!L)return K;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);K+="; Max-Age="+L.maxAge}if(L.domain){if(!t.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);K+="; Domain="+L.domain}if(L.path){if(!i.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);K+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);K+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(K+="; HttpOnly"),L.secure&&(K+="; Secure"),L.partitioned&&(K+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":K+="; Priority=Low";break;case"medium":K+="; Priority=Medium";break;case"high":K+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":K+="; SameSite=Strict";break;case"lax":K+="; SameSite=Lax";break;case"none":K+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return K}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function T(I){return o.call(I)==="[object Date]"}return Ba}pw();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Og="popstate";function mw(r={}){function e(o,l){let{pathname:h="/",search:d="",hash:p=""}=vs(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Bd("",{pathname:h,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),d="";if(h&&h.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");d=y===-1?p:p.slice(0,y)}return d+"#"+(typeof l=="string"?l:tl(l))}function i(o,l){Sn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return yw(e,t,i,r)}function Ze(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gw(){return Math.random().toString(36).substring(2,10)}function Lg(r,e){return{usr:r.state,key:r.key,idx:e}}function Bd(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?vs(e):e,state:t,key:e&&e.key||i||gw()}}function tl({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function vs(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function yw(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,h=o.history,d="POP",p=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function T(){d="POP";let U=E(),K=U==null?null:U-y;y=U,p&&p({action:d,location:B.location,delta:K})}function I(U,K){d="PUSH";let W=Bd(B.location,U,K);t&&t(W,U),y=E()+1;let ee=Lg(W,y),ae=B.createHref(W);try{h.pushState(ee,"",ae)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;o.location.assign(ae)}l&&p&&p({action:d,location:B.location,delta:1})}function N(U,K){d="REPLACE";let W=Bd(B.location,U,K);t&&t(W,U),y=E();let ee=Lg(W,y),ae=B.createHref(W);h.replaceState(ee,"",ae),l&&p&&p({action:d,location:B.location,delta:0})}function L(U){let K=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof U=="string"?U:tl(U);return W=W.replace(/ $/,"%20"),Ze(K,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,K)}let B={get action(){return d},get location(){return r(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,T),p=U,()=>{o.removeEventListener(Og,T),p=null}},createHref(U){return e(o,U)},createURL:L,encodeLocation(U){let K=L(U);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:I,replace:N,go(U){return h.go(U)}};return B}function p_(r,e,t="/"){return _w(r,e,t,!1)}function _w(r,e,t,i){let o=typeof e=="string"?vs(e):e,l=Si(o.pathname||"/",t);if(l==null)return null;let h=m_(r);vw(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let y=xw(l);d=Pw(h[p],y,i)}return d}function m_(r,e=[],t=[],i=""){let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Ze(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=Nr([i,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(Ze(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),m_(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Cw(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of g_(l.path))o(l,h,p)}),e}function g_(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let h=g_(i.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function vw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Aw(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Ew=/^:[\w-]+$/,ww=3,Tw=2,Iw=1,Sw=10,Rw=-2,Vg=r=>r==="*";function Cw(r,e){let t=r.split("/"),i=t.length;return t.some(Vg)&&(i+=Rw),e&&(i+=Tw),t.filter(o=>!Vg(o)).reduce((o,l)=>o+(Ew.test(l)?ww:l===""?Iw:Sw),i)}function Aw(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function Pw(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",h=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=sc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),I=p.route;if(!T&&y&&t&&!i[i.length-1].route.index&&(T=sc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Nr([l,T.pathname]),pathnameBase:Lw(Nr([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=Nr([l,T.pathnameBase]))}return h}function sc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=kw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,{paramName:E,isOptional:T},I)=>{if(E==="*"){let L=d[I]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const N=d[I];return T&&!N?y[E]=void 0:y[E]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function kw(r,e=!1,t=!0){Sn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function xw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sn(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Si(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function Nw(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?vs(r):r;return{pathname:t?t.startsWith("/")?t:Dw(t,e):e,search:Vw(i),hash:Mw(o)}}function Dw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function kd(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ow(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _f(r){let e=Ow(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function vf(r,e,t,i=!1){let o;typeof r=="string"?o=vs(r):(o={...r},Ze(!o.pathname||!o.pathname.includes("?"),kd("?","pathname","search",o)),Ze(!o.pathname||!o.pathname.includes("#"),kd("#","pathname","hash",o)),Ze(!o.search||!o.search.includes("#"),kd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let T=e.length-1;if(!i&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;o.pathname=I.join("/")}d=T>=0?e[T]:"/"}let p=Nw(o,d),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var Nr=r=>r.join("/").replace(/\/\/+/g,"/"),Lw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Vw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Mw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function bw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var y_=["POST","PUT","PATCH","DELETE"];new Set(y_);var Fw=["GET",...y_];new Set(Fw);var bo=M.createContext(null);bo.displayName="DataRouter";var Ac=M.createContext(null);Ac.displayName="DataRouterState";var __=M.createContext({isTransitioning:!1});__.displayName="ViewTransition";var Uw=M.createContext(new Map);Uw.displayName="Fetchers";var jw=M.createContext(null);jw.displayName="Await";var Bn=M.createContext(null);Bn.displayName="Navigation";var cl=M.createContext(null);cl.displayName="Location";var $n=M.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var Ef=M.createContext(null);Ef.displayName="RouteError";function zw(r,{relative:e}={}){Ze(Fo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=M.useContext(Bn),{hash:o,pathname:l,search:h}=hl(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Nr([t,l])),i.createHref({pathname:d,search:h,hash:o})}function Fo(){return M.useContext(cl)!=null}function Ni(){return Ze(Fo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(cl).location}var v_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function E_(r){M.useContext(Bn).static||M.useLayoutEffect(r)}function Pc(){let{isDataRoute:r}=M.useContext($n);return r?eT():Bw()}function Bw(){Ze(Fo(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(bo),{basename:e,navigator:t}=M.useContext(Bn),{matches:i}=M.useContext($n),{pathname:o}=Ni(),l=JSON.stringify(_f(i)),h=M.useRef(!1);return E_(()=>{h.current=!0}),M.useCallback((p,y={})=>{if(Sn(h.current,v_),!h.current)return;if(typeof p=="number"){t.go(p);return}let E=vf(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Nr([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}M.createContext(null);function w_(){let{matches:r}=M.useContext($n),e=r[r.length-1];return e?e.params:{}}function hl(r,{relative:e}={}){let{matches:t}=M.useContext($n),{pathname:i}=Ni(),o=JSON.stringify(_f(t));return M.useMemo(()=>vf(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function $w(r,e){return T_(r,e)}function T_(r,e,t,i){var K;Ze(Fo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Bn),{matches:l}=M.useContext($n),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",E=h&&h.route;{let W=E&&E.path||"";I_(p,!E||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=Ni(),I;if(e){let W=typeof e=="string"?vs(e):e;Ze(y==="/"||((K=W.pathname)==null?void 0:K.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${W.pathname}" was given in the \`location\` prop.`),I=W}else I=T;let N=I.pathname||"/",L=N;if(y!=="/"){let W=y.replace(/^\//,"").split("/");L="/"+N.replace(/^\//,"").split("/").slice(W.length).join("/")}let B=p_(r,{pathname:L});Sn(E||B!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Sn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Gw(B&&B.map(W=>Object.assign({},W,{params:Object.assign({},d,W.params),pathname:Nr([y,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?y:Nr([y,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),l,t,i);return e&&U?M.createElement(cl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},U):U}function Hw(){let r=Zw(),e=bw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:o},t):null,h)}var qw=M.createElement(Hw,null),Ww=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?M.createElement($n.Provider,{value:this.props.routeContext},M.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kw({routeContext:r,match:e,children:t}){let i=M.useContext(bo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement($n.Provider,{value:r},t)}function Gw(r,e=[],t=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Ze(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:E,errors:T}=t,I=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,y,E)=>{let T,I=!1,N=null,L=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,N=y.route.errorElement||qw,h&&(d<0&&E===0?(I_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,L=null):d===E&&(I=!0,L=y.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,E+1)),U=()=>{let K;return T?K=N:I?K=L:y.route.Component?K=M.createElement(y.route.Component,null):y.route.element?K=y.route.element:K=p,M.createElement(Kw,{match:y,routeContext:{outlet:p,matches:B,isDataRoute:t!=null},children:K})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?M.createElement(Ww,{location:t.location,revalidation:t.revalidation,component:N,error:T,children:U(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):U()},null)}function wf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qw(r){let e=M.useContext(bo);return Ze(e,wf(r)),e}function Yw(r){let e=M.useContext(Ac);return Ze(e,wf(r)),e}function Xw(r){let e=M.useContext($n);return Ze(e,wf(r)),e}function Tf(r){let e=Xw(r),t=e.matches[e.matches.length-1];return Ze(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Jw(){return Tf("useRouteId")}function Zw(){var i;let r=M.useContext(Ef),e=Yw("useRouteError"),t=Tf("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function eT(){let{router:r}=Qw("useNavigate"),e=Tf("useNavigate"),t=M.useRef(!1);return E_(()=>{t.current=!0}),M.useCallback(async(o,l={})=>{Sn(t.current,v_),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Mg={};function I_(r,e,t){!e&&!Mg[r]&&(Mg[r]=!0,Sn(!1,t))}M.memo(tT);function tT({routes:r,future:e,state:t}){return T_(r,void 0,t,e)}function go({to:r,replace:e,state:t,relative:i}){Ze(Fo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext(Bn);Sn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext($n),{pathname:h}=Ni(),d=Pc(),p=vf(r,_f(l),h,i==="path"),y=JSON.stringify(p);return M.useEffect(()=>{d(JSON.parse(y),{replace:e,state:t,relative:i})},[d,y,i,e,t]),null}function Ar(r){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nT({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){Ze(!Fo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=vs(t));let{pathname:p="/",search:y="",hash:E="",state:T=null,key:I="default"}=t,N=M.useMemo(()=>{let L=Si(p,h);return L==null?null:{location:{pathname:L,search:y,hash:E,state:T,key:I},navigationType:i}},[h,p,y,E,T,I,i]);return Sn(N!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:M.createElement(Bn.Provider,{value:d},M.createElement(cl.Provider,{children:e,value:N}))}function rT({children:r,location:e}){return $w($d(r),e)}function $d(r,e=[]){let t=[];return M.Children.forEach(r,(i,o)=>{if(!M.isValidElement(i))return;let l=[...e,o];if(i.type===M.Fragment){t.push.apply(t,$d(i.props.children,l));return}Ze(i.type===Ar,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=$d(i.props.children,l)),t.push(h)}),t}var Ku="get",Gu="application/x-www-form-urlencoded";function kc(r){return r!=null&&typeof r.tagName=="string"}function iT(r){return kc(r)&&r.tagName.toLowerCase()==="button"}function sT(r){return kc(r)&&r.tagName.toLowerCase()==="form"}function oT(r){return kc(r)&&r.tagName.toLowerCase()==="input"}function aT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function lT(r,e){return r.button===0&&(!e||e==="_self")&&!aT(r)}var Uu=null;function uT(){if(Uu===null)try{new FormData(document.createElement("form"),0),Uu=!1}catch{Uu=!0}return Uu}var cT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(r){return r!=null&&!cT.has(r)?(Sn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gu}"`),null):r}function hT(r,e){let t,i,o,l,h;if(sT(r)){let d=r.getAttribute("action");i=d?Si(d,e):null,t=r.getAttribute("method")||Ku,o=xd(r.getAttribute("enctype"))||Gu,l=new FormData(r)}else if(iT(r)||oT(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?Si(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Ku,o=xd(r.getAttribute("formenctype"))||xd(d.getAttribute("enctype"))||Gu,l=new FormData(d,r),!uT()){let{name:y,type:E,value:T}=r;if(E==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,T)}}else{if(kc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ku,i=null,o=Gu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:h}}function If(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function dT(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function pT(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await dT(l,t);return h.links?h.links():[]}return[]}));return _T(i.flat(1).filter(fT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function bg(r,e,t,i,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,d=(p,y)=>{var E;return t[y].pathname!==p.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||d(p,y)):l==="data"?e.filter((p,y)=>{var T;let E=i.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,y)||d(p,y))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function mT(r,e){return gT(r.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function gT(r){return[...new Set(r)]}function yT(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function _T(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(yT(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function vT(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function ET(){let r=M.useContext(bo);return If(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function wT(){let r=M.useContext(Ac);return If(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Sf=M.createContext(void 0);Sf.displayName="FrameworkContext";function S_(){let r=M.useContext(Sf);return If(r,"You must render this element inside a <HydratedRouter> element"),r}function TT(r,e){let t=M.useContext(Sf),[i,o]=M.useState(!1),[l,h]=M.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,I=M.useRef(null);M.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let B=K=>{K.forEach(W=>{h(W.isIntersecting)})},U=new IntersectionObserver(B,{threshold:.5});return I.current&&U.observe(I.current),()=>{U.disconnect()}}},[r]),M.useEffect(()=>{if(i){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[i]);let N=()=>{o(!0)},L=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:$a(d,N),onBlur:$a(p,L),onMouseEnter:$a(y,N),onMouseLeave:$a(E,L),onTouchStart:$a(T,N)}]:[!1,I,{}]}function $a(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function IT({page:r,...e}){let{router:t}=ET(),i=M.useMemo(()=>p_(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?M.createElement(RT,{page:r,matches:i,...e}):(console.warn(`Tried to prefetch ${r} but no routes matched.`),null)}function ST(r){let{manifest:e,routeModules:t}=S_(),[i,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return pT(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),i}function RT({page:r,matches:e,...t}){let i=Ni(),{manifest:o,routeModules:l}=S_(),{loaderData:h,matches:d}=wT(),p=M.useMemo(()=>bg(r,e,d,o,i,"data"),[r,e,d,o,i]),y=M.useMemo(()=>bg(r,e,d,o,i,"assets"),[r,e,d,o,i]),E=M.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let N=new Set,L=!1;if(e.forEach(U=>{var W;let K=o.routes[U.route.id];!K||!K.hasLoader||(!p.some(ee=>ee.route.id===U.route.id)&&U.route.id in h&&((W=l[U.route.id])!=null&&W.shouldRevalidate)||K.hasClientLoader?L=!0:N.add(U.route.id))}),N.size===0)return[];let B=vT(r);return L&&N.size>0&&B.searchParams.set("_routes",e.filter(U=>N.has(U.route.id)).map(U=>U.route.id).join(",")),[B.pathname+B.search]},[h,i,o,p,e,r,l]),T=M.useMemo(()=>mT(y,o),[y,o]),I=ST(y);return M.createElement(M.Fragment,null,E.map(N=>M.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),T.map(N=>M.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),I.map(({key:N,link:L})=>M.createElement("link",{key:N,...L})))}function CT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var R_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R_&&(window.__reactRouterVersion="7.0.2")}catch{}function AT({basename:r,children:e,window:t}){let i=M.useRef();i.current==null&&(i.current=mw({window:t,v5Compat:!0}));let o=i.current,[l,h]=M.useState({action:o.action,location:o.location}),d=M.useCallback(p=>{M.startTransition(()=>h(p))},[h]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.createElement(nT,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var C_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xc=M.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:h,state:d,target:p,to:y,preventScrollReset:E,viewTransition:T,...I},N){let{basename:L}=M.useContext(Bn),B=typeof y=="string"&&C_.test(y),U,K=!1;if(typeof y=="string"&&B&&(U=y,R_))try{let C=new URL(window.location.href),x=y.startsWith("//")?new URL(C.protocol+y):new URL(y),V=Si(x.pathname,L);x.origin===C.origin&&V!=null?y=V+x.search+x.hash:K=!0}catch{Sn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=zw(y,{relative:o}),[ee,ae,Ee]=TT(i,I),Te=xT(y,{replace:h,state:d,target:p,preventScrollReset:E,relative:o,viewTransition:T});function D(C){e&&e(C),C.defaultPrevented||Te(C)}let S=M.createElement("a",{...I,...Ee,href:U||W,onClick:K||l?e:D,ref:CT(N,ae),target:p,"data-discover":!B&&t==="render"?"true":void 0});return ee&&!B?M.createElement(M.Fragment,null,S,M.createElement(IT,{page:W})):S});xc.displayName="Link";var _o=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:h,viewTransition:d,children:p,...y},E){let T=hl(h,{relative:y.relative}),I=Ni(),N=M.useContext(Ac),{navigator:L,basename:B}=M.useContext(Bn),U=N!=null&&VT(T)&&d===!0,K=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,W=I.pathname,ee=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(W=W.toLowerCase(),ee=ee?ee.toLowerCase():null,K=K.toLowerCase()),ee&&B&&(ee=Si(ee,B)||ee);const ae=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Ee=W===K||!o&&W.startsWith(K)&&W.charAt(ae)==="/",Te=ee!=null&&(ee===K||!o&&ee.startsWith(K)&&ee.charAt(K.length)==="/"),D={isActive:Ee,isPending:Te,isTransitioning:U},S=Ee?e:void 0,C;typeof i=="function"?C=i(D):C=[i,Ee?"active":null,Te?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(D):l;return M.createElement(xc,{...y,"aria-current":S,className:C,ref:E,style:x,to:h,viewTransition:d},typeof p=="function"?p(D):p)});_o.displayName="NavLink";var PT=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:h=Ku,action:d,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:T,...I},N)=>{let L=OT(),B=LT(d,{relative:y}),U=h.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&C_.test(d),W=ee=>{if(p&&p(ee),ee.defaultPrevented)return;ee.preventDefault();let ae=ee.nativeEvent.submitter,Ee=(ae==null?void 0:ae.getAttribute("formmethod"))||h;L(ae||ee.currentTarget,{fetcherKey:e,method:Ee,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T})};return M.createElement("form",{ref:N,method:U,action:B,onSubmit:i?p:W,...I,"data-discover":!K&&r==="render"?"true":void 0})});PT.displayName="Form";function kT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A_(r){let e=M.useContext(bo);return Ze(e,kT(r)),e}function xT(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:h}={}){let d=Pc(),p=Ni(),y=hl(r,{relative:l});return M.useCallback(E=>{if(lT(E,e)){E.preventDefault();let T=t!==void 0?t:tl(p)===tl(y);d(r,{replace:T,state:i,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,y,t,i,e,r,o,l,h])}var NT=0,DT=()=>`__${String(++NT)}__`;function OT(){let{router:r}=A_("useSubmit"),{basename:e}=M.useContext(Bn),t=Jw();return M.useCallback(async(i,o={})=>{let{action:l,method:h,encType:d,formData:p,body:y}=hT(i,e);if(o.navigate===!1){let E=o.fetcherKey||DT();await r.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function LT(r,{relative:e}={}){let{basename:t}=M.useContext(Bn),i=M.useContext($n);Ze(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...hl(r||".",{relative:e})},h=Ni();if(r==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(E=>E==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let E=d.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Nr([t,l.pathname])),tl(l)}function VT(r,e={}){let t=M.useContext(__);Ze(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=A_("useViewTransitionState"),o=hl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Si(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Si(t.nextLocation.pathname,i)||t.nextLocation.pathname;return sc(o.pathname,h)!=null||sc(o.pathname,l)!=null}new TextEncoder;var MT=f_();const bT=gf(MT);var Fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=l>>2,T=(l&3)<<4|d>>4;let I=(d&15)<<2|y>>6,N=y&63;p||(N=64,h||(I=64)),i.push(t[E],t[T],t[I],t[N])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(P_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):FT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||T==null)throw new UT;const I=l<<2|d>>4;if(i.push(I),y!==64){const N=d<<4&240|y>>2;if(i.push(N),T!==64){const L=y<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(r){const e=P_(r);return k_.encodeByteArray(e,!0)},oc=function(r){return jT(r).replace(/\./g,"")},x_=function(r){try{return k_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=()=>zT().__FIREBASE_DEFAULTS__,$T=()=>{if(typeof process>"u"||typeof Fg>"u")return;const r=Fg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},HT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&x_(r[1]);return e&&JSON.parse(e)},Nc=()=>{try{return BT()||$T()||HT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},N_=r=>{var e,t;return(t=(e=Nc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},qT=r=>{const e=N_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},D_=()=>{var r;return(r=Nc())===null||r===void 0?void 0:r.config},O_=r=>{var e;return(e=Nc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[oc(JSON.stringify(t)),oc(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function QT(){var r;const e=(r=Nc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function JT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZT(){const r=zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function eI(){return!QT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tI(){try{return typeof indexedDB=="object"}catch{return!1}}function nI(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="FirebaseError";class br extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rI,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?iI(l,i):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new br(o,d,i)}}function iI(r,e){return r.replace(sI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const sI=/\{\$([^}]+)}/g;function oI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ac(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Ug(l)&&Ug(h)){if(!ac(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ug(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ha(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function qa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function aI(r,e){const t=new lI(r,e);return t.subscribe.bind(t)}class lI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Nd),o.error===void 0&&(o.error=Nd),o.complete===void 0&&(o.complete=Nd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(r){return r&&r._delegate?r._delegate:r}class fs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new WT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dI(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hI(r){return r===cs?void 0:r}function dI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const pI={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},mI=Pe.INFO,gI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},yI=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=gI[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=mI,this._logHandler=yI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const _I=(r,e)=>e.some(t=>r instanceof t);let jg,zg;function vI(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EI(){return zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,Hd=new WeakMap,V_=new WeakMap,Dd=new WeakMap,Cf=new WeakMap;function wI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(_i(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&L_.set(t,r)}).catch(()=>{}),Cf.set(e,r),e}function TI(r){if(Hd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Hd.set(r,e)}let qd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Hd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||V_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function II(r){qd=r(qd)}function SI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Od(this),e,...t);return V_.set(i,e.sort?e.sort():[e]),_i(i)}:EI().includes(r)?function(...e){return r.apply(Od(this),e),_i(L_.get(this))}:function(...e){return _i(r.apply(Od(this),e))}}function RI(r){return typeof r=="function"?SI(r):(r instanceof IDBTransaction&&TI(r),_I(r,vI())?new Proxy(r,qd):r)}function _i(r){if(r instanceof IDBRequest)return wI(r);if(Dd.has(r))return Dd.get(r);const e=RI(r);return e!==r&&(Dd.set(r,e),Cf.set(e,r)),e}const Od=r=>Cf.get(r);function CI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=_i(h);return i&&h.addEventListener("upgradeneeded",p=>{i(_i(h.result),p.oldVersion,p.newVersion,_i(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const AI=["get","getKey","getAll","getAllKeys","count"],PI=["put","add","delete","clear"],Ld=new Map;function Bg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=PI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||AI.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Ld.set(e,l),l}II(r=>({...r,get:(e,t,i)=>Bg(e,t)||r.get(e,t,i),has:(e,t)=>!!Bg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function xI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wd="@firebase/app",$g="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Rf("@firebase/app"),NI="@firebase/app-compat",DI="@firebase/analytics-compat",OI="@firebase/analytics",LI="@firebase/app-check-compat",VI="@firebase/app-check",MI="@firebase/auth",bI="@firebase/auth-compat",FI="@firebase/database",UI="@firebase/data-connect",jI="@firebase/database-compat",zI="@firebase/functions",BI="@firebase/functions-compat",$I="@firebase/installations",HI="@firebase/installations-compat",qI="@firebase/messaging",WI="@firebase/messaging-compat",KI="@firebase/performance",GI="@firebase/performance-compat",QI="@firebase/remote-config",YI="@firebase/remote-config-compat",XI="@firebase/storage",JI="@firebase/storage-compat",ZI="@firebase/firestore",eS="@firebase/vertexai",tS="@firebase/firestore-compat",nS="firebase",rS="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="[DEFAULT]",iS={[Wd]:"fire-core",[NI]:"fire-core-compat",[OI]:"fire-analytics",[DI]:"fire-analytics-compat",[VI]:"fire-app-check",[LI]:"fire-app-check-compat",[MI]:"fire-auth",[bI]:"fire-auth-compat",[FI]:"fire-rtdb",[UI]:"fire-data-connect",[jI]:"fire-rtdb-compat",[zI]:"fire-fn",[BI]:"fire-fn-compat",[$I]:"fire-iid",[HI]:"fire-iid-compat",[qI]:"fire-fcm",[WI]:"fire-fcm-compat",[KI]:"fire-perf",[GI]:"fire-perf-compat",[QI]:"fire-rc",[YI]:"fire-rc-compat",[XI]:"fire-gcs",[JI]:"fire-gcs-compat",[ZI]:"fire-fst",[tS]:"fire-fst-compat",[eS]:"fire-vertex","fire-js":"fire-js",[nS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new Map,sS=new Map,Gd=new Map;function Hg(r,e){try{r.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Po(r){const e=r.name;if(Gd.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,r);for(const t of lc.values())Hg(t,r);for(const t of sS.values())Hg(t,r);return!0}function Af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Tn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new dl("app","Firebase",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=rS;function M_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Kd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw vi.create("bad-app-name",{appName:String(o)});if(t||(t=D_()),!t)throw vi.create("no-options");const l=lc.get(o);if(l){if(ac(t,l.options)&&ac(i,l.config))return l;throw vi.create("duplicate-app",{appName:o})}const h=new fI(o);for(const p of Gd.values())h.addComponent(p);const d=new aS(t,i,h);return lc.set(o,d),d}function b_(r=Kd){const e=lc.get(r);if(!e&&r===Kd&&D_())return M_();if(!e)throw vi.create("no-app",{appName:r});return e}function Ei(r,e,t){var i;let o=(i=iS[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(d.join(" "));return}Po(new fs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-heartbeat-database",uS=1,nl="firebase-heartbeat-store";let Vd=null;function F_(){return Vd||(Vd=CI(lS,uS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(nl)}catch(t){console.warn(t)}}}}).catch(r=>{throw vi.create("idb-open",{originalErrorMessage:r.message})})),Vd}async function cS(r){try{const t=(await F_()).transaction(nl),i=await t.objectStore(nl).get(U_(r));return await t.done,i}catch(e){if(e instanceof br)Or.warn(e.message);else{const t=vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(t.message)}}}async function qg(r,e){try{const i=(await F_()).transaction(nl,"readwrite");await i.objectStore(nl).put(e,U_(r)),await i.done}catch(t){if(t instanceof br)Or.warn(t.message);else{const i=vi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Or.warn(i.message)}}}function U_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=1024,dS=30;class fS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>dS){const h=gS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Or.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wg(),{heartbeatsToSend:i,unsentEntries:o}=pS(this._heartbeatsCache.heartbeats),l=oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Or.warn(t),""}}}function Wg(){return new Date().toISOString().substring(0,10)}function pS(r,e=hS){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Kg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Kg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tI()?nI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return qg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Kg(r){return oc(JSON.stringify({version:2,heartbeats:r})).length}function gS(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r){Po(new fs("platform-logger",e=>new kI(e),"PRIVATE")),Po(new fs("heartbeat",e=>new fS(e),"PRIVATE")),Ei(Wd,$g,r),Ei(Wd,$g,"esm2017"),Ei("fire-js","")}yS("");function Pf(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function j_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _S=j_,z_=new dl("auth","Firebase",j_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Rf("@firebase/auth");function vS(r,...e){uc.logLevel<=Pe.WARN&&uc.warn(`Auth (${Uo}): ${r}`,...e)}function Qu(r,...e){uc.logLevel<=Pe.ERROR&&uc.error(`Auth (${Uo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(r,...e){throw kf(r,...e)}function nr(r,...e){return kf(r,...e)}function B_(r,e,t){const i=Object.assign(Object.assign({},_S()),{[e]:t});return new dl("auth","Firebase",i).create(e,{appName:r.name})}function Dr(r){return B_(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return z_.create(r,...e)}function _e(r,e,...t){if(!r)throw kf(e,...t)}function Pr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qu(e),new Error(e)}function Lr(r,e){r||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function ES(){return Gg()==="http:"||Gg()==="https:"}function Gg(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ES()||XT()||"connection"in navigator)?navigator.onLine:!0}function TS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=GT()||JT()}get(){return wS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,e){Lr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new pl(3e4,6e4);function Di(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Fr(r,e,t,i,o={}){return H_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const d=fl(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return YT()||(y.referrerPolicy="no-referrer"),$_.fetch()(q_(r,r.config.apiHost,t,d),y)})}async function H_(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},IS),e);try{const o=new CS(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw ju(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ju(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ju(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw ju(r,"user-disabled",h);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw B_(r,E,y);zn(r,E)}}catch(o){if(o instanceof br)throw o;zn(r,"network-request-failed",{message:String(o)})}}async function ml(r,e,t,i,o={}){const l=await Fr(r,e,t,i,o);return"mfaPendingCredential"in l&&zn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function q_(r,e,t,i){const o=`${e}${t}?${i}`;return r.config.emulator?xf(r.config,o):`${r.config.apiScheme}://${o}`}function RS(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),SS.get())})}}function ju(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=nr(r,e,i);return o.customData._tokenResponse=t,o}function Qg(r){return r!==void 0&&r.enterprise!==void 0}class AS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PS(r,e){return Fr(r,"GET","/v2/recaptchaConfig",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(r,e){return Fr(r,"POST","/v1/accounts:delete",e)}async function W_(r,e){return Fr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xS(r,e=!1){const t=Rt(r),i=await t.getIdToken(e),o=Nf(i);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Qa(Md(o.auth_time)),issuedAtTime:Qa(Md(o.iat)),expirationTime:Qa(Md(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Md(r){return Number(r)*1e3}function Nf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Qu("JWT malformed, contained fewer than 3 sections"),null;try{const o=x_(t);return o?JSON.parse(o):(Qu("Failed to decode base64 JWT payload"),null)}catch(o){return Qu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Yg(r){const e=Nf(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof br&&NS(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function NS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(r){var e;const t=r.auth,i=await r.getIdToken(),o=await ko(r,W_(t,{idToken:i}));_e(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?K_(l.providerUserInfo):[],d=LS(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Yd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,T)}async function OS(r){const e=Rt(r);await cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LS(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function K_(r){return r.map(e=>{var{providerId:t}=e,i=Pf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(r,e){const t=await H_(r,{},async()=>{const i=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=q_(r,o,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",$_.fetch()(h,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MS(r,e){return Fr(r,"POST","/v2/accounts:revokeToken",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Yg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await VS(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new So;return i&&(_e(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(_e(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await ko(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xS(this,e)}reload(){return OS(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await ko(this,kS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,h,d,p,y,E;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,I=(o=t.email)!==null&&o!==void 0?o:void 0,N=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(h=t.photoURL)!==null&&h!==void 0?h:void 0,B=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,K=(y=t.createdAt)!==null&&y!==void 0?y:void 0,W=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ee,emailVerified:ae,isAnonymous:Ee,providerData:Te,stsTokenManager:D}=t;_e(ee&&D,e,"internal-error");const S=So.fromJSON(this.name,D);_e(typeof ee=="string",e,"internal-error"),hi(T,e.name),hi(I,e.name),_e(typeof ae=="boolean",e,"internal-error"),_e(typeof Ee=="boolean",e,"internal-error"),hi(N,e.name),hi(L,e.name),hi(B,e.name),hi(U,e.name),hi(K,e.name),hi(W,e.name);const C=new kr({uid:ee,auth:e,email:I,emailVerified:ae,displayName:T,isAnonymous:Ee,photoURL:L,phoneNumber:N,tenantId:B,stsTokenManager:S,createdAt:K,lastLoginAt:W});return Te&&Array.isArray(Te)&&(C.providerData=Te.map(x=>Object.assign({},x))),U&&(C._redirectEventId=U),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new So;o.updateFromServerResponse(t);const l=new kr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?K_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new So;d.updateFromIdToken(i);const p=new kr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Yd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=new Map;function xr(r){Lr(r instanceof Function,"Expected a class definition");let e=Xg.get(r);return e?(Lr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Xg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G_.type="NONE";const Jg=G_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Yu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ro(xr(Jg),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||xr(Jg);const h=Yu(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(h);if(E){const T=kr._fromJSON(e,E);y!==l&&(d=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ro(l,e,i):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ro(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ev(e))return"Blackberry";if(tv(e))return"Webos";if(Y_(e))return"Safari";if((e.includes("chrome/")||X_(e))&&!e.includes("edge/"))return"Chrome";if(Z_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Q_(r=zt()){return/firefox\//i.test(r)}function Y_(r=zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X_(r=zt()){return/crios\//i.test(r)}function J_(r=zt()){return/iemobile/i.test(r)}function Z_(r=zt()){return/android/i.test(r)}function ev(r=zt()){return/blackberry/i.test(r)}function tv(r=zt()){return/webos/i.test(r)}function Df(r=zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bS(r=zt()){var e;return Df(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FS(){return ZT()&&document.documentMode===10}function nv(r=zt()){return Df(r)||Z_(r)||tv(r)||ev(r)||/windows phone/i.test(r)||J_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r,e=[]){let t;switch(r){case"Browser":t=Zg(zt());break;case"Worker":t=`${Zg(zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(r,e={}){return Fr(r,"GET","/v2/passwordPolicy",Di(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=6;class BS{constructor(e){var t,i,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:zS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ey(this),this.idTokenSubscription=new ey(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await W_(this,{idToken:e}),i=await kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Dr(this));const t=e?Rt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jS(this),t=new BS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await MS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Es(r){return Rt(r)}class ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=aI(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HS(r){Dc=r}function iv(r){return Dc.loadJS(r)}function qS(){return Dc.recaptchaEnterpriseScript}function WS(){return Dc.gapiScript}function KS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class GS{constructor(){this.enterprise=new QS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class QS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const YS="recaptcha-enterprise",sv="NO_RECAPTCHA";class XS{constructor(e){this.type=YS,this.auth=Es(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,d)=>{PS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new AS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,h,d){const p=window.grecaptcha;Qg(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(sv)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(d=>{if(!t&&Qg(window.grecaptcha))o(d,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=qS();p.length!==0&&(p+=d),iv(p).then(()=>{o(d,l,h)}).catch(y=>{h(y)})}}).catch(d=>{h(d)})})}}async function ty(r,e,t,i=!1,o=!1){const l=new XS(r);let h;if(o)h=sv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Xd(r,e,t,i,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await ty(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await ty(r,e,t,t==="getOobCode");return i(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(r,e){const t=Af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ac(l,e??{}))return o;zn(o,"already-initialized")}return t.initialize({options:e})}function ZS(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(xr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function e1(r,e,t){const i=Es(r);_e(i._canInitEmulator,i,"emulator-config-failed"),_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=ov(e),{host:h,port:d}=t1(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${h}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),n1()}function ov(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function t1(r){const e=ov(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ny(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:ny(h)}}}function ny(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function n1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,t){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function r1(r,e){return Fr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(r,e){return ml(r,"POST","/v1/accounts:signInWithPassword",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(r,e){return ml(r,"POST","/v1/accounts:signInWithEmailLink",Di(r,e))}async function o1(r,e){return ml(r,"POST","/v1/accounts:signInWithEmailLink",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Of{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new rl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new rl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,t,"signInWithPassword",i1);case"emailLink":return s1(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,i,"signUpPassword",r1);case"emailLink":return o1(e,{idToken:t,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(r,e){return ml(r,"POST","/v1/accounts:signInWithIdp",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="http://localhost";class ps extends Of{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Pf(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ps(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:a1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u1(r){const e=Ha(qa(r)).link,t=e?Ha(qa(e)).deep_link_id:null,i=Ha(qa(r)).deep_link_id;return(i?Ha(qa(i)).link:null)||i||t||e||r}class Lf{constructor(e){var t,i,o,l,h,d;const p=Ha(qa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(i=p.oobCode)!==null&&i!==void 0?i:null,T=l1((o=p.mode)!==null&&o!==void 0?o:null);_e(y&&E&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=u1(e);try{return new Lf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(e,t){return rl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Lf.parseLink(t);return _e(i,"argument-error"),rl._fromEmailAndCode(e,i.code,i.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends av{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends gl{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ps._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return pi.credential(t,i)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends gl{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends gl{constructor(){super("twitter.com")}static credential(e,t){return ps._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gi.credential(t,i)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(r,e){return ml(r,"POST","/v1/accounts:signUp",Di(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await kr._fromIdTokenResponse(e,i,o),h=ry(i);return new ms({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ry(i);return new ms({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends br{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new hc(e,t,i,o)}}function lv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(r,l,e,i):l})}async function h1(r,e,t=!1){const i=await ko(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ms._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(r,e,t=!1){const{auth:i}=r;if(Tn(i.app))return Promise.reject(Dr(i));const o="reauthenticate";try{const l=await ko(r,lv(i,o,e,r),t);_e(l.idToken,i,"internal-error");const h=Nf(l.idToken);_e(h,i,"internal-error");const{sub:d}=h;return _e(r.uid===d,i,"user-mismatch"),ms._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&zn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(r,e,t=!1){if(Tn(r.app))return Promise.reject(Dr(r));const i="signIn",o=await lv(r,i,e),l=await ms._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function f1(r,e){return uv(Es(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(r){const e=Es(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p1(r,e,t){if(Tn(r.app))return Promise.reject(Dr(r));const i=Es(r),h=await Xd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c1).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&cv(r),p}),d=await ms._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(d.user),d}function m1(r,e,t){return Tn(r.app)?Promise.reject(Dr(r)):f1(Rt(r),jo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cv(r),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,e){return Fr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Rt(r),l={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await ko(i,g1(i.auth,l));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function _1(r,e,t,i){return Rt(r).onIdTokenChanged(e,t,i)}function v1(r,e,t){return Rt(r).beforeAuthStateChanged(e,t)}function E1(r,e,t,i){return Rt(r).onAuthStateChanged(e,t,i)}function w1(r){return Rt(r).signOut()}const dc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dc,"1"),this.storage.removeItem(dc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1e3,I1=10;class dv extends hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);FS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,I1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},T1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dv.type="LOCAL";const S1=dv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv extends hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fv.type="SESSION";const pv=fv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(h).map(async y=>y(t.origin,l)),p=await R1(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const y=Vf("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const I=T;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(I.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function A1(r){rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function P1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function x1(){return mv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="firebaseLocalStorageDb",N1=1,fc="firebaseLocalStorage",yv="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([fc],e?"readwrite":"readonly").objectStore(fc)}function D1(){const r=indexedDB.deleteDatabase(gv);return new yl(r).toPromise()}function Jd(){const r=indexedDB.open(gv,N1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(fc,{keyPath:yv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(fc)?e(i):(i.close(),await D1(),e(await Jd()))})})}async function iy(r,e,t){const i=Lc(r,!0).put({[yv]:e,value:t});return new yl(i).toPromise()}async function O1(r,e){const t=Lc(r,!1).get(e),i=await new yl(t).toPromise();return i===void 0?null:i.value}function sy(r,e){const t=Lc(r,!0).delete(e);return new yl(t).toPromise()}const L1=800,V1=3;class _v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>V1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(x1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await P1(),!this.activeServiceWorker)return;this.sender=new C1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jd();return await iy(e,dc,"1"),await sy(e,dc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>O1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new yl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_v.type="LOCAL";const M1=_v;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r,e){return e?xr(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends Of{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function F1(r){return uv(r.auth,new Mf(r),r.bypassAuthState)}function U1(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),d1(t,new Mf(r),r.bypassAuthState)}async function j1(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),h1(t,new Mf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F1;case"linkViaPopup":case"linkViaRedirect":return j1;case"reauthViaPopup":case"reauthViaRedirect":return U1;default:zn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new pl(2e3,1e4);class Io extends vv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=Vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z1.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="pendingRedirect",Xu=new Map;class $1 extends vv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const i=await H1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function H1(r,e){const t=K1(e),i=W1(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function q1(r,e){Xu.set(r._key(),e)}function W1(r){return xr(r._redirectPersistence)}function K1(r){return Yu(B1,r.config.apiKey,r.name)}async function G1(r,e,t=!1){if(Tn(r.app))return Promise.reject(Dr(r));const i=Es(r),o=b1(i,e),h=await new $1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=10*60*1e3;class Y1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Ev(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q1&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Ev({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ev(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(r,e={}){return Fr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eR=/^https?/;async function tR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await J1(r);for(const t of e)try{if(nR(t))return}catch{}zn(r,"unauthorized-domain")}function nR(r){const e=Qd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!eR.test(t))return!1;if(Z1.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new pl(3e4,6e4);function ay(){const r=rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function iR(r){return new Promise((e,t)=>{var i,o,l;function h(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),t(nr(r,"network-request-failed"))},timeout:rR.get()})}if(!((o=(i=rr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=rr().gapi)===null||l===void 0)&&l.load)h();else{const d=KS("iframefcb");return rr()[d]=()=>{gapi.load?h():t(nr(r,"network-request-failed"))},iv(`${WS()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Ju=null,e})}let Ju=null;function sR(r){return Ju=Ju||iR(r),Ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new pl(5e3,15e3),aR="__/auth/iframe",lR="emulator/auth/iframe",uR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hR(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xf(e,lR):`https://${r.config.authDomain}/${aR}`,i={apiKey:e.apiKey,appName:r.name,v:Uo},o=cR.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${fl(i).slice(1)}`}async function dR(r){const e=await sR(r),t=rr().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:hR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uR,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=nr(r,"network-request-failed"),d=rr().setTimeout(()=>{l(h)},oR.get());function p(){rr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pR=500,mR=600,gR="_blank",yR="http://localhost";class ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _R(r,e,t,i=pR,o=mR){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},fR),{width:i.toString(),height:o.toString(),top:l,left:h}),y=zt().toLowerCase();t&&(d=X_(y)?gR:t),Q_(y)&&(e=e||yR,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[N,L])=>`${I}${N}=${L},`,"");if(bS(y)&&d!=="_self")return vR(e||"",d),new ly(null);const T=window.open(e||"",d,E);_e(T,r,"popup-blocked");try{T.focus()}catch{}return new ly(T)}function vR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="__/auth/handler",wR="emulator/auth/handler",TR=encodeURIComponent("fac");async function uy(r,e,t,i,o,l){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Uo,eventId:o};if(e instanceof av){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",oI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof gl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const d=h;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await r._getAppCheckToken(),y=p?`#${TR}=${encodeURIComponent(p)}`:"";return`${IR(r)}?${fl(d).slice(1)}${y}`}function IR({config:r}){return r.emulator?xf(r,wR):`https://${r.authDomain}/${ER}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="webStorageSupport";class SR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pv,this._completeRedirectFn=G1,this._overrideRedirectResult=q1}async _openPopup(e,t,i,o){var l;Lr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await uy(e,t,i,Qd(),o);return _R(e,h,Vf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await uy(e,t,i,Qd(),o);return A1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await dR(e),i=new Y1(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bd,{type:bd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[bd];h!==void 0&&t(!!h),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nv()||Y_()||Df()}}const RR=SR;var cy="@firebase/auth",hy="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PR(r){Po(new fs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=i.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:h,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rv(r)},y=new $S(i,o,l,p);return ZS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Po(new fs("auth-internal",e=>{const t=Es(e.getProvider("auth").getImmediate());return(i=>new CR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(cy,hy,AR(r)),Ei(cy,hy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=5*60,xR=O_("authIdTokenMaxAge")||kR;let dy=null;const NR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>xR)return;const o=t==null?void 0:t.token;dy!==o&&(dy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DR(r=b_()){const e=Af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=JS(r,{popupRedirectResolver:RR,persistence:[M1,S1,pv]}),i=O_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=NR(l.toString());v1(t,h,()=>h(t.currentUser)),_1(t,d=>h(d))}}const o=N_("auth");return o&&e1(t,`http://${o}`),t}function OR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}HS({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=nr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",OR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PR("Browser");var LR="firebase",VR="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(LR,VR,"app");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,wv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function C(){}C.prototype=S.prototype,D.D=S.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(x,V,F){for(var A=Array(arguments.length-2),et=2;et<arguments.length;et++)A[et-2]=arguments[et];return S.prototype[V].apply(x,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,C){C||(C=0);var x=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)x[V]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(V=0;16>V;++V)x[V]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=D.g[0],C=D.g[1],V=D.g[2];var F=D.g[3],A=S+(F^C&(V^F))+x[0]+3614090360&4294967295;S=C+(A<<7&4294967295|A>>>25),A=F+(V^S&(C^V))+x[1]+3905402710&4294967295,F=S+(A<<12&4294967295|A>>>20),A=V+(C^F&(S^C))+x[2]+606105819&4294967295,V=F+(A<<17&4294967295|A>>>15),A=C+(S^V&(F^S))+x[3]+3250441966&4294967295,C=V+(A<<22&4294967295|A>>>10),A=S+(F^C&(V^F))+x[4]+4118548399&4294967295,S=C+(A<<7&4294967295|A>>>25),A=F+(V^S&(C^V))+x[5]+1200080426&4294967295,F=S+(A<<12&4294967295|A>>>20),A=V+(C^F&(S^C))+x[6]+2821735955&4294967295,V=F+(A<<17&4294967295|A>>>15),A=C+(S^V&(F^S))+x[7]+4249261313&4294967295,C=V+(A<<22&4294967295|A>>>10),A=S+(F^C&(V^F))+x[8]+1770035416&4294967295,S=C+(A<<7&4294967295|A>>>25),A=F+(V^S&(C^V))+x[9]+2336552879&4294967295,F=S+(A<<12&4294967295|A>>>20),A=V+(C^F&(S^C))+x[10]+4294925233&4294967295,V=F+(A<<17&4294967295|A>>>15),A=C+(S^V&(F^S))+x[11]+2304563134&4294967295,C=V+(A<<22&4294967295|A>>>10),A=S+(F^C&(V^F))+x[12]+1804603682&4294967295,S=C+(A<<7&4294967295|A>>>25),A=F+(V^S&(C^V))+x[13]+4254626195&4294967295,F=S+(A<<12&4294967295|A>>>20),A=V+(C^F&(S^C))+x[14]+2792965006&4294967295,V=F+(A<<17&4294967295|A>>>15),A=C+(S^V&(F^S))+x[15]+1236535329&4294967295,C=V+(A<<22&4294967295|A>>>10),A=S+(V^F&(C^V))+x[1]+4129170786&4294967295,S=C+(A<<5&4294967295|A>>>27),A=F+(C^V&(S^C))+x[6]+3225465664&4294967295,F=S+(A<<9&4294967295|A>>>23),A=V+(S^C&(F^S))+x[11]+643717713&4294967295,V=F+(A<<14&4294967295|A>>>18),A=C+(F^S&(V^F))+x[0]+3921069994&4294967295,C=V+(A<<20&4294967295|A>>>12),A=S+(V^F&(C^V))+x[5]+3593408605&4294967295,S=C+(A<<5&4294967295|A>>>27),A=F+(C^V&(S^C))+x[10]+38016083&4294967295,F=S+(A<<9&4294967295|A>>>23),A=V+(S^C&(F^S))+x[15]+3634488961&4294967295,V=F+(A<<14&4294967295|A>>>18),A=C+(F^S&(V^F))+x[4]+3889429448&4294967295,C=V+(A<<20&4294967295|A>>>12),A=S+(V^F&(C^V))+x[9]+568446438&4294967295,S=C+(A<<5&4294967295|A>>>27),A=F+(C^V&(S^C))+x[14]+3275163606&4294967295,F=S+(A<<9&4294967295|A>>>23),A=V+(S^C&(F^S))+x[3]+4107603335&4294967295,V=F+(A<<14&4294967295|A>>>18),A=C+(F^S&(V^F))+x[8]+1163531501&4294967295,C=V+(A<<20&4294967295|A>>>12),A=S+(V^F&(C^V))+x[13]+2850285829&4294967295,S=C+(A<<5&4294967295|A>>>27),A=F+(C^V&(S^C))+x[2]+4243563512&4294967295,F=S+(A<<9&4294967295|A>>>23),A=V+(S^C&(F^S))+x[7]+1735328473&4294967295,V=F+(A<<14&4294967295|A>>>18),A=C+(F^S&(V^F))+x[12]+2368359562&4294967295,C=V+(A<<20&4294967295|A>>>12),A=S+(C^V^F)+x[5]+4294588738&4294967295,S=C+(A<<4&4294967295|A>>>28),A=F+(S^C^V)+x[8]+2272392833&4294967295,F=S+(A<<11&4294967295|A>>>21),A=V+(F^S^C)+x[11]+1839030562&4294967295,V=F+(A<<16&4294967295|A>>>16),A=C+(V^F^S)+x[14]+4259657740&4294967295,C=V+(A<<23&4294967295|A>>>9),A=S+(C^V^F)+x[1]+2763975236&4294967295,S=C+(A<<4&4294967295|A>>>28),A=F+(S^C^V)+x[4]+1272893353&4294967295,F=S+(A<<11&4294967295|A>>>21),A=V+(F^S^C)+x[7]+4139469664&4294967295,V=F+(A<<16&4294967295|A>>>16),A=C+(V^F^S)+x[10]+3200236656&4294967295,C=V+(A<<23&4294967295|A>>>9),A=S+(C^V^F)+x[13]+681279174&4294967295,S=C+(A<<4&4294967295|A>>>28),A=F+(S^C^V)+x[0]+3936430074&4294967295,F=S+(A<<11&4294967295|A>>>21),A=V+(F^S^C)+x[3]+3572445317&4294967295,V=F+(A<<16&4294967295|A>>>16),A=C+(V^F^S)+x[6]+76029189&4294967295,C=V+(A<<23&4294967295|A>>>9),A=S+(C^V^F)+x[9]+3654602809&4294967295,S=C+(A<<4&4294967295|A>>>28),A=F+(S^C^V)+x[12]+3873151461&4294967295,F=S+(A<<11&4294967295|A>>>21),A=V+(F^S^C)+x[15]+530742520&4294967295,V=F+(A<<16&4294967295|A>>>16),A=C+(V^F^S)+x[2]+3299628645&4294967295,C=V+(A<<23&4294967295|A>>>9),A=S+(V^(C|~F))+x[0]+4096336452&4294967295,S=C+(A<<6&4294967295|A>>>26),A=F+(C^(S|~V))+x[7]+1126891415&4294967295,F=S+(A<<10&4294967295|A>>>22),A=V+(S^(F|~C))+x[14]+2878612391&4294967295,V=F+(A<<15&4294967295|A>>>17),A=C+(F^(V|~S))+x[5]+4237533241&4294967295,C=V+(A<<21&4294967295|A>>>11),A=S+(V^(C|~F))+x[12]+1700485571&4294967295,S=C+(A<<6&4294967295|A>>>26),A=F+(C^(S|~V))+x[3]+2399980690&4294967295,F=S+(A<<10&4294967295|A>>>22),A=V+(S^(F|~C))+x[10]+4293915773&4294967295,V=F+(A<<15&4294967295|A>>>17),A=C+(F^(V|~S))+x[1]+2240044497&4294967295,C=V+(A<<21&4294967295|A>>>11),A=S+(V^(C|~F))+x[8]+1873313359&4294967295,S=C+(A<<6&4294967295|A>>>26),A=F+(C^(S|~V))+x[15]+4264355552&4294967295,F=S+(A<<10&4294967295|A>>>22),A=V+(S^(F|~C))+x[6]+2734768916&4294967295,V=F+(A<<15&4294967295|A>>>17),A=C+(F^(V|~S))+x[13]+1309151649&4294967295,C=V+(A<<21&4294967295|A>>>11),A=S+(V^(C|~F))+x[4]+4149444226&4294967295,S=C+(A<<6&4294967295|A>>>26),A=F+(C^(S|~V))+x[11]+3174756917&4294967295,F=S+(A<<10&4294967295|A>>>22),A=V+(S^(F|~C))+x[2]+718787259&4294967295,V=F+(A<<15&4294967295|A>>>17),A=C+(F^(V|~S))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+F&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var C=S-this.blockSize,x=this.B,V=this.h,F=0;F<S;){if(V==0)for(;F<=C;)o(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<S;)if(x[V++]=D.charCodeAt(F++),V==this.blockSize){o(this,x),V=0;break}}else for(;F<S;)if(x[V++]=D[F++],V==this.blockSize){o(this,x),V=0;break}}this.h=V,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var C=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=C&255,C/=256;for(this.u(D),D=Array(16),S=C=0;4>S;++S)for(var x=0;32>x;x+=8)D[C++]=this.g[S]>>>x&255;return D};function l(D,S){var C=d;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=S(D)}function h(D,S){this.h=S;for(var C=[],x=!0,V=D.length-1;0<=V;V--){var F=D[V]|0;x&&F==S||(C[V]=F,x=!1)}this.g=C}var d={};function p(D){return-128<=D&&128>D?l(D,function(S){return new h([S|0],0>S?-1:0)}):new h([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return U(y(-D));for(var S=[],C=1,x=0;D>=C;x++)S[x]=D/C|0,C*=4294967296;return new h(S,0)}function E(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return U(E(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(S,8)),x=T,V=0;V<D.length;V+=8){var F=Math.min(8,D.length-V),A=parseInt(D.substring(V,V+F),S);8>F?(F=y(Math.pow(S,F)),x=x.j(F).add(y(A))):(x=x.j(C),x=x.add(y(A)))}return x}var T=p(0),I=p(1),N=p(16777216);r=h.prototype,r.m=function(){if(B(this))return-U(this).m();for(var D=0,S=1,C=0;C<this.g.length;C++){var x=this.i(C);D+=(0<=x?x:4294967296+x)*S,S*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(L(this))return"0";if(B(this))return"-"+U(this).toString(D);for(var S=y(Math.pow(D,6)),C=this,x="";;){var V=ae(C,S).g;C=K(C,V.j(S));var F=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=V,L(C))return F+x;for(;6>F.length;)F="0"+F;x=F+x}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function L(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function B(D){return D.h==-1}r.l=function(D){return D=K(this,D),B(D)?-1:L(D)?0:1};function U(D){for(var S=D.g.length,C=[],x=0;x<S;x++)C[x]=~D.g[x];return new h(C,~D.h).add(I)}r.abs=function(){return B(this)?U(this):this},r.add=function(D){for(var S=Math.max(this.g.length,D.g.length),C=[],x=0,V=0;V<=S;V++){var F=x+(this.i(V)&65535)+(D.i(V)&65535),A=(F>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);x=A>>>16,F&=65535,A&=65535,C[V]=A<<16|F}return new h(C,C[C.length-1]&-2147483648?-1:0)};function K(D,S){return D.add(U(S))}r.j=function(D){if(L(this)||L(D))return T;if(B(this))return B(D)?U(this).j(U(D)):U(U(this).j(D));if(B(D))return U(this.j(U(D)));if(0>this.l(N)&&0>D.l(N))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,C=[],x=0;x<2*S;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(var V=0;V<D.g.length;V++){var F=this.i(x)>>>16,A=this.i(x)&65535,et=D.i(V)>>>16,Fe=D.i(V)&65535;C[2*x+2*V]+=A*Fe,W(C,2*x+2*V),C[2*x+2*V+1]+=F*Fe,W(C,2*x+2*V+1),C[2*x+2*V+1]+=A*et,W(C,2*x+2*V+1),C[2*x+2*V+2]+=F*et,W(C,2*x+2*V+2)}for(x=0;x<S;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=S;x<2*S;x++)C[x]=0;return new h(C,0)};function W(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function ee(D,S){this.g=D,this.h=S}function ae(D,S){if(L(S))throw Error("division by zero");if(L(D))return new ee(T,T);if(B(D))return S=ae(U(D),S),new ee(U(S.g),U(S.h));if(B(S))return S=ae(D,U(S)),new ee(U(S.g),S.h);if(30<D.g.length){if(B(D)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var C=I,x=S;0>=x.l(D);)C=Ee(C),x=Ee(x);var V=Te(C,1),F=Te(x,1);for(x=Te(x,2),C=Te(C,2);!L(x);){var A=F.add(x);0>=A.l(D)&&(V=V.add(C),F=A),x=Te(x,1),C=Te(C,1)}return S=K(D,V.j(S)),new ee(V,S)}for(V=T;0<=D.l(S);){for(C=Math.max(1,Math.floor(D.m()/S.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),F=y(C),A=F.j(S);B(A)||0<A.l(D);)C-=x,F=y(C),A=F.j(S);L(F)&&(F=I),V=V.add(F),D=K(D,A)}return new ee(V,D)}r.A=function(D){return ae(this,D).h},r.and=function(D){for(var S=Math.max(this.g.length,D.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)&D.i(x);return new h(C,this.h&D.h)},r.or=function(D){for(var S=Math.max(this.g.length,D.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)|D.i(x);return new h(C,this.h|D.h)},r.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),C=[],x=0;x<S;x++)C[x]=this.i(x)^D.i(x);return new h(C,this.h^D.h)};function Ee(D){for(var S=D.g.length+1,C=[],x=0;x<S;x++)C[x]=D.i(x)<<1|D.i(x-1)>>>31;return new h(C,D.h)}function Te(D,S){var C=S>>5;S%=32;for(var x=D.g.length-C,V=[],F=0;F<x;F++)V[F]=0<S?D.i(F+C)>>>S|D.i(F+C+1)<<32-S:D.i(F+C);return new h(V,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,wi=h}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tv,Wa,Iv,Zu,Zd,Sv,Rv,Cv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var w=0;w<u.length-1;w++){var j=u[w];if(!(j in _))break e;_=_[j]}u=u[u.length-1],w=_[u],m=m(w),m!=w&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,w=!1,j={next:function(){if(!w&&_<u.length){var q=_++;return{value:m(q,u[q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function I(u,m,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,I.apply(null,arguments)}function N(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function L(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,j,q){for(var ne=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ne[Be-2]=arguments[Be];return m.prototype[j].apply(w,ne)}}function B(u){const m=u.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=u[w];return _}return[]}function U(u,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const j=u.length||0,q=w.length||0;u.length=j+q;for(let ne=0;ne<q;ne++)u[j+ne]=w[ne]}else u.push(w)}}class K{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function W(u){return/^[\s\xa0]*$/.test(u)}function ee(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ae(u){return ae[" "](u),u}ae[" "]=function(){};var Ee=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Te(u,m,_){for(const w in u)m.call(_,u[w],w,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let _,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(_ in w)u[_]=w[_];for(let q=0;q<C.length;q++)_=C[q],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function F(u){d.setTimeout(()=>{throw u},0)}function A(){var u=pe;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class et{constructor(){this.h=this.g=null}add(m,_){const w=Fe.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Fe=new K(()=>new He,u=>u.reset());class He{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let De,re=!1,pe=new et,se=()=>{const u=d.Promise.resolve(void 0);De=()=>{u.then(b)}};var b=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){F(_)}var m=Fe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u}();function Ce(u,m){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Ee){e:{try{ae(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}L(Ce,de);var Oe={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),je=0;function qe(u,m,_,w,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=j,this.key=++je,this.da=this.fa=!1}function vt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ur(u){this.src=u,this.g={},this.h=0}ur.prototype.add=function(u,m,_,w,j){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ne=jr(u,m,w,j);return-1<ne?(m=u[ne],_||(m.fa=!1)):(m=new qe(m,this.src,q,!!w,j),m.fa=_,u.push(m)),m};function Is(u,m){var _=m.type;if(_ in u.g){var w=u.g[_],j=Array.prototype.indexOf.call(w,m,void 0),q;(q=0<=j)&&Array.prototype.splice.call(w,j,1),q&&(vt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function jr(u,m,_,w){for(var j=0;j<u.length;++j){var q=u[j];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==w)return j}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Ss={};function Ko(u,m,_,w,j){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Ko(u,m[q],_,w,j);return null}return _=Yo(_),u&&u[Ue]?u.K(m,_,y(w)?!!w.capture:!!w,j):Go(u,m,_,!1,w,j)}function Go(u,m,_,w,j,q){if(!m)throw Error("Invalid event type");var ne=y(j)?!!j.capture:!!j,Be=Cs(u);if(Be||(u[Mi]=Be=new ur(u)),_=Be.add(m,_,w,ne,q),_.proxy)return _;if(w=Il(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)Re||(j=ne),j===void 0&&(j=!1),u.addEventListener(m.toString(),w,j);else if(u.attachEvent)u.attachEvent(hr(m.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Il(){function u(_){return m.call(u.src,u.listener,_)}const m=Qo;return u}function Rs(u,m,_,w,j){if(Array.isArray(m))for(var q=0;q<m.length;q++)Rs(u,m[q],_,w,j);else w=y(w)?!!w.capture:!!w,_=Yo(_),u&&u[Ue]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],_=jr(q,_,w,j),-1<_&&(vt(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Cs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=jr(m,_,w,j)),(_=-1<u?m[u]:null)&&cr(_))}function cr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])Is(m.i,u);else{var _=u.type,w=u.proxy;m.removeEventListener?m.removeEventListener(_,w,u.capture):m.detachEvent?m.detachEvent(hr(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=Cs(m))?(Is(_,u),_.h==0&&(_.src=null,m[Mi]=null)):vt(u)}}}function hr(u){return u in Ss?Ss[u]:Ss[u]="on"+u}function Qo(u,m){if(u.da)u=!0;else{m=new Ce(m,this);var _=u.listener,w=u.ha||u.src;u.fa&&cr(u),u=_.call(w,m)}return u}function Cs(u){return u=u[Mi],u instanceof ur?u:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yo(u){return typeof u=="function"?u:(u[As]||(u[As]=function(m){return u.handleEvent(m)}),u[As])}function ht(){Q.call(this),this.i=new ur(this),this.M=this,this.F=null}L(ht,Q),ht.prototype[Ue]=!0,ht.prototype.removeEventListener=function(u,m,_,w){Rs(this,u,m,_,w)};function dt(u,m){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=m.type||m,typeof m=="string")m=new de(m,u);else if(m instanceof de)m.target=m.target||u;else{var j=m;m=new de(w,u),x(m,j)}if(j=!0,_)for(var q=_.length-1;0<=q;q--){var ne=m.g=_[q];j=dr(ne,w,!0,m)&&j}if(ne=m.g=u,j=dr(ne,w,!0,m)&&j,j=dr(ne,w,!1,m)&&j,_)for(q=0;q<_.length;q++)ne=m.g=_[q],j=dr(ne,w,!1,m)&&j}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],w=0;w<_.length;w++)vt(_[w]);delete u.g[m],u.h--}}this.F=null},ht.prototype.K=function(u,m,_,w){return this.i.add(String(u),m,!1,_,w)},ht.prototype.L=function(u,m,_,w){return this.i.add(String(u),m,!0,_,w)};function dr(u,m,_,w){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,q=0;q<m.length;++q){var ne=m[q];if(ne&&!ne.da&&ne.capture==_){var Be=ne.listener,ft=ne.ha||ne.src;ne.fa&&Is(u.i,ne),j=Be.call(ft,w)!==!1&&j}}return j&&!w.defaultPrevented}function Xo(u,m,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function zr(u){u.g=Xo(()=>{u.g=null,u.i&&(u.i=!1,zr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bi extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:zr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(u){Q.call(this),this.h=u,this.g={}}L(Fi,Q);var Jo=[];function Zo(u){Te(u.g,function(m,_){this.g.hasOwnProperty(_)&&cr(m)},u),u.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Zo(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ea=d.JSON.stringify,ta=d.JSON.parse,na=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ui(){}Ui.prototype.h=null;function Ps(u){return u.h||(u.h=u.i())}function ks(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){de.call(this,"d")}L(Hn,de);function xs(){de.call(this,"c")}L(xs,de);var qn={},ra=null;function ji(){return ra=ra||new ht}qn.La="serverreachability";function ia(u){de.call(this,qn.La,u)}L(ia,de);function fr(u){const m=ji();dt(m,new ia(m))}qn.STAT_EVENT="statevent";function sa(u,m){de.call(this,qn.STAT_EVENT,u),this.stat=m}L(sa,de);function st(u){const m=ji();dt(m,new sa(m,u))}qn.Ma="timingevent";function Ns(u,m){de.call(this,qn.Ma,u),this.size=m}L(Ns,de);function Rn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function Bi(u,m,_,w,j,q){u.info(function(){if(u.g)if(q)for(var ne="",Be=q.split("&"),ft=0;ft<Be.length;ft++){var Le=Be[ft].split("=");if(1<Le.length){var Et=Le[0];Le=Le[1];var lt=Et.split("_");ne=2<=lt.length&&lt[1]=="type"?ne+(Et+"="+Le+"&"):ne+(Et+"=redacted&")}}else ne=null;else ne=q;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+m+`
`+_+`
`+ne})}function Ds(u,m,_,w,j,q,ne){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+m+`
`+_+`
`+q+" "+ne})}function Cn(u,m,_,w){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jc(u,_)+(w?" "+w:"")})}function oa(u,m){u.info(function(){return"TIMEOUT: "+m})}zi.prototype.info=function(){};function Jc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var q=j[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ne=1;ne<j.length;ne++)j[ne]=""}}}}return ea(_)}catch{return m}}var Os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},An;function $i(){}L($i,Ui),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},An=new $i;function Pn(u,m,_,w){this.j=u,this.i=m,this.l=_,this.R=w||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var aa={},Ls={};function Vs(u,m,_){u.L=1,u.v=Wr(rn(m)),u.m=_,u.P=!0,la(u,null)}function la(u,m){u.F=Date.now(),We(u),u.A=rn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Gr(_.i,"t",w),u.C=0,_=u.j.J,u.h=new Rl,u.g=$l(u.j,_?m:null,!u.m),0<u.O&&(u.M=new bi(I(u.Y,u,u.g),u.O)),m=u.U,_=u.g,w=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Jo[0]=j.toString()),j=Jo);for(var q=0;q<j.length;q++){var ne=Ko(_,j[q],w||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),fr(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}Pn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Kt(u)==3?m.j():this.Y(u)},Pn.prototype.Y=function(u){try{if(u==this.g)e:{const lt=Kt(this.g);var m=this.g.Ba();const pn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||pa(this.g)))){this.J||lt!=4||m==7||(m==8||0>=pn?fr(3):fr(2)),Hi(this);var _=this.g.Z();this.X=_;t:if(Cl(this)){var w=pa(this.g);u="";var j=w.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Br(this);var ne="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(w[m],{stream:!(q&&m==j-1)});w.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,Ds(this.i,this.u,this.A,this.l,this.R,lt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,ft=this.g;if((Be=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Be)){var Le=Be;break t}}Le=null}if(_=Le)Cn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ua(this,_);else{this.o=!1,this.s=3,st(12),dn(this),Br(this);break e}}if(this.P){_=!0;let on;for(;!this.J&&this.C<ne.length;)if(on=Zc(this,ne),on==Ls){lt==4&&(this.s=4,st(14),_=!1),Cn(this.i,this.l,null,"[Incomplete Response]");break}else if(on==aa){this.s=4,st(15),Cn(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else Cn(this.i,this.l,on,null),ua(this,on);if(Cl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ne.length!=0||this.h.h||(this.s=1,st(16),_=!1),this.o=this.o&&_,!_)Cn(this.i,this.l,ne,"[Invalid Chunked Response]"),dn(this),Br(this);else if(0<ne.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ga(Et),Et.M=!0,st(11))}}else Cn(this.i,this.l,ne,null),ua(this,ne);lt==4&&dn(this),this.o&&!this.J&&(lt==4?Ws(this.j,this):(this.o=!1,We(this)))}else zs(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),dn(this),Br(this)}}}catch{}finally{}};function Cl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Zc(u,m){var _=u.C,w=m.indexOf(`
`,_);return w==-1?Ls:(_=Number(m.substring(_,w)),isNaN(_)?aa:(w+=1,w+_>m.length?Ls:(m=m.slice(w,w+_),u.C=w+_,m)))}Pn.prototype.cancel=function(){this.J=!0,dn(this)};function We(u){u.S=Date.now()+u.I,Al(u,u.I)}function Al(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Rn(I(u.ba,u),m)}function Hi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Pn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(oa(this.i,this.A),this.L!=2&&(fr(),st(17)),dn(this),this.s=2,Br(this)):Al(this,this.S-u)};function Br(u){u.j.G==0||u.J||Ws(u.j,u)}function dn(u){Hi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Zo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ua(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Bt(_.h,u))){if(!u.K&&Bt(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)qs(_),On(_);else break e;Hs(_),st(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Rn(I(_.Za,_),6e3));if(1>=kl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else _r(_,11)}else if((u.K||_.g==u)&&qs(_),!W(m))for(j=_.Da.g.parse(m),m=0;m<j.length;m++){let Le=j[m];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Et=Le[3];Et!=null&&(_.la=Et,_.j.info("VER="+_.la));const lt=Le[4];lt!=null&&(_.Aa=lt,_.j.info("SVER="+_.Aa));const pn=Le[5];pn!=null&&typeof pn=="number"&&0<pn&&(w=1.5*pn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const on=u.g;if(on){const Xi=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var q=w.h;q.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ca(q,q.h),q.h=null))}if(w.D){const Gs=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(w.ya=Gs,$e(w.I,w.D,Gs))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ne=u;if(w.qa=Bl(w,w.J?w.ia:null,w.W),ne.K){xl(w.h,ne);var Be=ne,ft=w.L;ft&&(Be.I=ft),Be.B&&(Hi(Be),We(Be)),w.g=ne}else Yi(w);0<_.i.length&&Qn(_)}else Le[0]!="stop"&&Le[0]!="close"||_r(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?_r(_,7):At(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}fr(4)}catch{}}var Pl=class{constructor(u,m){this.g=u,this.map=m}};function qi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function kl(u){return u.h?1:u.g?u.g.size:0}function Bt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ca(u,m){u.g?u.g.add(m):u.h=m}function xl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}qi.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Nl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return B(u.i)}function Ms(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,w=0;w<_;w++)m.push(u[w]);return m}m=[],_=0;for(w in u)m[_++]=u[w];return m}function bs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const w in u)m[_++]=w;return m}}}function $r(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=bs(u),w=Ms(u),j=w.length,q=0;q<j;q++)m.call(void 0,w[q],_&&_[q],u)}var Wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),j=null;if(0<=w){var q=u[_].substring(0,w);j=u[_].substring(w+1)}else q=u[_];m(q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function pr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof pr){this.h=u.h,Ki(this,u.j),this.o=u.o,this.g=u.g,Hr(this,u.s),this.l=u.l;var m=u.i,_=new Wn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),qr(this,_),this.m=u.m}else u&&(m=String(u).match(Wi))?(this.h=!1,Ki(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),Hr(this,m[4]),this.l=xe(m[5]||"",!0),qr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}pr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Kr(m,Fs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Kr(m,Fs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Kr(_,_.charAt(0)=="/"?Ll:Ol,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Kr(_,ha)),u.join("")};function rn(u){return new pr(u)}function Ki(u,m,_){u.j=_?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Hr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function qr(u,m,_){m instanceof Wn?(u.i=m,Kn(u.i,u.h)):(_||(m=Kr(m,Vl)),u.i=new Wn(m,u.h))}function $e(u,m,_){u.i.set(m,_)}function Wr(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Kr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Dl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fs=/[#\/\?@]/g,Ol=/[#\?:]/g,Ll=/[#\?]/g,Vl=/[#\?@]/g,ha=/#/g;function Wn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ct(u){u.g||(u.g=new Map,u.h=0,u.i&&eh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Wn.prototype,r.add=function(u,m){Ct(this),this.i=null,u=fn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function kn(u,m){Ct(u),m=fn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function xn(u,m){return Ct(u),m=fn(u,m),u.g.has(m)}r.forEach=function(u,m){Ct(this),this.g.forEach(function(_,w){_.forEach(function(j){u.call(m,j,w,this)},this)},this)},r.na=function(){Ct(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const j=u[w];for(let q=0;q<j.length;q++)_.push(m[w])}return _},r.V=function(u){Ct(this);let m=[];if(typeof u=="string")xn(this,u)&&(m=m.concat(this.g.get(fn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Ct(this),this.i=null,u=fn(this,u),xn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Gr(u,m,_){kn(u,m),0<_.length&&(u.i=null,u.g.set(fn(u,m),B(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const q=encodeURIComponent(String(w)),ne=this.V(w);for(w=0;w<ne.length;w++){var j=q;ne[w]!==""&&(j+="="+encodeURIComponent(String(ne[w]))),u.push(j)}}return this.i=u.join("&")};function fn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Kn(u,m){m&&!u.j&&(Ct(u),u.i=null,u.g.forEach(function(_,w){var j=w.toLowerCase();w!=j&&(kn(this,w),Gr(this,j,_))},u)),u.j=m}function th(u,m){const _=new zi;if(d.Image){const w=new Image;w.onload=N(Wt,_,"TestLoadImage: loaded",!0,m,w),w.onerror=N(Wt,_,"TestLoadImage: error",!1,m,w),w.onabort=N(Wt,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=N(Wt,_,"TestLoadImage: timeout",!1,m,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else m(!1)}function Ml(u,m){const _=new zi,w=new AbortController,j=setTimeout(()=>{w.abort(),Wt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:w.signal}).then(q=>{clearTimeout(j),q.ok?Wt(_,"TestPingServer: ok",!0,m):Wt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Wt(_,"TestPingServer: error",!1,m)})}function Wt(u,m,_,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(_)}catch{}}function nh(){this.g=new na}function bl(u,m,_){const w=_||"";try{$r(u,function(j,q){let ne=j;y(j)&&(ne=ea(j)),m.push(w+q+"="+encodeURIComponent(ne))})}catch(j){throw m.push(w+"type="+encodeURIComponent("_badmap")),j}}function mr(u){this.l=u.Ub||null,this.j=u.eb||!1}L(mr,Ui),mr.prototype.g=function(){return new Gi(this.l,this.j)},mr.prototype.i=function(u){return function(){return u}}({});function Gi(u,m){ht.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Gi,ht),r=Gi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Dn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Dn(this)),this.g&&(this.readyState=3,Dn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Nn(this):Dn(this),this.readyState==3&&Fl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Nn(this))},r.Qa=function(u){this.g&&(this.response=u,Nn(this))},r.ga=function(){this.g&&Nn(this)};function Nn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Dn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Dn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function gr(u){let m="";return Te(u,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function Qr(u,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=gr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):$e(u,m,_))}function Ye(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Ye,ht);var rh=/^https?$/i,da=["POST","PUT"];r=Ye.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():An.g(),this.v=this.o?Ps(this.o):Ps(An),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){Qi(this,q);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)_.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const q of w.keys())_.set(q,w.get(q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(da,m,void 0))||w||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ne]of _)this.g.setRequestHeader(q,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Qi(this,q)}};function Qi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Us(u),sn(u)}function Us(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dt(this,"complete"),dt(this,"abort"),sn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sn(this,!0)),Ye.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},r.bb=function(){fa(this)};function fa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)Xo(u.Ea,0,u);else if(dt(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=ne===0){var j=String(u.D).match(Wi)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),w=!rh.test(j?j.toLowerCase():"")}_=w}if(_)dt(u,"complete"),dt(u,"success");else{u.m=6;try{var q=2<Kt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Us(u)}}finally{sn(u)}}}}function sn(u,m){if(u.g){js(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||dt(u,"ready");try{_.onreadystatechange=w}catch{}}}function js(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ta(m)}};function pa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zs(u){const m={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(W(u[w]))continue;var _=V(u[w]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[j]||[];m[j]=q,q.push(_)}D(m,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ma(u){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gn("baseRetryDelayMs",5e3,u),this.cb=Gn("retryDelaySeedMs",1e4,u),this.Wa=Gn("forwardChannelMaxRetries",2,u),this.wa=Gn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qi(u&&u.concurrentRequestLimit),this.Da=new nh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ma.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,w){st(0),this.W=u,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Bl(this,null,this.W),Qn(this)};function At(u){if(Bs(u),u.G==3){var m=u.U++,_=rn(u.I);if($e(_,"SID",u.K),$e(_,"RID",m),$e(_,"TYPE","terminate"),yr(u,_),m=new Pn(u,u.j,m),m.L=2,m.v=Wr(rn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=$l(m.j,null),m.g.ea(m.v)),m.F=Date.now(),We(m)}zl(u)}function On(u){u.g&&(ga(u),u.g.cancel(),u.g=null)}function Bs(u){On(u),u.u&&(d.clearTimeout(u.u),u.u=null),qs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Qn(u){if(!nn(u.h)&&!u.s){u.s=!0;var m=u.Ga;De||se(),re||(De(),re=!0),pe.add(m,u),u.B=0}}function ih(u,m){return kl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Rn(I(u.Ga,u,m),jl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Pn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=S(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(j.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Yr(this,j,m),_=rn(this.I),$e(_,"RID",u),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),yr(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(gr(q)))+"&"+m:this.m&&Qr(_,this.m,q)),ca(this.h,j),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",m),$e(_,"SID","null"),j.T=!0,Vs(j,_,null)):Vs(j,_,m),this.G=2}}else this.G==3&&(u?$s(this,u):this.i.length==0||nn(this.h)||$s(this))};function $s(u,m){var _;m?_=m.l:_=u.U++;const w=rn(u.I);$e(w,"SID",u.K),$e(w,"RID",_),$e(w,"AID",u.T),yr(u,w),u.m&&u.o&&Qr(w,u.m,u.o),_=new Pn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Yr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ca(u.h,_),Vs(_,w,m)}function yr(u,m){u.H&&Te(u.H,function(_,w){$e(m,w,_)}),u.l&&$r({},function(_,w){$e(m,w,_)})}function Yr(u,m,_){_=Math.min(u.i.length,_);var w=u.l?I(u.l.Na,u.l,u):null;e:{var j=u.i;let q=-1;for(;;){const ne=["count="+_];q==-1?0<_?(q=j[0].g,ne.push("ofs="+q)):q=0:ne.push("ofs="+q);let Be=!0;for(let ft=0;ft<_;ft++){let Le=j[ft].g;const Et=j[ft].map;if(Le-=q,0>Le)q=Math.max(0,j[ft].g-100),Be=!1;else try{bl(Et,ne,"req"+Le+"_")}catch{w&&w(Et)}}if(Be){w=ne.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,w}function Yi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;De||se(),re||(De(),re=!0),pe.add(m,u),u.v=0}}function Hs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Rn(I(u.Fa,u),jl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Ul(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Rn(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),On(this),Ul(this))};function ga(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Ul(u){u.g=new Pn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=rn(u.qa);$e(m,"RID","rpc"),$e(m,"SID",u.K),$e(m,"AID",u.T),$e(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(m,"TO",u.ja),$e(m,"TYPE","xmlhttp"),yr(u,m),u.m&&u.o&&Qr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Wr(rn(m)),_.m=null,_.P=!0,la(_,u)}r.Za=function(){this.C!=null&&(this.C=null,On(this),Hs(this),st(19))};function qs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ws(u,m){var _=null;if(u.g==m){qs(u),ga(u),u.g=null;var w=2}else if(Bt(u.h,m))_=m.D,xl(u.h,m),w=1;else return;if(u.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;w=ji(),dt(w,new Ns(w,_)),Qn(u)}else Yi(u);else if(j=m.s,j==3||j==0&&0<m.X||!(w==1&&ih(u,m)||w==2&&Hs(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),j){case 1:_r(u,5);break;case 4:_r(u,10);break;case 3:_r(u,6);break;default:_r(u,2)}}}function jl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function _r(u,m){if(u.j.info("Error code "+m),m==2){var _=I(u.fb,u),w=u.Xa;const j=!w;w=new pr(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ki(w,"https"),Wr(w),j?th(w.toString(),_):Ml(w.toString(),_)}else st(2);u.G=0,u.l&&u.l.sa(m),zl(u),Bs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function zl(u){if(u.G=0,u.ka=[],u.l){const m=Nl(u.h);(m.length!=0||u.i.length!=0)&&(U(u.ka,m),U(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Bl(u,m,_){var w=_ instanceof pr?rn(_):new pr(_);if(w.g!="")m&&(w.g=m+"."+w.g),Hr(w,w.s);else{var j=d.location;w=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var q=new pr(null);w&&Ki(q,w),m&&(q.g=m),j&&Hr(q,j),_&&(q.l=_),w=q}return _=u.D,m=u.ya,_&&m&&$e(w,_,m),$e(w,"VER",u.la),yr(u,w),w}function $l(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new mr({eb:_})):new Ye(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ya(){}r=ya.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ks(){}Ks.prototype.g=function(u,m){return new $t(u,m)};function $t(u,m){ht.call(this),this.g=new ma(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!W(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!W(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Yn(this)}L($t,ht),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){At(this.g)},$t.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ea(u),u=_);m.i.push(new Pl(m.Ya++,u)),m.G==3&&Qn(m)},$t.prototype.N=function(){this.g.l=null,delete this.j,At(this.g),delete this.g,$t.aa.N.call(this)};function Hl(u){Hn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(Hl,Hn);function ql(){xs.call(this),this.status=1}L(ql,xs);function Yn(u){this.g=u}L(Yn,ya),Yn.prototype.ua=function(){dt(this.g,"a")},Yn.prototype.ta=function(u){dt(this.g,new Hl(u))},Yn.prototype.sa=function(u){dt(this.g,new ql)},Yn.prototype.ra=function(){dt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,Cv=function(){return new Ks},Rv=function(){return ji()},Sv=qn,Zd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Zu=Os,Sl.COMPLETE="complete",Iv=Sl,ks.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Wa=ks,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Tv=Ye}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const py="@firebase/firestore",my="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Rf("@firebase/firestore");function vo(){return gs.logLevel}function oe(r,...e){if(gs.logLevel<=Pe.DEBUG){const t=e.map(bf);gs.debug(`Firestore (${zo}): ${r}`,...t)}}function Vr(r,...e){if(gs.logLevel<=Pe.ERROR){const t=e.map(bf);gs.error(`Firestore (${zo}): ${r}`,...t)}}function xo(r,...e){if(gs.logLevel<=Pe.WARN){const t=e.map(bf);gs.warn(`Firestore (${zo}): ${r}`,...t)}}function bf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(r="Unexpected state"){const e=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: `+r;throw Vr(e),new Error(e)}function ze(r,e){r||ve()}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ut.UNAUTHENTICATED))}shutdown(){}}class bR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FR{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ti,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ti)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string"),new Av(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Ut(e)}}class UR{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class jR{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new UR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zR{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Tn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0);const i=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new gy(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new gy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=BR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Ne(r,e){return r<e?-1:r>e?1:0}function No(r,e,t){return r.length===e.length&&r.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-62135596800,_y=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*_y);return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yy)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new yt(0,0))}static max(){return new Ie(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(),i===void 0?i=e.length-t:i>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class Je extends tr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const $R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends tr{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return $R.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vy}static keyField(){return new Dt([vy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new fe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(i+=d,o++):(l(),o++)}if(l(),h)throw new fe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=-1;function HR(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new Ri(o,ye.empty(),e)}function qR(r){return new Ri(r.readTime,r.key,il)}class Ri{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ri(Ie.min(),ye.empty(),il)}static max(){return new Ri(Ie.max(),ye.empty(),il)}}function WR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==KR)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,i)=>{t(e)})}static reject(e){return new G((t,i)=>{i(e)})}static waitFor(e){return new G((t,i)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},p=>i(p))}),h=!0,l===o&&t()})}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next(o=>o?G.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new G((i,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(E=>{h[y]=E,++d,d===l&&i(h)},E=>o(E))}})}static doWhile(e,t){return new G((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function QR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Vc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=-1;function Mc(r){return r==null}function pc(r){return r===0&&1/r==-1/0}function YR(r){return typeof r=="number"&&Number.isInteger(r)&&!pc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="";function XR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ey(e)),e=JR(r.get(t),e);return Ey(e)}function JR(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case kv:t+="";break;default:t+=l}}return t}function Ey(r){return r+kv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Oi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function xv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bu(this.root,e,this.comparator,!0)}}class Bu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=l??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new cn([])}unionWith(e){let t=new _t(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Nv("Invalid base64 string: "+l):l}}(e);return new Ot(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const ZR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(r){if(ze(!!r),typeof r=="string"){let e=0;const t=ZR.exec(r);if(ze(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(r.seconds),nanos:at(r.nanos)}}function at(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ai(r){return typeof r=="string"?Ot.fromBase64String(r):Ot.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="server_timestamp",Ov="__type__",Lv="__previous_value__",Vv="__local_write_time__";function Uf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ov])===null||t===void 0?void 0:t.stringValue)===Dv}function bc(r){const e=r.mapValue.fields[Lv];return Uf(e)?bc(e):e}function sl(r){const e=Ci(r.mapValue.fields[Vv].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,i,o,l,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}const mc="(default)";class ol{constructor(e,t){this.projectId=e,this.database=t||mc}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database===mc}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="__type__",bv="__max__",$u={mapValue:{fields:{__type__:{stringValue:bv}}}},Fv="__vector__",gc="value";function Pi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Uf(r)?4:nC(r)?9007199254740991:tC(r)?10:11:ve()}function or(r,e){if(r===e)return!0;const t=Pi(r);if(t!==Pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sl(r).isEqual(sl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ci(o.timestampValue),d=Ci(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return Ai(o.bytesValue).isEqual(Ai(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=at(o.doubleValue),d=at(l.doubleValue);return h===d?pc(h)===pc(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(wy(h)!==wy(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!or(h[p],d[p])))return!1;return!0}(r,e);default:return ve()}}function al(r,e){return(r.values||[]).find(t=>or(t,e))!==void 0}function Do(r,e){if(r===e)return 0;const t=Pi(r),i=Pi(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=at(l.integerValue||l.doubleValue),p=at(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return Iy(r.timestampValue,e.timestampValue);case 4:return Iy(sl(r),sl(e));case 5:return Ne(r.stringValue,e.stringValue);case 6:return function(l,h){const d=Ai(l),p=Ai(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Ne(d[y],p[y]);if(E!==0)return E}return Ne(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ne(at(l.latitude),at(h.latitude));return d!==0?d:Ne(at(l.longitude),at(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Sy(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,y,E;const T=l.fields||{},I=h.fields||{},N=(d=T[gc])===null||d===void 0?void 0:d.arrayValue,L=(p=I[gc])===null||p===void 0?void 0:p.arrayValue,B=Ne(((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0,((E=L==null?void 0:L.values)===null||E===void 0?void 0:E.length)||0);return B!==0?B:Sy(N,L)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===$u.mapValue&&h===$u.mapValue)return 0;if(l===$u.mapValue)return 1;if(h===$u.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=h.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const I=Ne(p[T],E[T]);if(I!==0)return I;const N=Do(d[p[T]],y[E[T]]);if(N!==0)return N}return Ne(p.length,E.length)}(r.mapValue,e.mapValue);default:throw ve()}}function Iy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=Ci(r),i=Ci(e),o=Ne(t.seconds,i.seconds);return o!==0?o:Ne(t.nanos,i.nanos)}function Sy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Do(t[o],i[o]);if(l)return l}return Ne(t.length,i.length)}function Oo(r){return ef(r)}function ef(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Ci(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ai(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=ef(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${ef(t.fields[h])}`;return o+"}"}(r.mapValue):ve()}function ec(r){switch(Pi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(r);return e?16+ec(e):16;case 5:return 2*r.stringValue.length;case 6:return Ai(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+ec(l),0)}(r.arrayValue);case 10:case 11:return function(i){let o=0;return Oi(i.fields,(l,h)=>{o+=l.length+ec(h)}),o}(r.mapValue);default:throw ve()}}function tf(r){return!!r&&"integerValue"in r}function jf(r){return!!r&&"arrayValue"in r}function Ry(r){return!!r&&"nullValue"in r}function Cy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function tc(r){return!!r&&"mapValue"in r}function tC(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mv])===null||t===void 0?void 0:t.stringValue)===Fv}function Ya(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Oi(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ya(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(r.arrayValue.values[t]);return e}return Object.assign({},r)}function nC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===bv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}h?i[d.lastSegment()]=Ya(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Oi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new tn(Ya(this.value))}}function Uv(r){const e=[];return Oi(r.fields,(t,i)=>{const o=new Dt([t]);if(tc(i)){const l=Uv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,i,o,l,h,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new jt(e,0,Ie.min(),Ie.min(),Ie.min(),tn.empty(),0)}static newFoundDocument(e,t,i,o){return new jt(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new jt(e,2,t,Ie.min(),Ie.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ie.min(),Ie.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.position=e,this.inclusive=t}}function Ay(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=Do(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Py(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!or(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function rC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{}class gt extends jv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sC(e,t,i):t==="array-contains"?new lC(e,i):t==="in"?new uC(e,i):t==="not-in"?new cC(e,i):t==="array-contains-any"?new hC(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new oC(e,i):new aC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Do(t,this.value)):t!==null&&Pi(this.value)===Pi(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends jv{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ar(e,t)}matches(e){return zv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zv(r){return r.op==="and"}function Bv(r){return iC(r)&&zv(r)}function iC(r){for(const e of r.filters)if(e instanceof ar)return!1;return!0}function nf(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+Oo(r.value);if(Bv(r))return r.filters.map(e=>nf(e)).join(",");{const e=r.filters.map(t=>nf(t)).join(",");return`${r.op}(${e})`}}function $v(r,e){return r instanceof gt?function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&or(i.value,o.value)}(r,e):r instanceof ar?function(i,o){return o instanceof ar&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,h,d)=>l&&$v(h,o.filters[d]),!0):!1}(r,e):void ve()}function Hv(r){return r instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`}(r):r instanceof ar?function(t){return t.op.toString()+" {"+t.getFilters().map(Hv).join(" ,")+"}"}(r):"Filter"}class sC extends gt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class oC extends gt{constructor(e,t){super(e,"in",t),this.keys=qv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aC extends gt{constructor(e,t){super(e,"not-in",t),this.keys=qv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class lC extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&al(t.arrayValue,this.value)}}class uC extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&al(this.value.arrayValue,t)}}class cC extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!al(this.value.arrayValue,t)}}class hC extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>al(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t=null,i=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.le=null}}function ky(r,e=null,t=[],i=[],o=null,l=null,h=null){return new dC(r,e,t,i,o,l,h)}function zf(r){const e=Se(r);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>nf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Oo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Oo(i)).join(",")),e.le=t}return e.le}function Bf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!rC(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!$v(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Py(r.startAt,e.startAt)&&Py(r.endAt,e.endAt)}function rf(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function fC(r,e,t,i,o,l,h,d){return new Fc(r,e,t,i,o,l,h,d)}function Wv(r){return new Fc(r)}function xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function pC(r){return r.collectionGroup!==null}function Xa(r){const e=Se(r);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new _t(Dt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new _c(l,i))}),t.has(Dt.keyField().canonicalString())||e.he.push(new _c(Dt.keyField(),i))}return e.he}function ir(r){const e=Se(r);return e.Pe||(e.Pe=mC(e,Xa(r))),e.Pe}function mC(r,e){if(r.limitType==="F")return ky(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new _c(o.field,l)});const t=r.endAt?new yc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new yc(r.startAt.position,r.startAt.inclusive):null;return ky(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function sf(r,e,t){return new Fc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Uc(r,e){return Bf(ir(r),ir(e))&&r.limitType===e.limitType}function Kv(r){return`${zf(ir(r))}|lt:${r.limitType}`}function Eo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Hv(o)).join(", ")}]`),Mc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Oo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Oo(o)).join(",")),`Target(${i})`}(ir(r))}; limitType=${r.limitType})`}function jc(r,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,o){for(const l of Xa(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(i,o){return!(i.startAt&&!function(h,d,p){const y=Ay(h,d,p);return h.inclusive?y<=0:y<0}(i.startAt,Xa(i),o)||i.endAt&&!function(h,d,p){const y=Ay(h,d,p);return h.inclusive?y>=0:y>0}(i.endAt,Xa(i),o))}(r,e)}function gC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Gv(r){return(e,t)=>{let i=!1;for(const o of Xa(r)){const l=yC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function yC(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),y=d.data.field(l);return p!==null&&y!==null?Do(p,y):ve()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return xv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new rt(ye.comparator);function Mr(){return _C}const Qv=new rt(ye.comparator);function Ka(...r){let e=Qv;for(const t of r)e=e.insert(t.key,t);return e}function Yv(r){let e=Qv;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ds(){return Ja()}function Xv(){return Ja()}function Ja(){return new ws(r=>r.toString(),(r,e)=>r.isEqual(e))}const vC=new rt(ye.comparator),EC=new _t(ye.comparator);function ke(...r){let e=EC;for(const t of r)e=e.add(t);return e}const wC=new _t(Ne);function TC(){return wC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function Jv(r){return{integerValue:""+r}}function IC(r,e){return YR(e)?Jv(e):$f(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function SC(r,e,t){return r instanceof vc?function(o,l){const h={fields:{[Ov]:{stringValue:Dv},[Vv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=bc(l)),l&&(h.fields[Lv]=l),{mapValue:h}}(t,e):r instanceof ll?e0(r,e):r instanceof ul?t0(r,e):function(o,l){const h=Zv(o,l),d=Ny(h)+Ny(o.Ie);return tf(h)&&tf(o.Ie)?Jv(d):$f(o.serializer,d)}(r,e)}function RC(r,e,t){return r instanceof ll?e0(r,e):r instanceof ul?t0(r,e):t}function Zv(r,e){return r instanceof Ec?function(i){return tf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class vc extends zc{}class ll extends zc{constructor(e){super(),this.elements=e}}function e0(r,e){const t=n0(e);for(const i of r.elements)t.some(o=>or(o,i))||t.push(i);return{arrayValue:{values:t}}}class ul extends zc{constructor(e){super(),this.elements=e}}function t0(r,e){let t=n0(e);for(const i of r.elements)t=t.filter(o=>!or(o,i));return{arrayValue:{values:t}}}class Ec extends zc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ny(r){return at(r.integerValue||r.doubleValue)}function n0(r){return jf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function CC(r,e){return r.field.isEqual(e.field)&&function(i,o){return i instanceof ll&&o instanceof ll||i instanceof ul&&o instanceof ul?No(i.elements,o.elements,or):i instanceof Ec&&o instanceof Ec?or(i.Ie,o.Ie):i instanceof vc&&o instanceof vc}(r.transform,e.transform)}class AC{constructor(e,t){this.version=e,this.transformResults=t}}class jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Bc{}function r0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Hf(r.key,jn.none()):new _l(r.key,r.data,jn.none());{const t=r.data,i=tn.empty();let o=new _t(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Li(r.key,i,new cn(o.toArray()),jn.none())}}function PC(r,e,t){r instanceof _l?function(o,l,h){const d=o.value.clone(),p=Oy(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Li?function(o,l,h){if(!nc(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Oy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(i0(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Za(r,e,t,i){return r instanceof _l?function(l,h,d,p){if(!nc(l.precondition,h))return d;const y=l.value.clone(),E=Ly(l.fieldTransforms,p,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,i):r instanceof Li?function(l,h,d,p){if(!nc(l.precondition,h))return d;const y=Ly(l.fieldTransforms,p,h),E=h.data;return E.setAll(i0(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,i):function(l,h,d){return nc(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function kC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=Zv(i.transform,o||null);l!=null&&(t===null&&(t=tn.empty()),t.set(i.field,l))}return t||null}function Dy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&No(i,o,(l,h)=>CC(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class _l extends Bc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Li extends Bc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function i0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function Oy(r,e,t){const i=new Map;ze(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);i.set(l.field,RC(h,d,t[o]))}return i}function Ly(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,SC(l,h,e))}return i}class Hf extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xC extends Bc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&PC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Za(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Za(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Xv();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=r0(h,d);p!==null&&i.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,i)=>Dy(t,i))&&No(this.baseMutations,e.baseMutations,(t,i)=>Dy(t,i))}}class qf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ze(e.mutations.length===i.length);let o=function(){return vC}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new qf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ve;function LC(r){switch(r){case J.OK:return ve();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ve()}}function s0(r){if(r===void 0)return Vr("GRPC error has no .code"),J.UNKNOWN;switch(r){case ct.OK:return J.OK;case ct.CANCELLED:return J.CANCELLED;case ct.UNKNOWN:return J.UNKNOWN;case ct.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ct.INTERNAL:return J.INTERNAL;case ct.UNAVAILABLE:return J.UNAVAILABLE;case ct.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ct.NOT_FOUND:return J.NOT_FOUND;case ct.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ct.ABORTED:return J.ABORTED;case ct.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ct.DATA_LOSS:return J.DATA_LOSS;default:return ve()}}(Ve=ct||(ct={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new wi([4294967295,4294967295],0);function Vy(r){const e=VC().encode(r),t=new wv;return t.update(e),new Uint8Array(t.digest())}function My(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new wi([t,i],0),new wi([o,l],0)]}class Wf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=wi.fromNumber(this.Ee)}Ae(e,t,i){let o=e.add(t.multiply(wi.fromNumber(i)));return o.compare(MC)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Vy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(i,o,l);if(!this.Re(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Wf(l,o,t);return i.forEach(d=>h.insert(d)),h}insert(e){if(this.Ee===0)return;const t=Vy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const h=this.Ae(i,o,l);this.Ve(h)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new $c(Ie.min(),o,new rt(Ne),Mr(),ke())}}class vl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vl(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,o){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=o}}class o0{constructor(e,t){this.targetId=e,this.ge=t}}class a0{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class by{constructor(){this.pe=0,this.ye=Fy(),this.we=Ot.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ke(),t=ke(),i=ke();return this.ye.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ve()}}),new vl(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=Fy()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ze(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class bC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Mr(),this.$e=Hu(),this.Ke=Hu(),this.Ue=new rt(Ne)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,i=e.ge.count,o=this.Xe(t);if(o){const l=o.target;if(rf(l))if(i===0){const h=new ye(l.path);this.ze(t,h,jt.newNoDocument(h,Ie.min()))}else ze(i===1);else{const h=this.et(t);if(h!==i){const d=this.tt(e),p=d?this.nt(d,e,h):1;if(p!==0){this.Ye(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,y)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=Ai(i).toUint8Array()}catch(p){if(p instanceof Nv)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Wf(h,o,l)}catch(p){return xo(p instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ee===0?null:d}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const h=this.ke.it(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.ze(t,l,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((l,h)=>{const d=this.Xe(h);if(d){if(l.current&&rf(d.target)){const p=new ye(d.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,jt.newNoDocument(p,e))}l.ve&&(t.set(h,l.Fe()),l.Me())}});let i=ke();this.Ke.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.Qe.forEach((l,h)=>h.setReadTime(e));const o=new $c(e,t,this.Ue,this.Qe,i);return this.Qe=Mr(),this.$e=Hu(),this.Ke=Hu(),this.Ue=new rt(Ne),o}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new by,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new _t(Ne),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new _t(Ne),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new by),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new rt(ye.comparator)}function Fy(){return new rt(ye.comparator)}const FC={asc:"ASCENDING",desc:"DESCENDING"},UC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jC={and:"AND",or:"OR"};class zC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function of(r,e){return r.useProto3Json||Mc(e)?e:{value:e}}function wc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function BC(r,e){return wc(r,e.toTimestamp())}function sr(r){return ze(!!r),Ie.fromTimestamp(function(t){const i=Ci(t);return new yt(i.seconds,i.nanos)}(r))}function Kf(r,e){return af(r,e).canonicalString()}function af(r,e){const t=function(o){return new Je(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function u0(r){const e=Je.fromString(r);return ze(p0(e)),e}function lf(r,e){return Kf(r.databaseId,e.path)}function Fd(r,e){const t=u0(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(h0(t))}function c0(r,e){return Kf(r.databaseId,e)}function $C(r){const e=u0(r);return e.length===4?Je.emptyPath():h0(e)}function uf(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function h0(r){return ze(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Uy(r,e,t){return{name:lf(r,e),fields:t.value.mapValue.fields}}function HC(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,E){return y.useProto3Json?(ze(E===void 0||typeof E=="string"),Ot.fromBase64String(E||"")):(ze(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Ot.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const E=y.code===void 0?J.UNKNOWN:s0(y.code);return new fe(E,y.message||"")}(h);t=new a0(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Fd(r,i.document.name),l=sr(i.document.updateTime),h=i.document.createTime?sr(i.document.createTime):Ie.min(),d=new tn({mapValue:{fields:i.document.fields}}),p=jt.newFoundDocument(o,l,h,d),y=i.targetIds||[],E=i.removedTargetIds||[];t=new rc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Fd(r,i.document),l=i.readTime?sr(i.readTime):Ie.min(),h=jt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new rc([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Fd(r,i.document),l=i.removedTargetIds||[];t=new rc([],l,o,null)}else{if(!("filter"in e))return ve();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new OC(o,l),d=i.targetId;t=new o0(d,h)}}return t}function qC(r,e){let t;if(e instanceof _l)t={update:Uy(r,e.key,e.value)};else if(e instanceof Hf)t={delete:lf(r,e.key)};else if(e instanceof Li)t={update:Uy(r,e.key,e.data),updateMask:eA(e.fieldMask)};else{if(!(e instanceof xC))return ve();t={verify:lf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,h){const d=h.transform;if(d instanceof vc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ec)return{fieldPath:h.field.canonicalString(),increment:d.Ie};throw ve()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:BC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve()}(r,e.precondition)),t}function WC(r,e){return r&&r.length>0?(ze(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?sr(o.updateTime):sr(l);return h.isEqual(Ie.min())&&(h=sr(l)),new AC(h,o.transformResults||[])}(t,e))):[]}function KC(r,e){return{documents:[c0(r,e.path)]}}function GC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=c0(r,o);const l=function(y){if(y.length!==0)return f0(ar.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(E=>function(I){return{field:wo(I.field),direction:XC(I.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=of(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:t,parent:o}}function QC(r){let e=$C(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ze(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(T){const I=d0(T);return I instanceof ar&&Bv(I)?I.getFilters():[I]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(I=>function(L){return new _c(To(L.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(T){let I;return I=typeof T=="object"?T.value:T,Mc(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(T){const I=!!T.before,N=T.values||[];return new yc(N,I)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const I=!T.before,N=T.values||[];return new yc(N,I)}(t.endAt)),fC(e,o,h,l,d,"F",p,y)}function YC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function d0(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=To(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=To(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=To(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=To(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(r):r.fieldFilter!==void 0?function(t){return gt.create(To(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ar.create(t.compositeFilter.filters.map(i=>d0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(r):ve()}function XC(r){return FC[r]}function JC(r){return UC[r]}function ZC(r){return jC[r]}function wo(r){return{fieldPath:r.canonicalString()}}function To(r){return Dt.fromServerFormat(r.fieldPath)}function f0(r){return r instanceof gt?function(t){if(t.op==="=="){if(Cy(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(Ry(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cy(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(Ry(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:JC(t.op),value:t.value}}}(r):r instanceof ar?function(t){const i=t.getFilters().map(o=>f0(o));return i.length===1?i[0]:{compositeFilter:{op:ZC(t.op),filters:i}}}(r):ve()}function eA(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t,i,o,l=Ie.min(),h=Ie.min(),d=Ot.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.Tt=e}}function nA(r){const e=QC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Tn=new iA}addToCollectionParentIndex(e,t){return this.Tn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ri.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class iA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m0=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(m0,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Lo(0)}static Un(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LruGarbageCollector",sA=1048576;function By([r,e],[t,i]){const o=Ne(r,t);return o===0?Ne(e,i):o}class oA{constructor(e){this.Hn=e,this.buffer=new _t(By),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();By(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){oe(zy,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?oe(zy,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.er(3e5)})}}class lA{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Vc.ae);const i=new oA(t);return this.tr.forEachTarget(e,o=>i.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>i.Zn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(jy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,o,l,h,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),vo()<=Pe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function uA(r,e){return new lA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.changes=new ws(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Za(i.mutation,o,cn.empty(),yt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ke()){const o=ds();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let h=Ka();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ds();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ke()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,i,o){let l=Mr();const h=Ja(),d=function(){return Ja()}();return t.forEach((p,y)=>{const E=i.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Li)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),Za(E.mutation,y,E.mutation.getFieldMask(),yt.now())):h.set(y.key,cn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,E)=>h.set(y,E)),t.forEach((y,E)=>{var T;return d.set(y,new hA(E,(T=h.get(y))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Ja();let o=new rt((h,d)=>h-d),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=i.get(p)||cn.empty();E=d.applyToLocalView(y,E),i.set(p,E);const T=(o.get(d.batchId)||ke()).add(p);o=o.insert(d.batchId,T)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,T=Xv();E.forEach(I=>{if(!l.has(I)){const N=r0(t.get(I),i.get(I));N!==null&&T.set(I,N),l=l.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return G.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(ds());let d=il,p=l;return h.next(y=>G.forEach(y,(E,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(E)?G.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,ke())).next(E=>({batchId:d,changes:Yv(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let o=Ka();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ka();return this.indexManager.getCollectionParents(e,l).next(d=>G.forEach(d,p=>{const y=function(T,I){return new Fc(I,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(E=>{E.forEach((T,I)=>{h=h.insert(T,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(h=>{l.forEach((p,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,jt.newInvalidDocument(E)))});let d=Ka();return h.forEach((p,y)=>{const E=l.get(p);E!==void 0&&Za(E.mutation,y,cn.empty(),yt.now()),jc(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return G.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:sr(o.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:nA(o.bundledQuery),readTime:sr(o.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.overlays=new rt(ye.comparator),this.Rr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ds();return G.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Et(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Rr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=ds(),l=t.length+1,h=new ye(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new rt((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=l.get(y.largestBatchId);E===null&&(E=ds(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=ds(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=o)););return G.resolve(d)}Et(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(i.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new DC(t,i));let l=this.Rr.get(t);l===void 0&&(l=ke(),this.Rr.set(t,l)),this.Rr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.Vr=new _t(St.mr),this.gr=new _t(St.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new St(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new ye(new Je([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.gr.forEachInRange([i,o],h=>{this.wr(h),l.push(h.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new ye(new Je([])),i=new St(t,e),o=new St(t,e+1);let l=ke();return this.gr.forEachInRange([i,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new St(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ye.comparator(e.key,t.key)||Ne(e.Cr,t.Cr)}static pr(e,t){return Ne(e.Cr,t.Cr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new _t(St.mr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NC(l,t,i,o);this.mutationQueue.push(h);for(const d of o)this.Mr=this.Mr.add(new St(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Nr(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ff:this.Fr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([i,o],h=>{const d=this.Or(h.Cr);l.push(d)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(Ne);return t.forEach(o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,h],d=>{i=i.add(d.Cr)})}),G.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new St(new ye(l),0);let d=new _t(Ne);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Cr)),!0)},h),G.resolve(this.Br(d))}Br(e){const t=[];return e.forEach(i=>{const o=this.Or(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ze(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return G.forEach(t.mutations,o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new St(t,0),o=this.Mr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.kr=e,this.docs=function(){return new rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():jt.newInvalidDocument(o))}),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Mr();const h=t.path,d=new ye(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||WR(qR(E),i)<=0||(o.has(E.key)||jc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ve()}qr(e,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new _A(this)}getSize(e){return G.resolve(this.size)}}class _A extends cA{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(i)}),G.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.persistence=e,this.Qr=new ws(t=>zf(t),Bf),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Gf,this.targetCount=0,this.Ur=Lo.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),G.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.zn(t),G.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Qr.forEach((h,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Qr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),G.waitFor(l).next(()=>o)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.Kr.Sr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Vc(0),this.zr=!1,this.zr=!0,this.jr=new mA,this.referenceDelegate=e(this),this.Hr=new vA(this),this.indexManager=new rA,this.remoteDocumentCache=function(o){return new yA(o)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new tA(t),this.Yr=new fA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new gA(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const o=new EA(this.Gr.next());return this.referenceDelegate.Zr(),i(o).next(l=>this.referenceDelegate.Xr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}ei(e,t){return G.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class EA extends GR{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.ti=new Gf,this.ni=null}static ri(e){return new Qf(e)}get ii(){if(this.ni)return this.ni;throw ve()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),G.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ii.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ii,i=>{const o=ye.fromPath(i);return this.si(e,o).next(l=>{l||t.removeEntry(o,Ie.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return G.or([()=>G.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.oi=new ws(i=>XR(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=uA(this,t)}static ri(e,t){return new Tc(e,t)}Zr(){}Xr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return G.forEach(this.oi,(i,o)=>this.ar(e,i,o).next(l=>l?G.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,t).next(d=>{d||(i++,l.removeEntry(h,Ie.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ec(e.data.value)),t}ar(e,t,i){return G.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=o}static Yi(e,t){let i=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Yf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return eI()?8:QR(zt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.rs(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.ss(e,t,o,i).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new wA;return this._s(e,t,h).next(d=>{if(l.result=d,this.Xi)return this.us(e,t,h,d.size)})}).next(()=>l.result)}us(e,t,i,o){return i.documentReadCount<this.es?(vo()<=Pe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),G.resolve()):(vo()<=Pe.DEBUG&&oe("QueryEngine","Query:",Eo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ts*o?(vo()<=Pe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(t))):G.resolve())}rs(e,t){if(xy(t))return G.resolve(null);let i=ir(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=sf(t,null,"F"),i=ir(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const h=ke(...l);return this.ns.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.cs(t,d);return this.ls(t,y,h,p.readTime)?this.rs(e,sf(t,null,"F")):this.hs(e,y,t,p)}))})))}ss(e,t,i,o){return xy(t)||o.isEqual(Ie.min())?G.resolve(null):this.ns.getDocuments(e,i).next(l=>{const h=this.cs(t,l);return this.ls(t,h,i,o)?G.resolve(null):(vo()<=Pe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.hs(e,h,t,HR(o,il)).next(d=>d))})}cs(e,t){let i=new _t(Gv(e));return t.forEach((o,l)=>{jc(e,l)&&(i=i.add(l))}),i}ls(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}_s(e,t,i){return vo()<=Pe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ns.getDocumentsMatchingQuery(e,t,Ri.min(),i)}hs(e,t,i,o){return this.ns.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="LocalStore",IA=3e8;class SA{constructor(e,t,i,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new rt(Ne),this.Is=new ws(l=>zf(l),Bf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dA(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function RA(r,e,t,i){return new SA(r,e,t,i)}async function y0(r,e){const t=Se(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const h=[],d=[];let p=ke();for(const y of o){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of l){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Rs:y,removedBatchIds:h,addedBatchIds:d}))})})}function CA(r,e){const t=Se(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const T=y.batch,I=T.keys();let N=G.resolve();return I.forEach(L=>{N=N.next(()=>E.getEntry(p,L)).next(B=>{const U=y.docVersions.get(L);ze(U!==null),B.version.compareTo(U)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))})}),N.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=ke();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function _0(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function AA(r,e){const t=Se(r),i=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const d=[];e.targetChanges.forEach((E,T)=>{const I=o.get(T);if(!I)return;d.push(t.Hr.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,E.addedDocuments,T)));let N=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(Ot.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):E.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(E.resumeToken,i)),o=o.insert(T,N),function(B,U,K){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=IA?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(I,N,E)&&d.push(t.Hr.updateTargetData(l,N))});let p=Mr(),y=ke();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),d.push(PA(l,h,e.documentUpdates).next(E=>{p=E.Vs,y=E.fs})),!i.isEqual(Ie.min())){const E=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(E)}return G.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ts=o,l))}function PA(r,e,t){let i=ke(),o=ke();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let h=Mr();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):oe(Xf,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Vs:h,fs:o}})}function kA(r,e){const t=Se(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ff),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xA(r,e){const t=Se(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Hr.getTargetData(i,e).next(l=>l?(o=l,G.resolve(o)):t.Hr.allocateTargetId(i).next(h=>(o=new yi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ts.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function cf(r,e,t){const i=Se(r),o=i.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!$o(h))throw h;oe(Xf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ts=i.Ts.remove(e),i.Is.delete(o.target)}function $y(r,e,t){const i=Se(r);let o=Ie.min(),l=ke();return i.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,E){const T=Se(p),I=T.Is.get(E);return I!==void 0?G.resolve(T.Ts.get(I)):T.Hr.getTargetData(y,E)}(i,h,ir(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>i.Ps.getDocumentsMatchingQuery(h,e,t?o:Ie.min(),t?l:ke())).next(d=>(NA(i,gC(e),d),{documents:d,gs:l})))}function NA(r,e,t){let i=r.Es.get(e)||Ie.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.Es.set(e,i)}class Hy{constructor(){this.activeTargetIds=TC()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DA{constructor(){this.ho=new Hy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="ConnectivityMonitor";class Wy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){oe(qy,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){oe(qy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function hf(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="RestConnection",LA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VA{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database===mc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}So(e,t,i,o,l){const h=hf(),d=this.bo(e,t.toUriEncodedString());oe(Ud,`Sending RPC '${e}' ${h}:`,d,i);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,l),this.vo(e,d,p,i).then(y=>(oe(Ud,`Received RPC '${e}' ${h}: `,y),y),y=>{throw xo(Ud,`RPC '${e}' ${h} failed with error: `,y,"url: ",d,"request:",i),y})}Co(e,t,i,o,l,h){return this.So(e,t,i,o,l)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}bo(e,t){const i=LA[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class bA extends VA{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,o){const l=hf();return new Promise((h,d)=>{const p=new Tv;p.setWithCredentials(!0),p.listenOnce(Iv.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zu.NO_ERROR:const E=p.getResponseJson();oe(Ft,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case Zu.TIMEOUT:oe(Ft,`RPC '${e}' ${l} timed out`),d(new fe(J.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const T=p.getStatus();if(oe(Ft,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const L=function(U){const K=U.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(K)>=0?K:J.UNKNOWN}(N.status);d(new fe(L,N.message))}else d(new fe(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(J.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{oe(Ft,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);oe(Ft,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}Wo(e,t,i){const o=hf(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Cv(),d=Rv(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");oe(Ft,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=h.createWebChannel(E,p);let I=!1,N=!1;const L=new MA({Fo:U=>{N?oe(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(oe(Ft,`Opening RPC '${e}' stream ${o} transport.`),T.open(),I=!0),oe(Ft,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Mo:()=>T.close()}),B=(U,K,W)=>{U.listen(K,ee=>{try{W(ee)}catch(ae){setTimeout(()=>{throw ae},0)}})};return B(T,Wa.EventType.OPEN,()=>{N||(oe(Ft,`RPC '${e}' stream ${o} transport opened.`),L.Qo())}),B(T,Wa.EventType.CLOSE,()=>{N||(N=!0,oe(Ft,`RPC '${e}' stream ${o} transport closed`),L.Ko())}),B(T,Wa.EventType.ERROR,U=>{N||(N=!0,xo(Ft,`RPC '${e}' stream ${o} transport errored:`,U),L.Ko(new fe(J.UNAVAILABLE,"The operation could not be completed")))}),B(T,Wa.EventType.MESSAGE,U=>{var K;if(!N){const W=U.data[0];ze(!!W);const ee=W,ae=(ee==null?void 0:ee.error)||((K=ee[0])===null||K===void 0?void 0:K.error);if(ae){oe(Ft,`RPC '${e}' stream ${o} received error:`,ae);const Ee=ae.status;let Te=function(C){const x=ct[C];if(x!==void 0)return s0(x)}(Ee),D=ae.message;Te===void 0&&(Te=J.INTERNAL,D="Unknown error status: "+Ee+" with message "+ae.message),N=!0,L.Ko(new fe(Te,D)),T.close()}else oe(Ft,`RPC '${e}' stream ${o} received:`,W),L.Uo(W)}}),B(d,Sv.STAT_EVENT,U=>{U.stat===Zd.PROXY?oe(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Zd.NOPROXY&&oe(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.$o()},0),L}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(r){return new zC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=o,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-i);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="PersistentStream";class E0{constructor(e,t,i,o,l,h,d,p){this.Ti=e,this.n_=i,this.r_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new v0(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.i_===t&&this.V_(i,o)},i=>{e(()=>{const o=new fe(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(o)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{i(()=>this.m_(o))}),this.stream.onMessage(o=>{i(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return oe(Ky,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(oe(Ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FA extends E0{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=HC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ie.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?sr(h.readTime):Ie.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=uf(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=rf(p)?{documents:KC(l,p)}:{query:GC(l,p).ht},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=l0(l,h.resumeToken);const y=of(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ie.min())>0){d.readTime=wc(l,h.snapshotVersion.toTimestamp());const y=of(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=YC(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=uf(this.serializer),t.removeTarget=e,this.I_(t)}}class UA extends E0{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=WC(e.writeResults,e.commitTime),i=sr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=uf(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>qC(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{}class zA extends jA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.So(e,af(t,i),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(J.UNKNOWN,l.toString())})}Co(e,t,i,o,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Co(e,af(t,i),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(J.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Vr(t),this.N_=!1):oe("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="RemoteStore";class $A{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(h=>{i.enqueueAndForget(async()=>{Ts(this)&&(oe(ys,"Restarting streams for network reachability change."),await async function(p){const y=Se(p);y.W_.add(4),await El(y),y.j_.set("Unknown"),y.W_.delete(4),await qc(y)}(this))})}),this.j_=new BA(i,o)}}async function qc(r){if(Ts(r))for(const e of r.G_)await e(!0)}async function El(r){for(const e of r.G_)await e(!1)}function w0(r,e){const t=Se(r);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),tp(t)?ep(t):Ho(t).c_()&&Zf(t,e))}function Jf(r,e){const t=Se(r),i=Ho(t);t.U_.delete(e),i.c_()&&T0(t,e),t.U_.size===0&&(i.c_()?i.P_():Ts(t)&&t.j_.set("Unknown"))}function Zf(r,e){if(r.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(r).y_(e)}function T0(r,e){r.H_.Ne(e),Ho(r).w_(e)}function ep(r){r.H_=new bC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>r.U_.get(e)||null,it:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.j_.B_()}function tp(r){return Ts(r)&&!Ho(r).u_()&&r.U_.size>0}function Ts(r){return Se(r).W_.size===0}function I0(r){r.H_=void 0}async function HA(r){r.j_.set("Online")}async function qA(r){r.U_.forEach((e,t)=>{Zf(r,e)})}async function WA(r,e){I0(r),tp(r)?(r.j_.q_(e),ep(r)):r.j_.set("Unknown")}async function KA(r,e,t){if(r.j_.set("Online"),e instanceof a0&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.U_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.U_.delete(d),o.H_.removeTarget(d))}(r,e)}catch(i){oe(ys,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ic(r,i)}else if(e instanceof rc?r.H_.We(e):e instanceof o0?r.H_.Ze(e):r.H_.je(e),!t.isEqual(Ie.min()))try{const i=await _0(r.localStore);t.compareTo(i)>=0&&await function(l,h){const d=l.H_.ot(h);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.U_.get(y);E&&l.U_.set(y,E.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,y)=>{const E=l.U_.get(p);if(!E)return;l.U_.set(p,E.withResumeToken(Ot.EMPTY_BYTE_STRING,E.snapshotVersion)),T0(l,p);const T=new yi(E.target,p,y,E.sequenceNumber);Zf(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(i){oe(ys,"Failed to raise snapshot:",i),await Ic(r,i)}}async function Ic(r,e,t){if(!$o(e))throw e;r.W_.add(1),await El(r),r.j_.set("Offline"),t||(t=()=>_0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe(ys,"Retrying IndexedDB access"),await t(),r.W_.delete(1),await qc(r)})}function S0(r,e){return e().catch(t=>Ic(r,t,e))}async function Wc(r){const e=Se(r),t=ki(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Ff;for(;GA(e);)try{const o=await kA(e.localStore,i);if(o===null){e.K_.length===0&&t.P_();break}i=o.batchId,QA(e,o)}catch(o){await Ic(e,o)}R0(e)&&C0(e)}function GA(r){return Ts(r)&&r.K_.length<10}function QA(r,e){r.K_.push(e);const t=ki(r);t.c_()&&t.S_&&t.b_(e.mutations)}function R0(r){return Ts(r)&&!ki(r).u_()&&r.K_.length>0}function C0(r){ki(r).start()}async function YA(r){ki(r).C_()}async function XA(r){const e=ki(r);for(const t of r.K_)e.b_(t.mutations)}async function JA(r,e,t){const i=r.K_.shift(),o=qf.from(i,e,t);await S0(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Wc(r)}async function ZA(r,e){e&&ki(r).S_&&await async function(i,o){if(function(h){return LC(h)&&h!==J.ABORTED}(o.code)){const l=i.K_.shift();ki(i).h_(),await S0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Wc(i)}}(r,e),R0(r)&&C0(r)}async function Gy(r,e){const t=Se(r);t.asyncQueue.verifyOperationInProgress(),oe(ys,"RemoteStore received new credentials");const i=Ts(t);t.W_.add(3),await El(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await qc(t)}async function eP(r,e){const t=Se(r);e?(t.W_.delete(2),await qc(t)):e||(t.W_.add(2),await El(t),t.j_.set("Unknown"))}function Ho(r){return r.J_||(r.J_=function(t,i,o){const l=Se(t);return l.M_(),new FA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{xo:HA.bind(null,r),No:qA.bind(null,r),Lo:WA.bind(null,r),p_:KA.bind(null,r)}),r.G_.push(async e=>{e?(r.J_.h_(),tp(r)?ep(r):r.j_.set("Unknown")):(await r.J_.stop(),I0(r))})),r.J_}function ki(r){return r.Y_||(r.Y_=function(t,i,o){const l=Se(t);return l.M_(),new UA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:YA.bind(null,r),Lo:ZA.bind(null,r),D_:XA.bind(null,r),v_:JA.bind(null,r)}),r.G_.push(async e=>{e?(r.Y_.h_(),await Wc(r)):(await r.Y_.stop(),r.K_.length>0&&(oe(ys,`Stopping write stream with ${r.K_.length} pending writes`),r.K_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,d=new np(e,t,h,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(r,e){if(Vr("AsyncQueue",`${e}: ${r}`),$o(r))return new fe(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.Z_=new rt(ye.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ve():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Vo{constructor(e,t,i,o,l,h,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Vo(e,t,Ao.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class nP{constructor(){this.queries=Yy(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const o=Se(t),l=o.queries;o.queries=Yy(),l.forEach((h,d)=>{for(const p of d.ta)p.onError(i)})})(this,new fe(J.ABORTED,"Firestore shutting down"))}}function Yy(){return new ws(r=>Kv(r),Uc)}async function rP(r,e){const t=Se(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.na()&&e.ra()&&(i=2):(l=new tP,i=e.ra()?0:1);try{switch(i){case 0:l.ea=await t.onListen(o,!0);break;case 1:l.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=rp(h,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&ip(t)}async function iP(r,e){const t=Se(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ta.indexOf(e);h>=0&&(l.ta.splice(h,1),l.ta.length===0?o=e.ra()?0:1:!l.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sP(r,e){const t=Se(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.ta)d.oa(o)&&(i=!0);h.ea=o}}i&&ip(t)}function oP(r,e,t){const i=Se(r),o=i.queries.get(e);if(o)for(const l of o.ta)l.onError(t);i.queries.delete(e)}function ip(r){r.ia.forEach(e=>{e.next()})}var df,Xy;(Xy=df||(df={}))._a="default",Xy.Cache="cache";class aP{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Vo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.key=e}}class P0{constructor(e){this.key=e}}class lP{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ke(),this.mutatedKeys=ke(),this.ya=Gv(e),this.wa=new Ao(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new Qy,o=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const I=o.get(E),N=jc(this.query,T)?T:null,L=!!I&&this.mutatedKeys.has(I.key),B=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;I&&N?I.data.isEqual(N.data)?L!==B&&(i.track({type:3,doc:N}),U=!0):this.va(I,N)||(i.track({type:2,doc:N}),U=!0,(p&&this.ya(N,p)>0||y&&this.ya(N,y)<0)&&(d=!0)):!I&&N?(i.track({type:0,doc:N}),U=!0):I&&!N&&(i.track({type:1,doc:I}),U=!0,(p||y)&&(d=!0)),U&&(N?(h=h.add(N),l=B?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{wa:h,Da:i,ls:d,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((E,T)=>function(N,L){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return B(N)-B(L)}(E.type,T.type)||this.ya(E.doc,T.doc)),this.Ca(i),o=o!=null&&o;const d=t&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,y=p!==this.ga;return this.ga=p,h.length!==0||y?{snapshot:new Vo(this.query,e.wa,l,h,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:d}:{Ma:d}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Qy,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ke(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new P0(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new A0(i))}),t}Oa(e){this.fa=e.gs,this.pa=ke();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const sp="SyncEngine";class uP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cP{constructor(e){this.key=e,this.Ba=!1}}class hP{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new ws(d=>Kv(d),Uc),this.qa=new Map,this.Qa=new Set,this.$a=new rt(ye.comparator),this.Ka=new Map,this.Ua=new Gf,this.Wa={},this.Ga=new Map,this.za=Lo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function dP(r,e,t=!0){const i=L0(r);let o;const l=i.ka.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Na()):o=await k0(i,e,t,!0),o}async function fP(r,e){const t=L0(r);await k0(t,e,!0,!1)}async function k0(r,e,t,i){const o=await xA(r.localStore,ir(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await pP(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&w0(r.remoteStore,o),d}async function pP(r,e,t,i,o){r.Ha=(T,I,N)=>async function(B,U,K,W){let ee=U.view.ba(K);ee.ls&&(ee=await $y(B.localStore,U.query,!1).then(({documents:D})=>U.view.ba(D,ee)));const ae=W&&W.targetChanges.get(U.targetId),Ee=W&&W.targetMismatches.get(U.targetId)!=null,Te=U.view.applyChanges(ee,B.isPrimaryClient,ae,Ee);return Zy(B,U.targetId,Te.Ma),Te.snapshot}(r,T,I,N);const l=await $y(r.localStore,e,!0),h=new lP(e,l.gs),d=h.ba(l.documents),p=vl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,p);Zy(r,t,y.Ma);const E=new uP(e,t,h);return r.ka.set(e,E),r.qa.has(t)?r.qa.get(t).push(e):r.qa.set(t,[e]),y.snapshot}async function mP(r,e,t){const i=Se(r),o=i.ka.get(e),l=i.qa.get(o.targetId);if(l.length>1)return i.qa.set(o.targetId,l.filter(h=>!Uc(h,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await cf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Jf(i.remoteStore,o.targetId),ff(i,o.targetId)}).catch(Bo)):(ff(i,o.targetId),await cf(i.localStore,o.targetId,!0))}async function gP(r,e){const t=Se(r),i=t.ka.get(e),o=t.qa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Jf(t.remoteStore,i.targetId))}async function yP(r,e,t){const i=SP(r);try{const o=await function(h,d){const p=Se(h),y=yt.now(),E=d.reduce((N,L)=>N.add(L.key),ke());let T,I;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let L=Mr(),B=ke();return p.ds.getEntries(N,E).next(U=>{L=U,L.forEach((K,W)=>{W.isValidDocument()||(B=B.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,L)).next(U=>{T=U;const K=[];for(const W of d){const ee=kC(W,T.get(W.key).overlayedDocument);ee!=null&&K.push(new Li(W.key,ee,Uv(ee.value.mapValue),jn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,y,K,d)}).next(U=>{I=U;const K=U.applyToLocalDocumentSet(T,B);return p.documentOverlayCache.saveOverlays(N,U.batchId,K)})}).then(()=>({batchId:I.batchId,changes:Yv(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let y=h.Wa[h.currentUser.toKey()];y||(y=new rt(Ne)),y=y.insert(d,p),h.Wa[h.currentUser.toKey()]=y}(i,o.batchId,t),await wl(i,o.changes),await Wc(i.remoteStore)}catch(o){const l=rp(o,"Failed to persist write");t.reject(l)}}async function x0(r,e){const t=Se(r);try{const i=await AA(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Ka.get(l);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?ze(h.Ba):o.removedDocuments.size>0&&(ze(h.Ba),h.Ba=!1))}),await wl(t,i,e)}catch(i){await Bo(i)}}function Jy(r,e,t){const i=Se(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ka.forEach((l,h)=>{const d=h.view.sa(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Se(h);p.onlineState=d;let y=!1;p.queries.forEach((E,T)=>{for(const I of T.ta)I.sa(d)&&(y=!0)}),y&&ip(p)}(i.eventManager,e),o.length&&i.La.p_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _P(r,e,t){const i=Se(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ka.get(e),l=o&&o.key;if(l){let h=new rt(ye.comparator);h=h.insert(l,jt.newNoDocument(l,Ie.min()));const d=ke().add(l),p=new $c(Ie.min(),new Map,new rt(Ne),h,d);await x0(i,p),i.$a=i.$a.remove(l),i.Ka.delete(e),op(i)}else await cf(i.localStore,e,!1).then(()=>ff(i,e,t)).catch(Bo)}async function vP(r,e){const t=Se(r),i=e.batch.batchId;try{const o=await CA(t.localStore,e);D0(t,i,null),N0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wl(t,o)}catch(o){await Bo(o)}}async function EP(r,e,t){const i=Se(r);try{const o=await function(h,d){const p=Se(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next(T=>(ze(T!==null),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(i.localStore,e);D0(i,e,t),N0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wl(i,o)}catch(o){await Bo(o)}}function N0(r,e){(r.Ga.get(e)||[]).forEach(t=>{t.resolve()}),r.Ga.delete(e)}function D0(r,e,t){const i=Se(r);let o=i.Wa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Wa[i.currentUser.toKey()]=o}}function ff(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.qa.get(e))r.ka.delete(i),t&&r.La.Ja(i,t);r.qa.delete(e),r.isPrimaryClient&&r.Ua.br(e).forEach(i=>{r.Ua.containsKey(i)||O0(r,i)})}function O0(r,e){r.Qa.delete(e.path.canonicalString());const t=r.$a.get(e);t!==null&&(Jf(r.remoteStore,t),r.$a=r.$a.remove(e),r.Ka.delete(t),op(r))}function Zy(r,e,t){for(const i of t)i instanceof A0?(r.Ua.addReference(i.key,e),wP(r,i)):i instanceof P0?(oe(sp,"Document no longer in limbo: "+i.key),r.Ua.removeReference(i.key,e),r.Ua.containsKey(i.key)||O0(r,i.key)):ve()}function wP(r,e){const t=e.key,i=t.path.canonicalString();r.$a.get(t)||r.Qa.has(i)||(oe(sp,"New document in limbo: "+t),r.Qa.add(i),op(r))}function op(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const e=r.Qa.values().next().value;r.Qa.delete(e);const t=new ye(Je.fromString(e)),i=r.za.next();r.Ka.set(i,new cP(t)),r.$a=r.$a.insert(t,i),w0(r.remoteStore,new yi(ir(Wv(t.path)),i,"TargetPurposeLimboResolution",Vc.ae))}}async function wl(r,e,t){const i=Se(r),o=[],l=[],h=[];i.ka.isEmpty()||(i.ka.forEach((d,p)=>{h.push(i.Ha(p,e,t).then(y=>{var E;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Yf.Yi(p.targetId,y);l.push(T)}}))}),await Promise.all(h),i.La.p_(o),await async function(p,y){const E=Se(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>G.forEach(y,I=>G.forEach(I.Hi,N=>E.persistence.referenceDelegate.addReference(T,I.targetId,N)).next(()=>G.forEach(I.Ji,N=>E.persistence.referenceDelegate.removeReference(T,I.targetId,N)))))}catch(T){if(!$o(T))throw T;oe(Xf,"Failed to update sequence numbers: "+T)}for(const T of y){const I=T.targetId;if(!T.fromCache){const N=E.Ts.get(I),L=N.snapshotVersion,B=N.withLastLimboFreeSnapshotVersion(L);E.Ts=E.Ts.insert(I,B)}}}(i.localStore,l))}async function TP(r,e){const t=Se(r);if(!t.currentUser.isEqual(e)){oe(sp,"User change. New user:",e.toKey());const i=await y0(t.localStore,e);t.currentUser=e,function(l,h){l.Ga.forEach(d=>{d.forEach(p=>{p.reject(new fe(J.CANCELLED,h))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wl(t,i.Rs)}}function IP(r,e){const t=Se(r),i=t.Ka.get(e);if(i&&i.Ba)return ke().add(i.key);{let o=ke();const l=t.qa.get(e);if(!l)return o;for(const h of l){const d=t.ka.get(h);o=o.unionWith(d.view.Sa)}return o}}function L0(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=x0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_P.bind(null,e),e.La.p_=sP.bind(null,e.eventManager),e.La.Ja=oP.bind(null,e.eventManager),e}function SP(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EP.bind(null,e),e}class Sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return RA(this.persistence,new TA,e.initialUser,this.serializer)}Xa(e){return new g0(Qf.ri,this.serializer)}Za(e){return new DA}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sc.provider={build:()=>new Sc};class RP extends Sc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){ze(this.persistence.referenceDelegate instanceof Tc);const i=this.persistence.referenceDelegate.garbageCollector;return new aA(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new g0(i=>Tc.ri(i,t),this.serializer)}}class pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TP.bind(null,this.syncEngine),await eP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nP}()}createDatastore(e){const t=Hc(e.databaseInfo.databaseId),i=function(l){return new bA(l)}(e.databaseInfo);return function(l,h,d,p){return new zA(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,h,d){return new $A(i,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Jy(this.syncEngine,t,0),function(){return Wy.D()?new Wy:new OA}())}createSyncEngine(e,t){return function(o,l,h,d,p,y,E){const T=new hP(o,l,h,d,p,y);return E&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Se(o);oe(ys,"RemoteStore shutting down."),l.W_.add(5),await El(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Vr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class AP{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=Pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async h=>{oe(xi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(oe(xi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=rp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function zd(r,e){r.asyncQueue.verifyOperationInProgress(),oe(xi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async o=>{i.isEqual(o)||(await y0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function e_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await PP(r);oe(xi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>Gy(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,o)=>Gy(e.remoteStore,o)),r._onlineComponents=e}async function PP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(xi,"Using user provided OfflineComponentProvider");try{await zd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),await zd(r,new Sc)}}else oe(xi,"Using default OfflineComponentProvider"),await zd(r,new RP(void 0));return r._offlineComponents}async function V0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(xi,"Using user provided OnlineComponentProvider"),await e_(r,r._uninitializedComponentsProvider._online)):(oe(xi,"Using default OnlineComponentProvider"),await e_(r,new pf))),r._onlineComponents}function kP(r){return V0(r).then(e=>e.syncEngine)}async function xP(r){const e=await V0(r),t=e.eventManager;return t.onListen=dP.bind(null,e.syncEngine),t.onUnlisten=mP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gP.bind(null,e.syncEngine),t}function NP(r,e,t={}){const i=new Ti;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,y){const E=new CP({next:I=>{E.su(),h.enqueueAndForget(()=>iP(l,T)),I.fromCache&&p.source==="server"?y.reject(new fe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),T=new aP(d,E,{includeMetadataChanges:!0,Ta:!0});return rP(l,T)}(await xP(r),r.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r,e,t){if(!t)throw new fe(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function DP(r,e,t,i){if(e===!0&&i===!0)throw new fe(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function n_(r){if(!ye.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function r_(r){if(ye.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ap(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ve()}function _s(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ap(r);throw new fe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="firestore.googleapis.com",i_=!0;class s_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F0,this.ssl=i_}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:i_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sA)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new MR;switch(i.type){case"firstParty":return new jR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=t_.get(t);i&&(oe("ComponentProvider","Removing Datastore"),t_.delete(t),i.terminate())}(this),Promise.resolve()}}function OP(r,e,t,i={}){var o;const l=(r=_s(r,Kc))._getSettings(),h=`${e}:${t}`;if(l.host!==F0&&l.host!==h&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Ut.MOCK_USER;else{d=KT(i.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new fe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ut(y)}r._authCredentials=new bR(new Av(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Gc(this.firestore,e,this._query)}}class In{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class Ii extends Gc{constructor(e,t,i){super(e,t,Wv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new ye(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function yo(r,e,...t){if(r=Rt(r),b0("collection","path",e),r instanceof Kc){const i=Je.fromString(e,...t);return r_(i),new Ii(r,null,i)}{if(!(r instanceof In||r instanceof Ii))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return r_(i),new Ii(r.firestore,null,i)}}function hs(r,e,...t){if(r=Rt(r),arguments.length===1&&(e=Pv.newId()),b0("doc","path",e),r instanceof Kc){const i=Je.fromString(e,...t);return n_(i),new In(r,null,new ye(i))}{if(!(r instanceof In||r instanceof Ii))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return n_(i),new In(r.firestore,r instanceof Ii?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="AsyncQueue";class a_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new v0(this,"async_queue_retry"),this.Su=()=>{const i=jd();i&&oe(o_,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=jd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=jd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ti;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$o(e))throw e;oe(o_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(i);throw Vr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=np.createAndSchedule(this,e,t,i,l=>this.Fu(l));return this.fu.push(o),o}Du(){this.gu&&ve()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Tl extends Kc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new a_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a_(e),this._firestoreClient=void 0,await e}}}function LP(r,e){const t=typeof r=="object"?r:b_(),i=typeof r=="string"?r:mc,o=Af(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=qT("firestore");l&&OP(o,...l)}return o}function U0(r){if(r._terminated)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||VP(r),r._firestoreClient}function VP(r){var e,t,i;const o=r._freezeSettings(),l=function(d,p,y,E){return new eC(d,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,M0(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new AP(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mo(Ot.fromBase64String(e))}catch(t){throw new fe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=/^__.*__$/;class bP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Li(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class j0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Li(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function z0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class hp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new hp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.$u(e),o}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Rc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(z0(this.Lu)&&MP.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class FP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hc(e)}ju(e,t,i,o=!1){return new hp({Lu:e,methodName:t,zu:i,path:Dt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function B0(r){const e=r._freezeSettings(),t=Hc(r._databaseId);return new FP(r._databaseId,!!e.ignoreUndefinedProperties,t)}function UP(r,e,t,i,o,l={}){const h=r.ju(l.merge||l.mergeFields?2:0,e,t,o);dp("Data must be an object, but it was:",h,i);const d=$0(i,h);let p,y;if(l.merge)p=new cn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const I=mf(e,T,t);if(!h.contains(I))throw new fe(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);q0(E,I)||E.push(I)}p=new cn(E),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new bP(new tn(d),p,y)}class Yc extends lp{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function jP(r,e,t,i){const o=r.ju(1,e,t);dp("Data must be an object, but it was:",o,i);const l=[],h=tn.empty();Oi(i,(p,y)=>{const E=fp(e,p,t);y=Rt(y);const T=o.Ku(E);if(y instanceof Yc)l.push(E);else{const I=Xc(y,T);I!=null&&(l.push(E),h.set(E,I))}});const d=new cn(l);return new j0(h,d,o.fieldTransforms)}function zP(r,e,t,i,o,l){const h=r.ju(1,e,t),d=[mf(e,i,t)],p=[o];if(l.length%2!=0)throw new fe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(mf(e,l[I])),p.push(l[I+1]);const y=[],E=tn.empty();for(let I=d.length-1;I>=0;--I)if(!q0(y,d[I])){const N=d[I];let L=p[I];L=Rt(L);const B=h.Ku(N);if(L instanceof Yc)y.push(N);else{const U=Xc(L,B);U!=null&&(y.push(N),E.set(N,U))}}const T=new cn(y);return new j0(E,T,h.fieldTransforms)}function Xc(r,e){if(H0(r=Rt(r)))return dp("Unsupported field value:",e,r),$0(r,e);if(r instanceof lp)return function(i,o){if(!z0(o.Lu))throw o.Wu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,o){const l=[];let h=0;for(const d of i){let p=Xc(d,o.Uu(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(i,o){if((i=Rt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return IC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=yt.fromDate(i);return{timestampValue:wc(o.serializer,l)}}if(i instanceof yt){const l=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wc(o.serializer,l)}}if(i instanceof up)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mo)return{bytesValue:l0(o.serializer,i._byteString)};if(i instanceof In){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof cp)return function(h,d){return{mapValue:{fields:{[Mv]:{stringValue:Fv},[gc]:{arrayValue:{values:h.toArray().map(y=>{if(typeof y!="number")throw d.Wu("VectorValues must only contain numeric values.");return $f(d.serializer,y)})}}}}}}(i,o);throw o.Wu(`Unsupported field value: ${ap(i)}`)}(r,e)}function $0(r,e){const t={};return xv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(r,(i,o)=>{const l=Xc(o,e.qu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function H0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof up||r instanceof Mo||r instanceof In||r instanceof lp||r instanceof cp)}function dp(r,e,t){if(!H0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=ap(t);throw i==="an object"?e.Wu(r+" a custom object"):e.Wu(r+" "+i)}}function mf(r,e,t){if((e=Rt(e))instanceof Qc)return e._internalPath;if(typeof e=="string")return fp(r,e);throw Rc("Field path arguments must be of type string or ",r,!1,void 0,t)}const BP=new RegExp("[~\\*/\\[\\]]");function fp(r,e,t){if(e.search(BP)>=0)throw Rc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Qc(...e.split("."))._internalPath}catch{throw Rc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Rc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${i}`),h&&(p+=` in document ${o}`),p+=")"),new fe(J.INVALID_ARGUMENT,d+r+p)}function q0(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(K0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $P extends W0{data(){return super.data()}}function K0(r,e){return typeof e=="string"?fp(r,e):e instanceof Qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qP{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Oi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[gc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>at(h.doubleValue));return new cp(l)}convertGeoPoint(e){return new up(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);ze(p0(i));const o=new ol(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||Vr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(r,e,t){let i;return i=r?r.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KP extends W0{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(K0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class ic extends KP{data(e={}){return super.data(e)}}class GP{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Wu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ic(this._firestore,this._userDataWriter,i.key,i,new Wu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new ic(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Wu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new ic(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Wu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),E=h.indexOf(d.doc.key)),{type:QP(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}class YP extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function XP(r){r=_s(r,Gc);const e=_s(r.firestore,Tl),t=U0(e),i=new YP(e);return HP(r._query),NP(t,r._query).then(o=>new GP(e,i,r,o))}function JP(r,e,t,...i){r=_s(r,In);const o=_s(r.firestore,Tl),l=B0(o);let h;return h=typeof(e=Rt(e))=="string"||e instanceof Qc?zP(l,"updateDoc",r._key,e,t,i):jP(l,"updateDoc",r._key,e),pp(o,[h.toMutation(r._key,jn.exists(!0))])}function ZP(r){return pp(_s(r.firestore,Tl),[new Hf(r._key,jn.none())])}function ek(r,e){const t=_s(r.firestore,Tl),i=hs(r),o=WP(r.converter,e);return pp(t,[UP(B0(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,jn.exists(!1))]).then(()=>i)}function pp(r,e){return function(i,o){const l=new Ti;return i.asyncQueue.enqueueAndForget(async()=>yP(await kP(i),o,l)),l.promise}(U0(r),e)}(function(e,t=!0){(function(o){zo=o})(Uo),Po(new fs("firestore",(i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),d=new Tl(new FR(i.getProvider("auth-internal")),new zR(h,i.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(y.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Ei(py,my,e),Ei(py,my,"esm2017")})();const tk={apiKey:"AIzaSyCO50EI1L4uq7HnwNWe5mn9360AwFZoxss",authDomain:"gerenciador-de-estoques-51e76.firebaseapp.com",projectId:"gerenciador-de-estoques-51e76",storageBucket:"gerenciador-de-estoques-51e76.firebasestorage.app",messagingSenderId:"981950568944",appId:"1:981950568944:web:8ec112b64e60ead5cf2535"},G0=M_(tk),wn=LP(G0),qo=()=>{const[r,e]=M.useState(null),[t,i]=M.useState(null),[o,l]=M.useState(!1),[h,d]=M.useState(!1),p=DR(G0),y=async I=>{i(!0),e(null),l(!1);try{const{user:N}=await p1(p,I.email,I.password);return await y1(N,{displayName:I.displayName}),l(!0),N}catch(N){console.log(N.message),console.log(typeof N.message);let L;N.message.includes("Password")?L="A senha precisa conter pelo menos 6 caracteres.":N.message.includes("email-already")?L="E-mail já cadastrado.":L="Ocorreu um erro, por favor tente mais tarde.",e(L)}finally{i(!1)}},E=async I=>{i(!0),e(!1);try{await m1(p,I.email,I.password)}catch(N){let L;N.message.includes("invalid-credential")?L="Confira seu email e senha e tente novamente.":L="Ocorreu um erro! Tente novamente mais tarde.",e(L)}finally{i(!1)}},T=()=>{w1(p)};return M.useEffect(()=>()=>{d(!0)},[]),{auth:p,error:r,loading:t,success:o,createUser:y,loginUser:E,logoutUser:T}},Q0=M.createContext();function nk({children:r,value:e}){return P.jsx(Q0.Provider,{value:e,children:r})}function rk(){return M.useContext(Q0)}const Y0=M.createContext(),ik=({children:r})=>{const[e,t]=M.useState(null),[i,o]=M.useState("");return P.jsx(Y0.Provider,{value:{stockId:e,setStockId:t,stockName:i,setStockName:o},children:r})},Vi=()=>M.useContext(Y0),Ur=()=>({addDocument:async(o,l,h=null,d=null)=>{try{let p;return h&&d?p=yo(wn,o,h,"sessoes",d,"produtos"):h?p=yo(wn,o,h,"sessoes"):p=yo(wn,o),(await ek(p,l)).id}catch(p){return console.error("Erro ao adicionar documento:",p),null}},getDocuments:async(o,l=null,h=null)=>{try{let d;return l&&h?d=yo(wn,o,l,"sessoes",h,"produtos"):l?d=yo(wn,o,l,"sessoes"):d=yo(wn,o),(await XP(d)).docs.map(E=>({id:E.id,...E.data()}))}catch(d){return console.error("Erro ao buscar documentos:",d),[]}},deleteDocument:async(o,l,h=null,d=null)=>{try{let p;h&&d?p=hs(wn,o,h,"sessoes",d,"produtos",l):h?p=hs(wn,o,h,"sessoes",l):p=hs(wn,o,l),await ZP(p)}catch(p){console.error("Erro ao deletar documento:",p)}},updateDocument:async(o,l,h=null,d,p=null)=>{try{let y;h&&p?y=hs(wn,o,h,"sessoes",p,"produtos",l):h?y=hs(wn,o,h,"sessoes",l):y=hs(wn,o,l),await JP(y,d)}catch(y){console.error("Erro ao atualizar documento:",y)}}});var sk={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function ok(r){if(typeof r=="number")return{value:r,unit:"px"};var e,t=(r.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var i=(r.match(/[^0-9]*$/)||"").toString();return sk[i]?{value:e,unit:i}:(console.warn("React Spinners: ".concat(r," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function l_(r){var e=ok(r);return"".concat(e.value).concat(e.unit)}var ak=function(r,e,t){var i="react-spinners-".concat(r,"-").concat(t);if(typeof window>"u"||!window.document)return i;var o=document.createElement("style");document.head.appendChild(o);var l=o.sheet,h=`
    @keyframes `.concat(i,` {
      `).concat(e,`
    }
  `);return l&&l.insertRule(h,0),i},Cc=function(){return Cc=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Cc.apply(this,arguments)},lk=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t},uk=ak("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function mp(r){var e=r.loading,t=e===void 0?!0:e,i=r.color,o=i===void 0?"#000000":i,l=r.speedMultiplier,h=l===void 0?1:l,d=r.cssOverride,p=d===void 0?{}:d,y=r.size,E=y===void 0?35:y,T=lk(r,["loading","color","speedMultiplier","cssOverride","size"]),I=Cc({background:"transparent !important",width:l_(E),height:l_(E),borderRadius:"100%",border:"2px solid",borderTopColor:o,borderBottomColor:"transparent",borderLeftColor:o,borderRightColor:o,display:"inline-block",animation:"".concat(uk," ").concat(.75/h,"s 0s infinite linear"),animationFillMode:"both"},p);return t?M.createElement("span",Cc({style:I},T)):null}const gp=({title:r,message:e,onConfirm:t,onCancel:i,isOpen:o})=>o?bT.createPortal(P.jsx("div",{className:"modal-overlay",children:P.jsxs("div",{className:"modal-content",children:[P.jsx("h3",{children:r}),P.jsx("p",{children:e}),P.jsxs("div",{className:"modal-actions",children:[P.jsx("button",{className:"cancel-button",onClick:i,children:"Cancelar"}),P.jsx("button",{className:"confirm-button",onClick:t,children:"Confirmar"})]})]})}),document.getElementById("modal-root")):null,ck="_actions_button_bth57_2",hk="_remove_button_bth57_26",u_={actions_button:ck,remove_button:hk};/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),X0=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=M.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...d},p)=>M.createElement("svg",{ref:p,...fk,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:X0("lucide",o),...d},[...h.map(([y,E])=>M.createElement(y,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=(r,e)=>{const t=M.forwardRef(({className:i,...o},l)=>M.createElement(pk,{ref:l,iconNode:e,className:X0(`lucide-${dk(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],J0=Wo("ChevronLeft",mk);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z0=Wo("ChevronRight",gk);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M5 12h14",key:"1ays0h"}]],_k=Wo("Minus",yk);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ek=Wo("Pen",vk);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tk=Wo("Plus",wk);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Sk=Wo("Trash",Ik),el=({action:r,label:e})=>{const t=e==="Excluir"?u_.remove_button:u_.actions_button;let i;return e==="Excluir"?i=P.jsx(Sk,{size:15}):e==="Editar"?i=P.jsx(Ek,{size:15}):e==="Saída"?i=P.jsx(_k,{size:15}):i=P.jsx(Tk,{size:15}),P.jsx("button",{className:t,onClick:r,children:i})},Rk="_create_button_dhy28_1",Ck={create_button:Rk},lr=({label:r})=>P.jsx("button",{className:Ck.create_button,type:"submit",children:r}),Ak=({section:r,setSections:e})=>{const{deleteDocument:t,updateDocument:i}=Ur(),{stockId:o}=Vi(),[l,h]=M.useState(null),[d,p]=M.useState(r.name),[y,E]=M.useState(!1),[T,I]=M.useState(!1),N=()=>{E(W=>!W)},L=async()=>{d.trim()&&(await i("estoques",r.id,o,{name:d}),e(W=>W.map(ee=>ee.id===r.id?{...ee,name:d}:ee)),E(!1))},B=()=>{console.log(r.id),h(r.id),I(!0)},U=()=>{I(!1),h(null)},K=async()=>{l&&(await t("estoques",l,o),e(W=>W.filter(ee=>ee.id!==l)),I(!1),h(null))};return P.jsxs("div",{className:"section-item",children:[P.jsxs("div",{className:"header",children:[P.jsx(xc,{className:"item-link",to:`/app_estoque/stock/${o}/sections/${r.id}`,children:P.jsx("h4",{children:r.name})}),P.jsxs("div",{className:"actions",children:[P.jsx(el,{action:N,label:"Editar"}),P.jsx(el,{action:B,label:"Excluir"})]})]}),y&&P.jsxs("form",{className:"form",onSubmit:L,children:[P.jsx("input",{type:"text",value:d,onChange:W=>p(W.target.value)}),P.jsx(lr,{label:"Salvar"})]}),P.jsx(gp,{isOpen:T,title:"Confirmar Exclusão?",message:"Ao confirmar você perderá todos os dados desta seção!",onConfirm:K,onCancel:U})]})},Pk=({updateTrigger:r})=>{const[e,t]=M.useState([]),{getDocuments:i}=Ur(),{stockId:o}=Vi(),l=async()=>{const h=await i("estoques",o)||[];t(h),console.log(h)};return M.useEffect(()=>{l(),r=0},[o,r]),P.jsxs("div",{className:"section-list",children:[P.jsx("h2",{children:"Linhas"}),P.jsx("div",{className:"section-items",children:e.map(h=>P.jsx(Ak,{section:h,setSections:t},h.id))})]})},kk=({onSectionAdded:r})=>{const{addDocument:e}=Ur(),{stockId:t}=Vi(),[i,o]=M.useState(""),l=async h=>{if(h.preventDefault(),!i.trim())return;const d={createAt:new Date,name:i.trim()},p=await e("estoques",d,t);console.log("Sessão criada com ID:",p),o(""),r()};return P.jsxs("form",{className:"add-sections",onSubmit:l,children:[P.jsx("label",{children:P.jsx("span",{children:"Nome da linha:"})}),P.jsx("input",{className:"name-input",type:"text",placeholder:"Digite o nome",value:i,onChange:h=>o(h.target.value)}),P.jsx(lr,{label:"Criar Seção"})]})},xk="_back_btn_1sxog_1",Nk="_arrow_1sxog_12",c_={back_btn:xk,arrow:Nk},eE=({navigate:r})=>P.jsx("button",{className:c_.back_btn,onClick:()=>r(-1),children:P.jsx(J0,{className:c_.arrow,size:26})}),Dk=()=>{const{id:r}=w_(),{auth:e}=qo(),{stockId:t,setStockId:i,stockName:o,setStockName:l}=Vi(),{getDocuments:h}=Ur(),d=Pc(),[p,y]=M.useState(0),[E,T]=M.useState(!0);M.useEffect(()=>{if(!r)return;i(r),(async()=>{try{const L=await h("estoques"),B=L==null?void 0:L.find(U=>U.id===r);B&&B.userId===e.currentUser.uid?l(B.name):d("/app_estoque")}catch(L){console.error("Erro ao buscar estoque:",L)}finally{T(!1)}})()},[r,e.currentUser]);const I=()=>{y(N=>N+1)};return P.jsxs("div",{className:"stock-page",children:[P.jsxs("div",{className:"breadcrumbs",children:[P.jsx(eE,{navigate:d}),P.jsx("h1",{children:o||"Carregando..."})]}),P.jsxs("div",{className:"product-section",children:[P.jsx(kk,{onSectionAdded:I}),E?P.jsx("div",{className:"loader-container",children:P.jsx(mp,{color:"#007bff",size:20})}):P.jsx(Pk,{updateTrigger:p})]})]})},Ok=({sectionId:r,onProductAdded:e})=>{const{addDocument:t}=Ur(),{stockId:i}=Vi(),[o,l]=M.useState(""),[h,d]=M.useState(""),[p,y]=M.useState(),E=async T=>{if(T.preventDefault(),!o.trim()||!h.trim()||p<=0)return;const I={name:o.trim(),code:h.trim().toUpperCase(),quantity:parseInt(p,10),createAt:new Date},N=await t("estoques",I,i,r);console.log("Produto criado com ID:",N),l(""),d(""),y(0),e()};return P.jsxs("form",{className:"add-products",onSubmit:E,children:[P.jsx("label",{children:P.jsx("span",{children:"Nome do acessório:"})}),P.jsx("input",{className:"name-input",type:"text",placeholder:"Digite o nome",value:o,onChange:T=>l(T.target.value)}),P.jsx("label",{children:P.jsx("span",{children:"Código do acessório:"})}),P.jsx("input",{className:"name-input",type:"",placeholder:"Digite o código",value:h,onChange:T=>d(T.target.value)}),P.jsx("label",{children:P.jsx("span",{children:"Quantidade:"})}),P.jsx("input",{className:"quantity-input",type:"number",placeholder:"0",value:p,onChange:T=>y(T.target.value)}),P.jsx(lr,{label:"Criar Produto"})]})},Lk=({sectionId:r,product:e,setProducts:t})=>{const{stockId:i}=Vi(),{deleteDocument:o,updateDocument:l}=Ur(),[h,d]=M.useState(!1),[p,y]=M.useState(!1),[E,T]=M.useState(!1),[I,N]=M.useState(e.quantity),[L,B]=M.useState(0),[U,K]=M.useState(0),[W,ee]=M.useState(!1),[ae,Ee]=M.useState(null),Te=()=>{const He=(getFromLocalStorage(r)||[]).map(De=>De.id===e.id?{...De,quantity:I}:De);saveToLocalStorage(r,He),t(He),d(!1)},D=()=>{Ee(e.id),ee(!0)},S=()=>{ee(!1),Ee(null)},C=async()=>{ae&&(await o("estoques",ae,i,r),t(Fe=>Fe.filter(He=>He.id!==ae)),ee(!1),Ee(null))},x=()=>{y(Fe=>!Fe)},V=()=>{T(Fe=>!Fe)},F=async Fe=>{try{const He=Math.max(0,e.quantity+Fe);await l("estoques",e.id,i,{quantity:He},r),t(De=>De.map(re=>re.id===e.id?{...re,quantity:He}:re))}catch(He){console.error("Erro ao atualizar quantidade:",He)}},A=()=>{F(parseInt(L,10)),y(!1),B(0)},et=()=>{F(-parseInt(U,10)),T(!1),K(0)};return P.jsxs("div",{className:"product-item",children:[P.jsxs("div",{className:"header",children:[P.jsxs("div",{children:[P.jsxs("div",{className:"product-data",children:[P.jsx("h4",{children:"Nome:"}),P.jsx("p",{className:"product-span",children:e.name})]}),P.jsxs("div",{className:"product-data",children:[P.jsx("h4",{children:" Código:"}),P.jsx("p",{className:"product-span",children:e.code})]}),P.jsxs("div",{className:"product-data",children:[P.jsx("h4",{children:" Quantidade:"}),P.jsx("p",{className:"quantity-span",children:e.quantity})]})]}),P.jsxs("div",{className:"actions",children:[P.jsx(el,{action:x,label:"Entrada"}),P.jsx(el,{action:V,label:"Saída"}),P.jsx(el,{action:D,label:"Excluir"})]})]}),h&&P.jsxs("div",{className:"form",children:[P.jsx("input",{type:"number",value:I,onChange:Fe=>N(parseInt(Fe.target.value,10))}),P.jsx("button",{onClick:Te,children:"Salvar"})]}),p&&P.jsxs("form",{className:"form",onSubmit:A,children:[P.jsx("input",{type:"number",placeholder:"Quantidade a acrescentar",value:L,onChange:Fe=>B(Fe.target.value)}),P.jsx(lr,{label:"Adicionar"})]}),E&&P.jsxs("form",{className:"form",onSubmit:et,children:[P.jsx("input",{type:"number",placeholder:"Quantidade a retirar",value:U,onChange:Fe=>K(Fe.target.value)}),P.jsx(lr,{label:"Retirar"})]}),P.jsx(gp,{isOpen:W,title:"Confirmar Exclusão?",message:"Ao confirmar você perderá todos os dados deste produto!",onConfirm:C,onCancel:S})]})},Vk=({sectionId:r,updateTrigger:e})=>{const[t,i]=M.useState([]),{getDocuments:o}=Ur(),{stockId:l}=Vi(),h=async()=>{const d=await o("estoques",l,r)||[];i(d),console.log(d)};return M.useEffect(()=>{h(),e=0},[r,e]),P.jsxs("div",{className:"product-list",children:[P.jsx("h2",{children:"Acessórios"}),P.jsx("div",{className:"product-items",children:t.map(d=>P.jsx(Lk,{sectionId:r,product:d,setProducts:i},d.id))})]})},Mk=()=>{const r=Pc(),{sectionId:e}=w_(),{stockName:t,stockId:i}=Vi(),{getDocuments:o}=Ur(),[l,h]=M.useState(""),[d,p]=M.useState(0),[y,E]=M.useState(!0);M.useEffect(()=>{(async()=>{if(!(!i||!e))try{const N=await o("estoques",i),L=N==null?void 0:N.find(B=>B.id===e);L?h(L.name):r(`/app_estoque/stock/${i}`)}catch(N){console.error("Erro ao buscar estoque:",N)}finally{E(!1)}})()},[i,e]);const T=()=>{p(I=>I+1)};return P.jsxs("div",{className:"stock-page",children:[P.jsxs("div",{className:"breadcrumbs",children:[P.jsx(eE,{navigate:r}),P.jsx("h1",{children:l?P.jsxs(P.Fragment,{children:[t," ",P.jsx(Z0,{size:20})," ",l]}):"Carregando..."})]}),P.jsxs("div",{className:"product-section",children:[P.jsx(Ok,{sectionId:e,onProductAdded:T}),y?P.jsx("div",{className:"loader-container",children:P.jsx(mp,{color:"#007bff",size:20})}):P.jsx(Vk,{sectionId:e,updateTrigger:d})]})]})},bk="_navComponent_9ng2q_1",Fk="_toolBox_9ng2q_17",Uk="_toolList_9ng2q_21",jk="_active_9ng2q_35",di={navComponent:bk,toolBox:Fk,toolList:Uk,active:jk},zk=()=>{const{user:r}=rk(),{logoutUser:e}=qo();return P.jsxs("nav",{className:di.navComponent,children:[P.jsx("div",{className:di.logo,children:P.jsx(_o,{to:"/home",children:P.jsx("h1",{children:"Stocks"})})}),P.jsx("div",{className:di.toolBox,children:P.jsxs("ul",{className:di.toolList,children:[!r&&P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(_o,{to:"/login",className:({isActive:t})=>t?di.active:"",children:"Entrar"})}),P.jsx("li",{children:P.jsx(_o,{to:"/register",className:({isActive:t})=>t?di.active:"",children:"Cadastrar"})})]}),r&&P.jsxs(P.Fragment,{children:[P.jsx("li",{children:P.jsx(_o,{to:"/app_estoque",className:({isActive:t})=>t?di.active:"",children:"Estoques"})}),P.jsx("li",{children:P.jsx(_o,{to:"/home",onClick:e,className:({isActive:t})=>t?di.active:"",children:"Sair"})})]})]})})]})},Bk=()=>{const{auth:r}=qo(),{addDocument:e,getDocuments:t,deleteDocument:i}=Ur(),[o,l]=M.useState(""),[h,d]=M.useState([]),[p,y]=M.useState(null),[E,T]=M.useState(!1),[I,N]=M.useState(!0);M.useEffect(()=>{(async()=>{if(!r.currentUser)return;const ae=(await t("estoques")||[]).filter(Ee=>Ee.userId===r.currentUser.uid);d(ae),N(!1)})()},[r.currentUser]);const L=async W=>{if(W.preventDefault(),!o.trim())return;const ee={name:o.trim(),userId:r.currentUser.uid,createdAt:new Date},ae=await e("estoques",ee);ae&&(d(Ee=>[...Ee,{id:ae,...ee}]),l(""))},B=W=>{console.log(W),y(W),T(!0)},U=()=>{T(!1),y(null)},K=async()=>{p&&(await i("estoques",p),d(W=>W.filter(ee=>ee.id!==p)),T(!1),y(null))};return P.jsxs("div",{className:"stock-management",children:[P.jsx("h1",{children:"Estoques"}),P.jsxs("form",{className:"add-estoque-form",onSubmit:L,children:[P.jsx("label",{children:"Nome do estoque:"}),P.jsx("input",{type:"text",value:o,onChange:W=>l(W.target.value),placeholder:"Digite o nome"}),P.jsx(lr,{label:"Criar Estoque"})]}),I?P.jsx("div",{className:"loader-container",children:P.jsx(mp,{color:"#007bff",size:20})}):P.jsx("ul",{children:h.map(W=>P.jsx(xc,{className:"stock-link",to:`/app_estoque/stock/${W.id}`,children:P.jsxs("li",{className:"stock-item",children:[W.name,P.jsx("button",{className:"removing",onClick:ee=>{ee.preventDefault(),B(W.id)},children:"Excluir"})]})},W.id))}),P.jsx(gp,{isOpen:E,title:"Confirmar Exclusão?",message:"Ao confirmar você perderá todos os dados deste estoque!",onConfirm:K,onCancel:U})]})},$k="_container_dtgcx_1",Hk="_left_content_dtgcx_20",qk="_image_container_dtgcx_27",Wk="_home_dtgcx_40",Kk="_moveRight_dtgcx_1",Gk="_home_description_dtgcx_76",Qk="_fadeIn_dtgcx_1",Yk="_logo_dtgcx_96",Xk="_image_home_dtgcx_109",Jk="_float_dtgcx_1",Zk="_carousel_container_dtgcx_128",ex="_carousel_dtgcx_128",tx="_carousel_button_dtgcx_153",nx="_prev_dtgcx_176",rx="_next_dtgcx_180",ix="_card_dtgcx_184",sx="_card_title_dtgcx_199",ox="_card_description_dtgcx_206",xt={container:$k,left_content:Hk,image_container:qk,home:Wk,moveRight:Kk,home_description:Gk,fadeIn:Qk,logo:Yk,image_home:Xk,float:Jk,carousel_container:Zk,carousel:ex,carousel_button:tx,prev:nx,next:rx,card:ix,card_title:sx,card_description:ox},ax="/app_estoque/assets/homestock-CvW6Y6y7.svg",lx=()=>{const r=M.useRef(null),[e,t]=M.useState(!1),[i,o]=M.useState(!0),l=()=>{const p=r.current;if(p){t(p.scrollLeft>0);const y=p.scrollWidth-p.clientWidth;o(p.scrollLeft<y-1)}},h=p=>{const y=r.current;y&&(y.scrollBy({left:p*320,behavior:"smooth"}),setTimeout(l,500))};M.useEffect(()=>(l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[]),M.useEffect(()=>{const p=r.current;if(p){const y=()=>{requestAnimationFrame(l)};return p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[]);const d=[{title:"Gestão de Produtos",description:"Cadastre e gerencie seus produtos de forma simples e organizada, com controle de estoque em tempo real."},{title:"Controle de Estoque",description:"Acompanhe entradas, saídas e movimentações do seu estoque com relatórios detalhados."},{title:"Análise de Dados",description:"Visualize métricas importantes e tome decisões baseadas em dados concretos sobre seu estoque."}];return P.jsxs("div",{className:xt.container,children:[P.jsxs("div",{className:xt.left_content,children:[P.jsx("div",{className:xt.home,children:P.jsxs("div",{children:[P.jsxs("p",{className:xt.home_description,children:["Bem vindo ao ",P.jsx("span",{className:xt.logo,children:"STOCKS"}),"!"]}),P.jsx("p",{className:xt.home_description,children:"Gerencie seu estoque de forma simples e eficiente"})]})}),P.jsxs("div",{className:xt.carousel_container,children:[e&&P.jsx("button",{className:`${xt.carousel_button} ${xt.prev}`,onClick:()=>h(-1),children:P.jsx(J0,{size:24})}),P.jsx("div",{className:xt.carousel,ref:r,children:d.map((p,y)=>P.jsxs("div",{className:xt.card,children:[P.jsx("h3",{className:xt.card_title,children:p.title}),P.jsx("p",{className:xt.card_description,children:p.description})]},y))}),i&&P.jsx("button",{className:`${xt.carousel_button} ${xt.next}`,onClick:()=>h(1),children:P.jsx(Z0,{size:24})})]})]}),P.jsx("div",{className:xt.image_container,children:P.jsx("img",{src:ax,alt:"Ilustração de gestão de estoque",className:xt.image_home})})]})},ux="_login_eo8ba_1",cx="_header_eo8ba_10",h_={login:ux,header:cx},hx=()=>{const[r,e]=M.useState(""),[t,i]=M.useState(""),[o,l]=M.useState(""),{loginUser:h,error:d,loading:p}=qo(),y=async E=>{E.preventDefault(),l(""),await h({email:r,password:t})};return M.useEffect(()=>{d&&(l(d),console.log(o))},[d]),P.jsxs("div",{className:h_.login,children:[P.jsxs("div",{className:h_.header,children:[P.jsx("h1",{children:"Entrar"}),P.jsx("p",{children:"Faça o login para acessar seus estoques"})]}),P.jsxs("form",{onSubmit:y,children:[P.jsxs("label",{children:[P.jsx("span",{children:"E-mail:"}),P.jsx("input",{type:"email",name:"email",required:!0,placeholder:"E-mail do usuário",value:r,onChange:E=>e(E.target.value)})]}),P.jsxs("label",{children:[P.jsx("span",{children:"Senha:"}),P.jsx("input",{type:"password",name:"password",required:!0,placeholder:"Insira sua senha",value:t,onChange:E=>i(E.target.value)})]}),o&&P.jsx("p",{className:"error",children:o}),!p&&P.jsx(lr,{label:"Entrar"}),p&&P.jsx(lr,{label:"Entrando...",disabled:!0})]})]})},dx=()=>P.jsx("div",{children:P.jsx("h1",{children:"Logout"})}),fx="_register_1sj55_1",px="_header_1sj55_10",d_={register:fx,header:px},mx=()=>{const[r,e]=M.useState(""),[t,i]=M.useState(""),[o,l]=M.useState(""),[h,d]=M.useState(""),[p,y]=M.useState(""),{createUser:E,error:T,loading:I,success:N}=qo(),L=async B=>{B.preventDefault(),y("");const U={displayName:r,email:t,password:o};if(o!==h){y("As senhas devem ser iguais!");return}const K=await E(U);console.log(K)};return M.useEffect(()=>{T&&y(T)},[T]),P.jsxs("div",{className:d_.register,children:[P.jsxs("div",{className:d_.header,children:[P.jsx("h1",{children:"Cadastre-se para utilizar o sistema"}),P.jsx("p",{children:"Crie seu usuário e começe a adicionar seu estoque"})]}),P.jsxs("form",{onSubmit:L,children:[P.jsxs("label",{children:[P.jsx("span",{children:"Nome:"}),P.jsx("input",{type:"text",name:"displayName",required:!0,placeholder:"Nome do usuário",value:r,onChange:B=>e(B.target.value)})]}),P.jsxs("label",{children:[P.jsx("span",{children:"E-mail:"}),P.jsx("input",{type:"email",name:"email",required:!0,placeholder:"E-mail do usuário",value:t,onChange:B=>i(B.target.value)})]}),P.jsxs("label",{children:[P.jsx("span",{children:"Senha:"}),P.jsx("input",{type:"password",name:"password",required:!0,placeholder:"Insira sua senha",value:o,onChange:B=>l(B.target.value)})]}),P.jsxs("label",{children:[P.jsx("span",{children:"Confirmação de senha:"}),P.jsx("input",{type:"password",name:"confirmPassword",required:!0,placeholder:"Confirme a sua senha",value:h,onChange:B=>d(B.target.value)})]}),p&&P.jsx("p",{className:"error",children:p}),N&&P.jsx("p",{className:"success",children:"Usuário cadastrado com sucesso!"}),!I&&P.jsx(lr,{label:"Cadastrar"}),I&&P.jsx(lr,{label:"Cadastrando...",disabled:!0})]})]})},gx=()=>{const[r,e]=M.useState(void 0),{auth:t}=qo(),i=r===void 0;return M.useEffect(()=>{E1(t,o=>{e(o)})},[t]),i?P.jsx("p",{children:"Carregando..."}):P.jsx("div",{children:P.jsx(nk,{value:{user:r},children:P.jsxs(ik,{children:[P.jsx(zk,{}),P.jsxs(rT,{children:[P.jsx(Ar,{path:"/",element:P.jsx(go,{to:"/app_estoque"})}),P.jsx(Ar,{path:"/app_estoque",element:r?P.jsx(Bk,{}):P.jsx(go,{to:"/login"})}),P.jsx(Ar,{path:"/app_estoque/stock/:id",element:r?P.jsx(Dk,{}):P.jsx(go,{to:"/login"})}),P.jsx(Ar,{path:"/app_estoque/stock/:stockId/sections/:sectionId",element:r?P.jsx(Mk,{}):P.jsx(go,{to:"/login"})}),P.jsx(Ar,{path:"/home",element:P.jsx(lx,{})}),P.jsx(Ar,{path:"/login",element:r?P.jsx(go,{to:"/"}):P.jsx(hx,{})}),P.jsx(Ar,{path:"/register",element:r?P.jsx(go,{to:"/"}):P.jsx(mx,{})}),P.jsx(Ar,{path:"/logout",element:P.jsx(dx,{})})]})]})})})};fw.createRoot(document.getElementById("root")).render(P.jsx(aw.StrictMode,{children:P.jsx(AT,{children:P.jsx(gx,{})})}));
